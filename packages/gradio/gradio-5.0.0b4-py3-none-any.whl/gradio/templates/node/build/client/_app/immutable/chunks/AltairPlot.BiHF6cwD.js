import{s as G,e as V,a as H,c as z,b as P,f as v,g as K,p as W,i as A,h as x,n as I,J as Q,O as U,t as X,d as Y,j as Z,r as M}from"./scheduler.xQsDa6L3.js";import{S as $,i as ee}from"./index.lnKugwF0.js";import{t as C}from"./2.Bbgn9Xo5.js";import{g as te}from"./color.Dwea8QME.js";import le from"./vega-embed.module.DiPyVr0d.js";function ie(i,t,l,r){let e=t.getPropertyValue("--color-accent"),n=t.getPropertyValue("--body-text-color"),a=t.getPropertyValue("--border-color-primary"),f=t.fontFamily,b=t.getPropertyValue("--block-title-text-weight");const _=s=>s.endsWith("px")?parseFloat(s.slice(0,-2)):12;let y=_(t.getPropertyValue("--text-md")),d=_(t.getPropertyValue("--text-sm")),g={autosize:{type:"fit",contains:"padding"},axis:{labelFont:f,labelColor:n,titleFont:f,titleColor:n,tickColor:a,labelFontSize:d,gridColor:a,titleFontWeight:"normal",titleFontSize:d,labelFontWeight:"normal",domain:!1,labelAngle:0},legend:{labelColor:n,labelFont:f,titleColor:n,titleFont:f,titleFontWeight:"normal",titleFontSize:d,labelFontWeight:"normal",offset:2},title:{color:n,font:f,fontSize:y,fontWeight:b,anchor:"middle"},view:{stroke:a}};i.config=g;let c=i.encoding,h=i.layer;switch(l){case"scatter":i.config.mark={stroke:e},c.color&&c.color.type=="nominal"?c.color.scale.range=c.color.scale.range.map((s,m)=>S(r,m)):c.color&&c.color.type=="quantitative"&&(c.color.scale.range=["#eff6ff","#1e3a8a"],c.color.scale.range.interpolate="hsl");break;case"line":i.config.mark={stroke:e,cursor:"crosshair"},h.forEach(s=>{s.encoding.color&&(s.encoding.color.scale.range=s.encoding.color.scale.range.map((m,w)=>S(r,w)))});break;case"bar":i.config.mark={opacity:.8,fill:e},c.color&&(c.color.scale.range=c.color.scale.range.map((s,m)=>S(r,m)));break}return i}function S(i,t){var r;let l=i[t%i.length];return l&&l in C?(r=C[l])==null?void 0:r.primary:l||C[te(t)].primary}function q(i){let t,l;return{c(){t=V("div"),l=X(i[0]),this.h()},l(r){t=z(r,"DIV",{class:!0});var e=P(t);l=Y(e,i[0]),e.forEach(v),this.h()},h(){W(t,"class","caption layout svelte-1ghah4v")},m(r,e){A(r,t,e),x(t,l)},p(r,e){e&1&&Z(l,r[0])},d(r){r&&v(t)}}}function oe(i){let t,l,r,e=i[0]&&q(i);return{c(){t=V("div"),l=V("div"),r=H(),e&&e.c(),this.h()},l(n){t=z(n,"DIV",{"data-testid":!0,class:!0});var a=P(t);l=z(a,"DIV",{}),P(l).forEach(v),r=K(a),e&&e.l(a),a.forEach(v),this.h()},h(){W(t,"data-testid","altair"),W(t,"class","altair layout svelte-1ghah4v")},m(n,a){A(n,t,a),x(t,l),i[12](l),x(t,r),e&&e.m(t,null),i[13](t)},p(n,[a]){n[0]?e?e.p(n,a):(e=q(n),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},i:I,o:I,d(n){n&&v(t),i[12](null),e&&e.d(),i[13](null)}}}function re(i,t,l){let r,e,n,{value:a}=t,{target:f}=t,{colors:b=[]}=t,{caption:_}=t,{show_actions_button:y}=t,{gradio:d}=t,g,c,h,{_selectable:s}=t,m=window.getComputedStyle(f),w,E;const O=()=>Math.min(c.offsetWidth,E||c.offsetWidth);let D=()=>{};const J=()=>{n&&l(10,e.width=O(),e),le(g,e,{actions:y}).then(function(o){if(h=o.view,D=()=>{h.signal("width",O()).run()},!s)return;const k=(F,p)=>{const u=h.signal("brush");if(u)if(Object.keys(u).length===0)d.dispatch("select",{value:null,index:null,selected:!1});else{const N=Object.keys(u)[0];let R=u[N].map(B=>B/1e3);d.dispatch("select",{value:u,index:R,selected:!0})}};h.addEventListener("mouseup",k),h.addEventListener("touchup",k)})};let j=new ResizeObserver(()=>{n&&e.width!==c.offsetWidth&&D()});Q(()=>{J(),j.observe(c)}),U(()=>{j.disconnect()});function L(o){M[o?"unshift":"push"](()=>{g=o,l(1,g)})}function T(o){M[o?"unshift":"push"](()=>{c=o,l(2,c)})}return i.$$set=o=>{"value"in o&&l(3,a=o.value),"target"in o&&l(4,f=o.target),"colors"in o&&l(5,b=o.colors),"caption"in o&&l(0,_=o.caption),"show_actions_button"in o&&l(6,y=o.show_actions_button),"gradio"in o&&l(7,d=o.gradio),"_selectable"in o&&l(8,s=o._selectable)},i.$$.update=()=>{var o,k,F,p;i.$$.dirty&8&&l(11,r=a==null?void 0:a.plot),i.$$.dirty&2048&&l(10,e=JSON.parse(r)),i.$$.dirty&1280&&e&&e.params&&!s&&l(10,e.params=e.params.filter(u=>u.name!=="brush"),e),i.$$.dirty&1064&&a.chart&&l(10,e=ie(e,m,a.chart,b)),i.$$.dirty&1536&&w!==e&&(l(9,w=e),E=e.width),i.$$.dirty&1032&&(n=!((k=(o=e.encoding)==null?void 0:o.column)!=null&&k.field||(p=(F=e.encoding)==null?void 0:F.row)!=null&&p.field||a.chart===void 0))},[_,g,c,a,f,b,y,d,s,w,e,r,L,T]}class de extends ${constructor(t){super(),ee(this,t,re,oe,G,{value:3,target:4,colors:5,caption:0,show_actions_button:6,gradio:7,_selectable:8})}}export{de as default};
