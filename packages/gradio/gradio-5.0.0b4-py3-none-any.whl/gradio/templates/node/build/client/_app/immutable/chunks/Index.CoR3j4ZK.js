const __vite__fileDeps=["./vega-embed.module.DiPyVr0d.js","./2.Bbgn9Xo5.js","./preload-helper.D6kgxu3v.js","./scheduler.xQsDa6L3.js","./index.lnKugwF0.js","./entry.CrGqrYiV.js","./stores.Br_hML4n.js","../assets/2.90oM7WDB.css","./dsv.DB8NKgIY.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as Ie}from"./preload-helper.D6kgxu3v.js";import{s as De,J as Be,a as ie,z as K,g as ne,i as j,f as v,r as Ne,B as qe,t as Fe,d as Pe,j as ze,e as Ee,c as Se,b as je,p as Ce,n as ye,h as Me}from"./scheduler.xQsDa6L3.js";import{S as Re,i as He,c as I,a as D,m as B,t as k,b as F,d as N,g as ke,e as ve}from"./index.lnKugwF0.js";import{B as Ue,h as Je,d as Xe,b as Ye,e as Ge}from"./2.Bbgn9Xo5.js";import{E as Ke}from"./Empty.cyjo30Lv.js";import{L as Qe}from"./LineChart.CQp-JLz8.js";function we(o){let e,t;const i=[{autoscroll:o[2].autoscroll},{i18n:o[2].i18n},o[10]];let a={};for(let n=0;n<i.length;n+=1)a=qe(a,i[n]);return e=new Xe({props:a}),e.$on("clear_status",o[38]),{c(){I(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,f){B(e,n,f),t=!0},p(n,f){const m=f[0]&1028?Ye(i,[f[0]&4&&{autoscroll:n[2].autoscroll},f[0]&4&&{i18n:n[2].i18n},f[0]&1024&&Ge(n[10])]):{};e.$set(m)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function Ze(o){let e;return{c(){e=Fe(o[3])},l(t){e=Pe(t,o[3])},m(t,i){j(t,e,i)},p(t,i){i[0]&8&&ze(e,t[3])},d(t){t&&v(e)}}}function pe(o){let e,t;return e=new Ke({props:{unpadded_box:!0,$$slots:{default:[et]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment)},l(i){D(e.$$.fragment,i)},m(i,a){B(e,i,a),t=!0},p(i,a){const n={};a[1]&8388608&&(n.$$scope={dirty:a,ctx:i}),e.$set(n)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){N(e,i)}}}function $e(o){let e,t,i,a=o[1]&&xe(o);return{c(){e=Ee("div"),t=ie(),a&&a.c(),i=K(),this.h()},l(n){e=Se(n,"DIV",{class:!0}),je(e).forEach(v),t=ne(n),a&&a.l(n),i=K(),this.h()},h(){Ce(e,"class","svelte-1mkj2j")},m(n,f){j(n,e,f),o[39](e),j(n,t,f),a&&a.m(n,f),j(n,i,f)},p(n,f){n[1]?a?a.p(n,f):(a=xe(n),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i:ye,o:ye,d(n){n&&(v(e),v(t),v(i)),o[39](null),a&&a.d(n)}}}function et(o){let e,t;return e=new Qe({}),{c(){I(e.$$.fragment)},l(i){D(e.$$.fragment,i)},m(i,a){B(e,i,a),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){N(e,i)}}}function xe(o){let e,t;return{c(){e=Ee("p"),t=Fe(o[1]),this.h()},l(i){e=Se(i,"P",{class:!0});var a=je(e);t=Pe(a,o[1]),a.forEach(v),this.h()},h(){Ce(e,"class","caption svelte-1mkj2j")},m(i,a){j(i,e,a),Me(e,t)},p(i,a){a[0]&2&&ze(t,i[1])},d(i){i&&v(e)}}}function tt(o){let e,t,i,a,n,f,m,r=o[10]&&we(o);t=new Je({props:{show_label:o[7],info:void 0,$$slots:{default:[Ze]},$$scope:{ctx:o}}});const d=[$e,pe],c=[];function u(s,_){return s[0]&&s[13]?0:1}return a=u(o),n=c[a]=d[a](o),{c(){r&&r.c(),e=ie(),I(t.$$.fragment),i=ie(),n.c(),f=K()},l(s){r&&r.l(s),e=ne(s),D(t.$$.fragment,s),i=ne(s),n.l(s),f=K()},m(s,_){r&&r.m(s,_),j(s,e,_),B(t,s,_),j(s,i,_),c[a].m(s,_),j(s,f,_),m=!0},p(s,_){s[10]?r?(r.p(s,_),_[0]&1024&&k(r,1)):(r=we(s),r.c(),k(r,1),r.m(e.parentNode,e)):r&&(ke(),F(r,1,1,()=>{r=null}),ve());const P={};_[0]&128&&(P.show_label=s[7]),_[0]&8|_[1]&8388608&&(P.$$scope={dirty:_,ctx:s}),t.$set(P);let C=a;a=u(s),a===C?c[a].p(s,_):(ke(),F(c[C],1,1,()=>{c[C]=null}),ve(),n=c[a],n?n.p(s,_):(n=c[a]=d[a](s),n.c()),k(n,1),n.m(f.parentNode,f))},i(s){m||(k(r),k(t.$$.fragment,s),k(n),m=!0)},o(s){F(r),F(t.$$.fragment,s),F(n),m=!1},d(s){s&&(v(e),v(i),v(f)),r&&r.d(s),N(t,s),c[a].d(s)}}}function lt(o){let e,t;return e=new Ue({props:{visible:o[6],elem_id:o[4],elem_classes:o[5],scale:o[8],min_width:o[9],allow_overflow:!1,padding:!0,height:o[11],$$slots:{default:[tt]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment)},l(i){D(e.$$.fragment,i)},m(i,a){B(e,i,a),t=!0},p(i,a){const n={};a[0]&64&&(n.visible=i[6]),a[0]&16&&(n.elem_id=i[4]),a[0]&32&&(n.elem_classes=i[5]),a[0]&256&&(n.scale=i[8]),a[0]&512&&(n.min_width=i[9]),a[0]&2048&&(n.height=i[11]),a[0]&5263|a[1]&8388608&&(n.$$scope={dirty:a,ctx:i}),e.$set(n)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){N(e,i)}}}function it(o,e,t){let i,a,n,f,m,{value:r}=e,{x:d}=e,{y:c}=e,{color:u=null}=e,{title:s=null}=e,{x_title:_=null}=e,{y_title:P=null}=e,{color_title:C=null}=e,{x_bin:w=null}=e,{y_aggregate:V=void 0}=e,{color_map:q=null}=e,{x_lim:W=null}=e,{y_lim:M=null}=e,{x_label_angle:R=null}=e,{y_label_angle:H=null}=e,{caption:ae=null}=e,{sort:Q=null}=e;function Oe(l){if(l==="x")return"ascending";if(l==="-x")return"descending";if(l==="y")return{field:c,order:"ascending"};if(l==="-y")return{field:c,order:"descending"};if(l===null)return;if(Array.isArray(l))return l}let{_selectable:U=!1}=e,{target:J}=e,X,{gradio:A}=e,z,Z=!1;const We={s:1,m:60,h:60*60,d:24*60*60};let T,L;function Ae(l){let g=l.columns.indexOf(d),S=l.columns.indexOf(c),y=u?l.columns.indexOf(u):null;return l.data.map(x=>{const b={[d]:x[g],[c]:x[S]};return u&&y!==null&&(b[u]=x[y]),b})}const oe=typeof window<"u";let h,E,p=!1,re,Y,$;async function se(){if(E&&E.finalize(),!r||!h)return;re=h.offsetWidth;const l=Le();l&&(Y=new ResizeObserver(g=>{!g[0].target||!(g[0].target instanceof HTMLElement)||(re===0&&h.offsetWidth!==0&&r.datatypes[d]==="nominal"?se():E.signal("width",g[0].target.offsetWidth).run())}),$||($=(await Ie(()=>import("./vega-embed.module.DiPyVr0d.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)).default),$(h,l,{actions:!1}).then(function(g){E=g.view,Y.observe(h);var S;E.addEventListener("dblclick",()=>{A.dispatch("double_click")}),h.addEventListener("mousedown",function(y){y.detail>1&&y.preventDefault()},!1),U&&E.addSignalListener("brush",function(y,x){if(Object.keys(x).length===0)return;clearTimeout(S);let b=x[Object.keys(x)[0]];n&&(b=[b[0]/1e3,b[1]/1e3]),Z?G=()=>{A.dispatch("select",{value:b,index:b,selected:!0})}:S=setTimeout(function(){A.dispatch("select",{value:b,index:b,selected:!0})},250)})}))}let G=null;Be(()=>(t(35,p=!0),h.addEventListener("mousedown",()=>{Z=!0}),h.addEventListener("mouseup",()=>{Z=!1,G&&(G(),G=null)}),()=>{t(35,p=!1),E&&E.finalize(),Y&&Y.disconnect()}));function Le(){if(!r||!m)return null;let l=m.getPropertyValue("--color-accent"),g=m.getPropertyValue("--body-text-color"),S=m.getPropertyValue("--border-color-primary"),y=m.fontFamily,x=m.getPropertyValue("--block-title-text-weight");const b=O=>O.endsWith("px")?parseFloat(O.slice(0,-2)):12;let he=b(m.getPropertyValue("--text-md")),te=b(m.getPropertyValue("--text-sm"));return{$schema:"https://vega.github.io/schema/vega-lite/v5.17.0.json",background:"transparent",config:{autosize:{type:"fit",contains:"padding"},axis:{labelFont:y,labelColor:g,titleFont:y,titleColor:g,titlePadding:8,tickColor:S,labelFontSize:te,gridColor:S,titleFontWeight:"normal",titleFontSize:te,labelFontWeight:"normal",domain:!1,labelAngle:0},legend:{labelColor:g,labelFont:y,titleColor:g,titleFont:y,titleFontWeight:"normal",titleFontSize:te,labelFontWeight:"normal",offset:2},title:{color:g,font:y,fontSize:he,fontWeight:x,anchor:"middle"},view:{stroke:S},mark:{stroke:r.mark!=="bar"?l:void 0,fill:r.mark==="bar"?l:void 0,cursor:"crosshair"}},data:{name:"data"},datasets:{data:X},layer:["plot",...r.mark==="line"?["hover"]:[]].map(O=>({encoding:{size:r.mark==="line"?O=="plot"?{condition:{empty:!1,param:"hoverPlot",value:3},value:2}:{condition:{empty:!1,param:"hover",value:100},value:0}:void 0,opacity:O==="plot"?void 0:{condition:{empty:!1,param:"hover",value:1},value:0},x:{axis:R?{labelAngle:R}:{},field:d,title:_||d,type:r.datatypes[d],scale:f?{domain:f}:void 0,bin:z?{step:z}:void 0,sort:a},y:{axis:H?{labelAngle:H}:{},field:c,title:P||c,type:r.datatypes[c],scale:M?{domain:M}:void 0,aggregate:L?T:void 0},color:u?{field:u,legend:{orient:"bottom",title:C},scale:r.datatypes[u]==="nominal"?{domain:i,range:q?i.map(le=>q[le]):void 0}:{range:[100,200,300,400,500,600,700,800,900].map(le=>m.getPropertyValue("--primary-"+le)),interpolate:"hsl"},type:r.datatypes[u]}:void 0,tooltip:[{field:c,type:r.datatypes[c],aggregate:L?T:void 0,title:P||c},{field:d,type:r.datatypes[d],title:_||d,format:n?"%Y-%m-%d %H:%M:%S":void 0,bin:z?{step:z}:void 0},...u?[{field:u,type:r.datatypes[u]}]:[]]},strokeDash:{},mark:{clip:!0,type:O==="hover"?"point":r.mark},name:O})),params:[...r.mark==="line"?[{name:"hoverPlot",select:{clear:"mouseout",fields:u?[u]:[],nearest:!0,on:"mouseover",type:"point"},views:["hover"]},{name:"hover",select:{clear:"mouseout",nearest:!0,on:"mouseover",type:"point"},views:["hover"]}]:[],...U?[{name:"brush",select:{encodings:["x"],mark:{fill:"gray",fillOpacity:.3,stroke:"none"},type:"interval"},views:["plot"]}]:[]],width:h.offsetWidth,title:s||void 0}}let{label:fe="Textbox"}=e,{elem_id:ce=""}=e,{elem_classes:ue=[]}=e,{visible:_e=!0}=e,{show_label:me}=e,{scale:de=null}=e,{min_width:ge=void 0}=e,{loading_status:ee=void 0}=e,{height:be=void 0}=e;const Ve=()=>A.dispatch("clear_status",ee);function Te(l){Ne[l?"unshift":"push"](()=>{h=l,t(12,h)})}return o.$$set=l=>{"value"in l&&t(0,r=l.value),"x"in l&&t(14,d=l.x),"y"in l&&t(15,c=l.y),"color"in l&&t(16,u=l.color),"title"in l&&t(17,s=l.title),"x_title"in l&&t(18,_=l.x_title),"y_title"in l&&t(19,P=l.y_title),"color_title"in l&&t(20,C=l.color_title),"x_bin"in l&&t(21,w=l.x_bin),"y_aggregate"in l&&t(22,V=l.y_aggregate),"color_map"in l&&t(23,q=l.color_map),"x_lim"in l&&t(24,W=l.x_lim),"y_lim"in l&&t(25,M=l.y_lim),"x_label_angle"in l&&t(26,R=l.x_label_angle),"y_label_angle"in l&&t(27,H=l.y_label_angle),"caption"in l&&t(1,ae=l.caption),"sort"in l&&t(28,Q=l.sort),"_selectable"in l&&t(29,U=l._selectable),"target"in l&&t(30,J=l.target),"gradio"in l&&t(2,A=l.gradio),"label"in l&&t(3,fe=l.label),"elem_id"in l&&t(4,ce=l.elem_id),"elem_classes"in l&&t(5,ue=l.elem_classes),"visible"in l&&t(6,_e=l.visible),"show_label"in l&&t(7,me=l.show_label),"scale"in l&&t(8,de=l.scale),"min_width"in l&&t(9,ge=l.min_width),"loading_status"in l&&t(10,ee=l.loading_status),"height"in l&&t(11,be=l.height)},o.$$.update=()=>{o.$$.dirty[0]&1&&t(31,X=r?Ae(r):[]),o.$$.dirty[0]&65537|o.$$.dirty[1]&1&&(i=u&&r&&r.datatypes[u]==="nominal"?Array.from(new Set(X.map(l=>l[u]))):[]),o.$$.dirty[0]&268435456&&(a=Oe(Q)),o.$$.dirty[0]&16385&&t(36,n=r&&r.datatypes[d]==="temporal"),o.$$.dirty[0]&16777216|o.$$.dirty[1]&32&&(f=W&&n?[W[0]*1e3,W[1]*1e3]:W),o.$$.dirty[0]&2097152&&t(32,z=w?typeof w=="string"?1e3*parseInt(w.substring(0,w.length-1))*We[w[w.length-1]]:w:void 0),o.$$.dirty[0]&4210689|o.$$.dirty[1]&10&&r&&(r.mark==="point"?(t(34,L=z!==void 0),t(33,T=V||L?"sum":void 0)):(t(34,L=z!==void 0||r.datatypes[d]==="nominal"),t(33,T=V||"sum"))),o.$$.dirty[0]&1073741824&&t(37,m=J&&oe?window.getComputedStyle(J):null),o.$$.dirty[0]&331337731|o.$$.dirty[1]&84&&m&&requestAnimationFrame(se)},[r,ae,A,fe,ce,ue,_e,me,de,ge,ee,be,h,oe,d,c,u,s,_,P,C,w,V,q,W,M,R,H,Q,U,J,X,z,T,L,p,n,m,Ve,Te]}class ct extends Re{constructor(e){super(),He(this,e,it,lt,De,{value:0,x:14,y:15,color:16,title:17,x_title:18,y_title:19,color_title:20,x_bin:21,y_aggregate:22,color_map:23,x_lim:24,y_lim:25,x_label_angle:26,y_label_angle:27,caption:1,sort:28,_selectable:29,target:30,gradio:2,label:3,elem_id:4,elem_classes:5,visible:6,show_label:7,scale:8,min_width:9,loading_status:10,height:11},null,[-1,-1])}}export{ct as default};
