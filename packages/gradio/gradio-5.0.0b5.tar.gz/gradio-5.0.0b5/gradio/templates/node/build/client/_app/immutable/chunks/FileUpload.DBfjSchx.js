import{s as $,e as D,c as C,b as U,f as k,p as B,E as ie,i as P,h as F,y as de,t as G,a as R,d as K,g as q,q as se,F as Q,j as Z,T as we,R as ve,n as fe,X as pe,Y as Ee,z as V,M as Y,W as ye,r as oe,L as re,l as ze,u as Fe,m as Be,o as Te}from"./scheduler.xQsDa6L3.js";import{S as x,i as ee,g as W,e as X,t as p,b as E,c as M,a as N,m as I,d as L,f as ue}from"./index.lnKugwF0.js";import{f as _e,r as Ae,v as De}from"./2.CR2_qRuh.js";import{B as be}from"./BlockLabel.DJrWEbFx.js";import{E as Ce}from"./Empty.CUSwTljv.js";import{F as le}from"./File.Dqrs_nIa.js";import{U as Pe}from"./Upload.5AksC-gd.js";import{M as Ue}from"./ModifyUpload.Cna_ljQ9.js";import{D as Me}from"./DownloadLink.DYOvo1oy.js";const ce=i=>{let e=["B","KB","MB","GB","PB"],t=0;for(;i>1024;)i/=1024,t++;let l=e[t];return i.toFixed(1)+"&nbsp;"+l};function he(i,e,t){const l=i.slice();return l[12]=e[t],l[14]=t,l}function Ne(i){let e=i[2]("file.uploading")+"",t;return{c(){t=G(e)},l(l){t=K(l,e)},m(l,n){P(l,t,n)},p(l,n){n&4&&e!==(e=l[2]("file.uploading")+"")&&Z(t,e)},i:fe,o:fe,d(l){l&&k(t)}}}function Ie(i){let e,t;return e=new Me({props:{href:i[12].url,download:i[6]&&window.__is_colab__?null:i[12].orig_name,$$slots:{default:[Le]},$$scope:{ctx:i}}}),{c(){M(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,n){I(e,l,n),t=!0},p(l,n){const a={};n&8&&(a.href=l[12].url),n&8&&(a.download=l[6]&&window.__is_colab__?null:l[12].orig_name),n&32776&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function Le(i){let e,t=(i[12].size!=null?ce(i[12].size):"(size unknown)")+"",l;return{c(){e=new pe(!1),l=G(" ⇣"),this.h()},l(n){e=Ee(n,!1),l=K(n," ⇣"),this.h()},h(){e.a=l},m(n,a){e.m(t,n,a),P(n,l,a)},p(n,a){a&8&&t!==(t=(n[12].size!=null?ce(n[12].size):"(size unknown)")+"")&&e.p(t)},d(n){n&&(e.d(),k(l))}}}function ge(i){let e,t,l="×",n,a;function _(){return i[8](i[14])}function g(...r){return i[9](i[14],...r)}return{c(){e=D("td"),t=D("button"),t.textContent=l,this.h()},l(r){e=C(r,"TD",{class:!0});var f=U(e);t=C(f,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),we(t)!=="svelte-nhtord"&&(t.textContent=l),f.forEach(k),this.h()},h(){B(t,"class","label-clear-button svelte-1g4vug2"),B(t,"aria-label","Remove this file"),B(e,"class","svelte-1g4vug2")},m(r,f){P(r,e,f),F(e,t),n||(a=[Q(t,"click",_),Q(t,"keydown",g)],n=!0)},p(r,f){i=r},d(r){r&&k(e),n=!1,ve(a)}}}function me(i,e){let t,l,n,a=e[12].filename_stem+"",_,g,r,f=e[12].filename_ext+"",o,s,c,m,d,h,v,y,T,H,S;const O=[Ie,Ne],A=[];function j(z,b){return z[12].url?0:1}d=j(e),h=A[d]=O[d](e);let w=e[3].length>1&&ge(e);function J(...z){return e[10](e[14],...z)}return{key:i,first:null,c(){t=D("tr"),l=D("td"),n=D("span"),_=G(a),g=R(),r=D("span"),o=G(f),c=R(),m=D("td"),h.c(),v=R(),w&&w.c(),y=R(),this.h()},l(z){t=C(z,"TR",{class:!0});var b=U(t);l=C(b,"TD",{class:!0,"aria-label":!0});var u=U(l);n=C(u,"SPAN",{class:!0});var te=U(n);_=K(te,a),te.forEach(k),g=q(u),r=C(u,"SPAN",{class:!0});var ne=U(r);o=K(ne,f),ne.forEach(k),u.forEach(k),c=q(b),m=C(b,"TD",{class:!0});var ae=U(m);h.l(ae),ae.forEach(k),v=q(b),w&&w.l(b),y=q(b),b.forEach(k),this.h()},h(){B(n,"class","stem svelte-1g4vug2"),B(r,"class","ext svelte-1g4vug2"),B(l,"class","filename svelte-1g4vug2"),B(l,"aria-label",s=e[12].orig_name),B(m,"class","download svelte-1g4vug2"),B(t,"class","file svelte-1g4vug2"),se(t,"selectable",e[0]),this.first=t},m(z,b){P(z,t,b),F(t,l),F(l,n),F(n,_),F(l,g),F(l,r),F(r,o),F(t,c),F(t,m),A[d].m(m,null),F(t,v),w&&w.m(t,null),F(t,y),T=!0,H||(S=Q(t,"click",J),H=!0)},p(z,b){e=z,(!T||b&8)&&a!==(a=e[12].filename_stem+"")&&Z(_,a),(!T||b&8)&&f!==(f=e[12].filename_ext+"")&&Z(o,f),(!T||b&8&&s!==(s=e[12].orig_name))&&B(l,"aria-label",s);let u=d;d=j(e),d===u?A[d].p(e,b):(W(),E(A[u],1,1,()=>{A[u]=null}),X(),h=A[d],h?h.p(e,b):(h=A[d]=O[d](e),h.c()),p(h,1),h.m(m,null)),e[3].length>1?w?w.p(e,b):(w=ge(e),w.c(),w.m(t,y)):w&&(w.d(1),w=null),(!T||b&1)&&se(t,"selectable",e[0])},i(z){T||(p(h),T=!0)},o(z){E(h),T=!1},d(z){z&&k(t),A[d].d(),w&&w.d(),H=!1,S()}}}function Se(i){let e,t,l,n=[],a=new Map,_,g=_e(i[3]);const r=f=>f[12];for(let f=0;f<g.length;f+=1){let o=he(i,g,f),s=r(o);a.set(s,n[f]=me(s,o))}return{c(){e=D("div"),t=D("table"),l=D("tbody");for(let f=0;f<n.length;f+=1)n[f].c();this.h()},l(f){e=C(f,"DIV",{class:!0,style:!0});var o=U(e);t=C(o,"TABLE",{class:!0});var s=U(t);l=C(s,"TBODY",{class:!0});var c=U(l);for(let m=0;m<n.length;m+=1)n[m].l(c);c.forEach(k),s.forEach(k),o.forEach(k),this.h()},h(){B(l,"class","svelte-1g4vug2"),B(t,"class","file-preview svelte-1g4vug2"),B(e,"class","file-preview-holder svelte-1g4vug2"),ie(e,"max-height",typeof i[1]===void 0?"auto":i[1]+"px")},m(f,o){P(f,e,o),F(e,t),F(t,l);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(l,null);_=!0},p(f,[o]){o&125&&(g=_e(f[3]),W(),n=Ae(n,o,r,1,f,g,a,l,De,me,null,he),X()),(!_||o&2)&&ie(e,"max-height",typeof f[1]===void 0?"auto":f[1]+"px")},i(f){if(!_){for(let o=0;o<g.length;o+=1)p(n[o]);_=!0}},o(f){for(let o=0;o<n.length;o+=1)E(n[o]);_=!1},d(f){f&&k(e);for(let o=0;o<n.length;o+=1)n[o].d()}}}function Oe(i){const e=i.lastIndexOf(".");return e===-1?[i,""]:[i.slice(0,e),i.slice(e)]}function Re(i,e,t){let l;const n=de();let{value:a}=e,{selectable:_=!1}=e,{height:g=void 0}=e,{i18n:r}=e;function f(h,v){const y=h.currentTarget;(h.target===y||y&&y.firstElementChild&&h.composedPath().includes(y.firstElementChild))&&n("select",{value:l[v].orig_name,index:v})}function o(h){const v=l.splice(h,1);t(3,l=[...l]),t(7,a=l),n("delete",v[0]),n("change",l)}const s=typeof window<"u",c=h=>{o(h)},m=(h,v)=>{v.key==="Enter"&&o(h)},d=(h,v)=>{f(v,h)};return i.$$set=h=>{"value"in h&&t(7,a=h.value),"selectable"in h&&t(0,_=h.selectable),"height"in h&&t(1,g=h.height),"i18n"in h&&t(2,r=h.i18n)},i.$$.update=()=>{i.$$.dirty&128&&t(3,l=(Array.isArray(a)?a:[a]).map(h=>{const[v,y]=Oe(h.orig_name??"");return{...h,filename_stem:v,filename_ext:y}}))},[_,g,r,l,f,o,s,a,c,m,d]}class qe extends x{constructor(e){super(),ee(this,e,Re,Se,$,{value:7,selectable:0,height:1,i18n:2})}}const ke=qe;function He(i){let e,t;return e=new Ce({props:{unpadded_box:!0,size:"large",$$slots:{default:[je]},$$scope:{ctx:i}}}),{c(){M(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,n){I(e,l,n),t=!0},p(l,n){const a={};n&128&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function Ye(i){let e,t;return e=new ke({props:{i18n:i[5],selectable:i[3],value:i[0],height:i[4]}}),e.$on("select",i[6]),{c(){M(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,n){I(e,l,n),t=!0},p(l,n){const a={};n&32&&(a.i18n=l[5]),n&8&&(a.selectable=l[3]),n&1&&(a.value=l[0]),n&16&&(a.height=l[4]),e.$set(a)},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function je(i){let e,t;return e=new le({}),{c(){M(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,n){I(e,l,n),t=!0},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function Ge(i){let e,t,l,n,a,_,g;e=new be({props:{show_label:i[2],float:i[0]===null,Icon:le,label:i[1]||"File"}});const r=[Ye,He],f=[];function o(s,c){return c&1&&(l=null),l==null&&(l=!!(s[0]&&(!Array.isArray(s[0])||s[0].length>0))),l?0:1}return n=o(i,-1),a=f[n]=r[n](i),{c(){M(e.$$.fragment),t=R(),a.c(),_=V()},l(s){N(e.$$.fragment,s),t=q(s),a.l(s),_=V()},m(s,c){I(e,s,c),P(s,t,c),f[n].m(s,c),P(s,_,c),g=!0},p(s,[c]){const m={};c&4&&(m.show_label=s[2]),c&1&&(m.float=s[0]===null),c&2&&(m.label=s[1]||"File"),e.$set(m);let d=n;n=o(s,c),n===d?f[n].p(s,c):(W(),E(f[d],1,1,()=>{f[d]=null}),X(),a=f[n],a?a.p(s,c):(a=f[n]=r[n](s),a.c()),p(a,1),a.m(_.parentNode,_))},i(s){g||(p(e.$$.fragment,s),p(a),g=!0)},o(s){E(e.$$.fragment,s),E(a),g=!1},d(s){s&&(k(t),k(_)),L(e,s),f[n].d(s)}}}function Ke(i,e,t){let{value:l=null}=e,{label:n}=e,{show_label:a=!0}=e,{selectable:_=!1}=e,{height:g=void 0}=e,{i18n:r}=e;function f(o){Y.call(this,i,o)}return i.$$set=o=>{"value"in o&&t(0,l=o.value),"label"in o&&t(1,n=o.label),"show_label"in o&&t(2,a=o.show_label),"selectable"in o&&t(3,_=o.selectable),"height"in o&&t(4,g=o.height),"i18n"in o&&t(5,r=o.i18n)},[l,n,a,_,g,r,f]}class Ve extends x{constructor(e){super(),ee(this,e,Ke,Ge,$,{value:0,label:1,show_label:2,selectable:3,height:4,i18n:5})}}const ol=Ve;function We(i){let e,t,l,n;function a(r){i[20](r)}function _(r){i[21](r)}let g={filetype:i[5],file_count:i[4],max_file_size:i[10],root:i[7],stream_handler:i[12],upload:i[11],$$slots:{default:[Je]},$$scope:{ctx:i}};return i[13]!==void 0&&(g.dragging=i[13]),i[1]!==void 0&&(g.uploading=i[1]),e=new Pe({props:g}),oe.push(()=>ue(e,"dragging",a)),oe.push(()=>ue(e,"uploading",_)),e.$on("load",i[14]),e.$on("error",i[22]),{c(){M(e.$$.fragment)},l(r){N(e.$$.fragment,r)},m(r,f){I(e,r,f),n=!0},p(r,f){const o={};f&32&&(o.filetype=r[5]),f&16&&(o.file_count=r[4]),f&1024&&(o.max_file_size=r[10]),f&128&&(o.root=r[7]),f&4096&&(o.stream_handler=r[12]),f&2048&&(o.upload=r[11]),f&8388608&&(o.$$scope={dirty:f,ctx:r}),!t&&f&8192&&(t=!0,o.dragging=r[13],re(()=>t=!1)),!l&&f&2&&(l=!0,o.uploading=r[1],re(()=>l=!1)),e.$set(o)},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Xe(i){let e,t,l,n;return e=new Ue({props:{i18n:i[9]}}),e.$on("clear",i[15]),l=new ke({props:{i18n:i[9],selectable:i[6],value:i[0],height:i[8]}}),l.$on("select",i[17]),l.$on("change",i[18]),l.$on("delete",i[19]),{c(){M(e.$$.fragment),t=R(),M(l.$$.fragment)},l(a){N(e.$$.fragment,a),t=q(a),N(l.$$.fragment,a)},m(a,_){I(e,a,_),P(a,t,_),I(l,a,_),n=!0},p(a,_){const g={};_&512&&(g.i18n=a[9]),e.$set(g);const r={};_&512&&(r.i18n=a[9]),_&64&&(r.selectable=a[6]),_&1&&(r.value=a[0]),_&256&&(r.height=a[8]),l.$set(r)},i(a){n||(p(e.$$.fragment,a),p(l.$$.fragment,a),n=!0)},o(a){E(e.$$.fragment,a),E(l.$$.fragment,a),n=!1},d(a){a&&k(t),L(e,a),L(l,a)}}}function Je(i){let e;const t=i[16].default,l=ze(t,i,i[23],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,a){l&&l.m(n,a),e=!0},p(n,a){l&&l.p&&(!e||a&8388608)&&Fe(l,t,n,n[23],e?Te(t,n[23],a,null):Be(n[23]),null)},i(n){e||(p(l,n),e=!0)},o(n){E(l,n),e=!1},d(n){l&&l.d(n)}}}function Qe(i){let e,t,l,n,a,_,g;e=new be({props:{show_label:i[3],Icon:le,float:!i[0],label:i[2]||"File"}});const r=[Xe,We],f=[];function o(s,c){return c&1&&(l=null),l==null&&(l=!!(s[0]&&(!Array.isArray(s[0])||s[0].length>0))),l?0:1}return n=o(i,-1),a=f[n]=r[n](i),{c(){M(e.$$.fragment),t=R(),a.c(),_=V()},l(s){N(e.$$.fragment,s),t=q(s),a.l(s),_=V()},m(s,c){I(e,s,c),P(s,t,c),f[n].m(s,c),P(s,_,c),g=!0},p(s,[c]){const m={};c&8&&(m.show_label=s[3]),c&1&&(m.float=!s[0]),c&4&&(m.label=s[2]||"File"),e.$set(m);let d=n;n=o(s,c),n===d?f[n].p(s,c):(W(),E(f[d],1,1,()=>{f[d]=null}),X(),a=f[n],a?a.p(s,c):(a=f[n]=r[n](s),a.c()),p(a,1),a.m(_.parentNode,_))},i(s){g||(p(e.$$.fragment,s),p(a),g=!0)},o(s){E(e.$$.fragment,s),E(a),g=!1},d(s){s&&(k(t),k(_)),L(e,s),f[n].d(s)}}}function Ze(i,e,t){let{$$slots:l={},$$scope:n}=e,{value:a}=e,{label:_}=e,{show_label:g=!0}=e,{file_count:r="single"}=e,{file_types:f=null}=e,{selectable:o=!1}=e,{root:s}=e,{height:c=void 0}=e,{i18n:m}=e,{max_file_size:d=null}=e,{upload:h}=e,{stream_handler:v}=e,{uploading:y=!1}=e;async function T({detail:u}){t(0,a=u),await ye(),S("change",a),S("upload",u)}function H(){t(0,a=null),S("change",null),S("clear")}const S=de();let O=!1;function A(u){Y.call(this,i,u)}function j(u){Y.call(this,i,u)}function w(u){Y.call(this,i,u)}function J(u){O=u,t(13,O)}function z(u){y=u,t(1,y)}function b(u){Y.call(this,i,u)}return i.$$set=u=>{"value"in u&&t(0,a=u.value),"label"in u&&t(2,_=u.label),"show_label"in u&&t(3,g=u.show_label),"file_count"in u&&t(4,r=u.file_count),"file_types"in u&&t(5,f=u.file_types),"selectable"in u&&t(6,o=u.selectable),"root"in u&&t(7,s=u.root),"height"in u&&t(8,c=u.height),"i18n"in u&&t(9,m=u.i18n),"max_file_size"in u&&t(10,d=u.max_file_size),"upload"in u&&t(11,h=u.upload),"stream_handler"in u&&t(12,v=u.stream_handler),"uploading"in u&&t(1,y=u.uploading),"$$scope"in u&&t(23,n=u.$$scope)},i.$$.update=()=>{i.$$.dirty&8192&&S("drag",O)},[a,y,_,g,r,f,o,s,c,m,d,h,v,O,T,H,l,A,j,w,J,z,b,n]}class $e extends x{constructor(e){super(),ee(this,e,Ze,Qe,$,{value:0,label:2,show_label:3,file_count:4,file_types:5,selectable:6,root:7,height:8,i18n:9,max_file_size:10,upload:11,stream_handler:12,uploading:1})}}const rl=$e;export{rl as B,ol as F,ke as a};
