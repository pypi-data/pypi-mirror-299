import{s as B,e as V,a as G,c as z,b as P,f as w,g as H,p as W,i as q,h as x,n as j,J as K,O as Q,t as U,d as X,j as Y,r as I}from"./scheduler.xQsDa6L3.js";import{S as Z,i as $}from"./index.lnKugwF0.js";import{t as C}from"./2.CR2_qRuh.js";import{g as ee}from"./color.DlRy4cWI.js";import te from"./vega-embed.module.BQ66Gkkf.js";function oe(l,t,o,r){let e=t.getPropertyValue("--color-accent"),a=t.getPropertyValue("--body-text-color"),n=t.getPropertyValue("--border-color-primary"),f=t.fontFamily,k=t.getPropertyValue("--block-title-text-weight");const m=s=>s.endsWith("px")?parseFloat(s.slice(0,-2)):12;let b=m(t.getPropertyValue("--text-md")),h=m(t.getPropertyValue("--text-sm")),d={autosize:{type:"fit",contains:"padding"},axis:{labelFont:f,labelColor:a,titleFont:f,titleColor:a,tickColor:n,labelFontSize:h,gridColor:n,titleFontWeight:"normal",titleFontSize:h,labelFontWeight:"normal",domain:!1,labelAngle:0},legend:{labelColor:a,labelFont:f,titleColor:a,titleFont:f,titleFontWeight:"normal",titleFontSize:h,labelFontWeight:"normal",offset:2},title:{color:a,font:f,fontSize:b,fontWeight:k,anchor:"middle"},view:{stroke:n}};l.config=d;let c=l.encoding,_=l.layer;switch(o){case"scatter":l.config.mark={stroke:e},c.color&&c.color.type=="nominal"?c.color.scale.range=c.color.scale.range.map((s,u)=>S(r,u)):c.color&&c.color.type=="quantitative"&&(c.color.scale.range=["#eff6ff","#1e3a8a"],c.color.scale.range.interpolate="hsl");break;case"line":l.config.mark={stroke:e,cursor:"crosshair"},_.forEach(s=>{s.encoding.color&&(s.encoding.color.scale.range=s.encoding.color.scale.range.map((u,p)=>S(r,p)))});break;case"bar":l.config.mark={opacity:.8,fill:e},c.color&&(c.color.scale.range=c.color.scale.range.map((s,u)=>S(r,u)));break}return l}function S(l,t){var r;let o=l[t%l.length];return o&&o in C?(r=C[o])==null?void 0:r.primary:o||C[ee(t)].primary}function M(l){let t,o;return{c(){t=V("div"),o=U(l[0]),this.h()},l(r){t=z(r,"DIV",{class:!0});var e=P(t);o=X(e,l[0]),e.forEach(w),this.h()},h(){W(t,"class","caption layout svelte-1ghah4v")},m(r,e){q(r,t,e),x(t,o)},p(r,e){e&1&&Y(o,r[0])},d(r){r&&w(t)}}}function le(l){let t,o,r,e=l[0]&&M(l);return{c(){t=V("div"),o=V("div"),r=G(),e&&e.c(),this.h()},l(a){t=z(a,"DIV",{"data-testid":!0,class:!0});var n=P(t);o=z(n,"DIV",{}),P(o).forEach(w),r=H(n),e&&e.l(n),n.forEach(w),this.h()},h(){W(t,"data-testid","altair"),W(t,"class","altair layout svelte-1ghah4v")},m(a,n){q(a,t,n),x(t,o),l[11](o),x(t,r),e&&e.m(t,null),l[12](t)},p(a,[n]){a[0]?e?e.p(a,n):(e=M(a),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},i:j,o:j,d(a){a&&w(t),l[11](null),e&&e.d(),l[12](null)}}}function ie(l,t,o){let r,e,a,{value:n}=t,{colors:f=[]}=t,{caption:k}=t,{show_actions_button:m}=t,{gradio:b}=t,h,d,c,{_selectable:_}=t,s=window.getComputedStyle(document.body),u,p;const E=()=>Math.min(d.offsetWidth,p||d.offsetWidth);let O=()=>{};const A=()=>{a&&o(9,e.width=E(),e),te(h,e,{actions:m}).then(function(i){if(c=i.view,O=()=>{c.signal("width",E()).run()},!_)return;const y=(v,F)=>{const g=c.signal("brush");if(g)if(Object.keys(g).length===0)b.dispatch("select",{value:null,index:null,selected:!1});else{const T=Object.keys(g)[0];let N=g[T].map(R=>R/1e3);b.dispatch("select",{value:g,index:N,selected:!0})}};c.addEventListener("mouseup",y),c.addEventListener("touchup",y)})};let D=new ResizeObserver(()=>{a&&e.width!==d.offsetWidth&&O()});K(()=>{A(),D.observe(d)}),Q(()=>{D.disconnect()});function J(i){I[i?"unshift":"push"](()=>{h=i,o(1,h)})}function L(i){I[i?"unshift":"push"](()=>{d=i,o(2,d)})}return l.$$set=i=>{"value"in i&&o(3,n=i.value),"colors"in i&&o(4,f=i.colors),"caption"in i&&o(0,k=i.caption),"show_actions_button"in i&&o(5,m=i.show_actions_button),"gradio"in i&&o(6,b=i.gradio),"_selectable"in i&&o(7,_=i._selectable)},l.$$.update=()=>{var i,y,v,F;l.$$.dirty&8&&o(10,r=n==null?void 0:n.plot),l.$$.dirty&1024&&o(9,e=JSON.parse(r)),l.$$.dirty&640&&e&&e.params&&!_&&o(9,e.params=e.params.filter(g=>g.name!=="brush"),e),l.$$.dirty&536&&n.chart&&o(9,e=oe(e,s,n.chart,f)),l.$$.dirty&768&&u!==e&&(o(8,u=e),p=e.width),l.$$.dirty&520&&(a=!((y=(i=e.encoding)==null?void 0:i.column)!=null&&y.field||(F=(v=e.encoding)==null?void 0:v.row)!=null&&F.field||n.chart===void 0))},[k,h,d,n,f,m,b,_,u,e,r,J,L]}class fe extends Z{constructor(t){super(),$(this,t,ie,le,B,{value:3,colors:4,caption:0,show_actions_button:5,gradio:6,_selectable:7})}}export{fe as default};
