import{s as rl,H as fl,a as U,z as Z,g as O,i as L,F as le,f as I,y as ol,J as al,$ as sl,W as ul,r as se,M as de,e as S,c as P,b as q,p as $,E as H,q as A,h as N,Q as Oe,a0 as cl,R as ml,t as Re,d as Ae,j as Me,n as Ce}from"./scheduler.xQsDa6L3.js";import{S as _l,i as hl,t as g,g as M,b as k,e as C,c as j,a as B,m as D,d as V}from"./index.lnKugwF0.js";import{u as gl,f as re,I as fe,C as bl}from"./2.CR2_qRuh.js";import{B as dl}from"./BlockLabel.DJrWEbFx.js";import{E as pl}from"./Empty.CUSwTljv.js";import{S as wl}from"./ShareButton.CyKLomIB.js";import{D as kl}from"./Download.D3uG4UtN.js";import{a as ue,M as pe}from"./Minimize.CLXvCbVC.js";import{I as Se}from"./Image.BbdFb7mG.js";import{P as Pe}from"./Play.CU1vvr5w.js";import{I as qe}from"./IconButtonWrapper.D0k2M0cg.js";/* empty css                                             */import{M as vl}from"./ModifyUpload.Cna_ljQ9.js";import{I as ce}from"./Image.DtccIbif.js";/* empty css                                                   *//* empty css                                                   */import{V as me}from"./Video.BpynpsrS.js";var we=Object.prototype.hasOwnProperty;function ke(n,l,t){for(t of n.keys())if(ee(t,l))return t}function ee(n,l){var t,e,i;if(n===l)return!0;if(n&&l&&(t=n.constructor)===l.constructor){if(t===Date)return n.getTime()===l.getTime();if(t===RegExp)return n.toString()===l.toString();if(t===Array){if((e=n.length)===l.length)for(;e--&&ee(n[e],l[e]););return e===-1}if(t===Set){if(n.size!==l.size)return!1;for(e of n)if(i=e,i&&typeof i=="object"&&(i=ke(l,i),!i)||!l.has(i))return!1;return!0}if(t===Map){if(n.size!==l.size)return!1;for(e of n)if(i=e[0],i&&typeof i=="object"&&(i=ke(l,i),!i)||!ee(e[1],l.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),l=new Uint8Array(l);else if(t===DataView){if((e=n.byteLength)===l.byteLength)for(;e--&&n.getInt8(e)===l.getInt8(e););return e===-1}if(ArrayBuffer.isView(n)){if((e=n.byteLength)===l.byteLength)for(;e--&&n[e]===l[e];);return e===-1}if(!t||typeof n=="object"){e=0;for(t in n)if(we.call(n,t)&&++e&&!we.call(l,t)||!(t in l)||!ee(n[t],l[t]))return!1;return Object.keys(l).length===e}}return n!==n&&l!==l}async function yl(n){return n?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(n.map(async([t,e])=>t===null||!t.url?"":await gl(t.url)))).map(t=>`<img src="${t}" style="height: 400px" />`).join("")}</div>`:""}const{window:Fe}=sl;function ve(n,l,t){const e=n.slice();return e[47]=l[t],e[49]=t,e}function ye(n,l,t){const e=n.slice();return e[50]=l[t],e[51]=l,e[49]=t,e}function Ee(n){let l,t;return l=new dl({props:{show_label:n[2],Icon:Se,label:n[3]||"Gallery"}}),{c(){j(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&4&&(r.show_label=e[2]),i[0]&8&&(r.label=e[3]||"Gallery"),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){V(l,e)}}}function El(n){let l,t,e,i,r,a,b,f,_=n[21]&&n[7]&&Ie(n),o=n[12]&&$e(n);a=new qe({props:{$$slots:{default:[Vl]},$$scope:{ctx:n}}});let d=re(n[15]),u=[];for(let c=0;c<d.length;c+=1)u[c]=Ue(ve(n,d,c));const v=c=>k(u[c],1,1,()=>{u[c]=null});return{c(){l=S("div"),_&&_.c(),t=U(),e=S("div"),i=S("div"),o&&o.c(),r=U(),j(a.$$.fragment),b=U();for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){l=P(c,"DIV",{class:!0});var p=q(l);_&&_.l(p),t=O(p),e=P(p,"DIV",{class:!0});var h=q(e);i=P(h,"DIV",{class:!0,style:!0});var w=q(i);o&&o.l(w),r=O(w),B(a.$$.fragment,w),b=O(w);for(let m=0;m<u.length;m+=1)u[m].l(w);w.forEach(I),h.forEach(I),p.forEach(I),this.h()},h(){$(i,"class","grid-container svelte-btxdw"),H(i,"--grid-cols",n[4]),H(i,"--grid-rows",n[5]),H(i,"--object-fit",n[8]),H(i,"height",n[6]),A(i,"pt-6",n[2]),$(e,"class","grid-wrap svelte-btxdw"),A(e,"minimal",n[13]==="minimal"),A(e,"fixed-height",n[13]!=="minimal"&&(!n[6]||n[6]=="auto")),A(e,"hidden",n[16]),$(l,"class","gallery-container")},m(c,p){L(c,l,p),_&&_.m(l,null),N(l,t),N(l,e),N(e,i),o&&o.m(i,null),N(i,r),D(a,i,null),N(i,b);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(i,null);n[42](l),f=!0},p(c,p){c[21]&&c[7]?_?(_.p(c,p),p[0]&2097280&&g(_,1)):(_=Ie(c),_.c(),g(_,1),_.m(l,t)):_&&(M(),k(_,1,1,()=>{_=null}),C()),c[12]?o?(o.p(c,p),p[0]&4096&&g(o,1)):(o=$e(c),o.c(),g(o,1),o.m(i,r)):o&&(M(),k(o,1,1,()=>{o=null}),C());const h={};if(p[0]&35328|p[1]&2097152&&(h.$$scope={dirty:p,ctx:c}),a.$set(h),p[0]&32770){d=re(c[15]);let w;for(w=0;w<d.length;w+=1){const m=ve(c,d,w);u[w]?(u[w].p(m,p),g(u[w],1)):(u[w]=Ue(m),u[w].c(),g(u[w],1),u[w].m(i,null))}for(M(),w=d.length;w<u.length;w+=1)v(w);C()}(!f||p[0]&16)&&H(i,"--grid-cols",c[4]),(!f||p[0]&32)&&H(i,"--grid-rows",c[5]),(!f||p[0]&256)&&H(i,"--object-fit",c[8]),(!f||p[0]&64)&&H(i,"height",c[6]),(!f||p[0]&4)&&A(i,"pt-6",c[2]),(!f||p[0]&8192)&&A(e,"minimal",c[13]==="minimal"),(!f||p[0]&8256)&&A(e,"fixed-height",c[13]!=="minimal"&&(!c[6]||c[6]=="auto")),(!f||p[0]&65536)&&A(e,"hidden",c[16])},i(c){if(!f){g(_),g(o),g(a.$$.fragment,c);for(let p=0;p<d.length;p+=1)g(u[p]);f=!0}},o(c){k(_),k(o),k(a.$$.fragment,c),u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)k(u[p]);f=!1},d(c){c&&I(l),_&&_.d(),o&&o.d(),V(a),Oe(u,c),n[42](null)}}}function Il(n){let l,t;return l=new pl({props:{unpadded_box:!0,size:"large",$$slots:{default:[Nl]},$$scope:{ctx:n}}}),{c(){j(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[1]&2097152&&(r.$$scope={dirty:i,ctx:e}),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){V(l,e)}}}function Ie(n){var Q;let l,t,e,i,r,a,b,f,_,o,d,u;t=new qe({props:{$$slots:{default:[Tl]},$$scope:{ctx:n}}});const v=[jl,zl],c=[];function p(E,y){return"image"in E[21]?0:1}r=p(n),a=c[r]=v[r](n);let h=((Q=n[21])==null?void 0:Q.caption)&&De(n),w=re(n[15]),m=[];for(let E=0;E<w.length;E+=1)m[E]=Ve(ye(n,w,E));const te=E=>k(m[E],1,1,()=>{m[E]=null});return{c(){l=S("button"),j(t.$$.fragment),e=U(),i=S("button"),a.c(),b=U(),h&&h.c(),f=U(),_=S("div");for(let E=0;E<m.length;E+=1)m[E].c();this.h()},l(E){l=P(E,"BUTTON",{class:!0});var y=q(l);B(t.$$.fragment,y),e=O(y),i=P(y,"BUTTON",{class:!0,style:!0,"aria-label":!0});var R=q(i);a.l(R),R.forEach(I),b=O(y),h&&h.l(y),f=O(y),_=P(y,"DIV",{class:!0,"data-testid":!0});var F=q(_);for(let W=0;W<m.length;W+=1)m[W].l(F);F.forEach(I),y.forEach(I),this.h()},h(){$(i,"class","media-button svelte-btxdw"),H(i,"height","calc(100% - "+(n[21].caption?"80px":"60px")+")"),$(i,"aria-label","detailed view of selected image"),$(_,"class","thumbnails scroll-hide svelte-btxdw"),$(_,"data-testid","container_el"),$(l,"class","preview svelte-btxdw"),A(l,"minimal",n[13]==="minimal")},m(E,y){L(E,l,y),D(t,l,null),N(l,e),N(l,i),c[r].m(i,null),N(l,b),h&&h.m(l,null),N(l,f),N(l,_);for(let R=0;R<m.length;R+=1)m[R]&&m[R].m(_,null);n[37](_),o=!0,d||(u=[le(i,"click",function(){cl("image"in n[21]?n[34]:null)&&("image"in n[21]?n[34]:null).apply(this,arguments)}),le(l,"keydown",n[23])],d=!0)},p(E,y){var W;n=E;const R={};y[0]&2182146|y[1]&2097152&&(R.$$scope={dirty:y,ctx:n}),t.$set(R);let F=r;if(r=p(n),r===F?c[r].p(n,y):(M(),k(c[F],1,1,()=>{c[F]=null}),C(),a=c[r],a?a.p(n,y):(a=c[r]=v[r](n),a.c()),g(a,1),a.m(i,null)),(!o||y[0]&2097152)&&H(i,"height","calc(100% - "+(n[21].caption?"80px":"60px")+")"),(W=n[21])!=null&&W.caption?h?h.p(n,y):(h=De(n),h.c(),h.m(l,f)):h&&(h.d(1),h=null),y[0]&303106){w=re(n[15]);let T;for(T=0;T<w.length;T+=1){const z=ye(n,w,T);m[T]?(m[T].p(z,y),g(m[T],1)):(m[T]=Ve(z),m[T].c(),g(m[T],1),m[T].m(_,null))}for(M(),T=w.length;T<m.length;T+=1)te(T);C()}(!o||y[0]&8192)&&A(l,"minimal",n[13]==="minimal")},i(E){if(!o){g(t.$$.fragment,E),g(a);for(let y=0;y<w.length;y+=1)g(m[y]);o=!0}},o(E){k(t.$$.fragment,E),k(a),m=m.filter(Boolean);for(let y=0;y<m.length;y+=1)k(m[y]);o=!1},d(E){E&&I(l),V(t),c[r].d(),h&&h.d(),Oe(m,E),n[37](null),d=!1,ml(u)}}}function Te(n){let l,t;return l=new fe({props:{Icon:kl,label:n[11]("common.download")}}),l.$on("click",n[32]),{c(){j(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&2048&&(r.label=e[11]("common.download")),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){V(l,e)}}}function ze(n){let l,t;return l=new fe({props:{Icon:n[16]?ue:pe,label:n[16]?"Exit full screen":"View in full screen"}}),l.$on("click",n[25]),{c(){j(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&65536&&(r.Icon=e[16]?ue:pe),i[0]&65536&&(r.label=e[16]?"Exit full screen":"View in full screen"),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){V(l,e)}}}function je(n){let l,t;return l=new fe({props:{Icon:ue,label:"Exit full screen"}}),l.$on("click",n[25]),{c(){j(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p:Ce,i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){V(l,e)}}}function Be(n){let l,t;return l=new fe({props:{Icon:bl,label:"Close"}}),l.$on("click",n[33]),{c(){j(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p:Ce,i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){V(l,e)}}}function Tl(n){let l,t,e,i,r,a=n[10]&&Te(n),b=n[14]&&!n[16]&&ze(n),f=n[14]&&n[16]&&je(n),_=!n[16]&&Be(n);return{c(){a&&a.c(),l=U(),b&&b.c(),t=U(),f&&f.c(),e=U(),_&&_.c(),i=Z()},l(o){a&&a.l(o),l=O(o),b&&b.l(o),t=O(o),f&&f.l(o),e=O(o),_&&_.l(o),i=Z()},m(o,d){a&&a.m(o,d),L(o,l,d),b&&b.m(o,d),L(o,t,d),f&&f.m(o,d),L(o,e,d),_&&_.m(o,d),L(o,i,d),r=!0},p(o,d){o[10]?a?(a.p(o,d),d[0]&1024&&g(a,1)):(a=Te(o),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(M(),k(a,1,1,()=>{a=null}),C()),o[14]&&!o[16]?b?(b.p(o,d),d[0]&81920&&g(b,1)):(b=ze(o),b.c(),g(b,1),b.m(t.parentNode,t)):b&&(M(),k(b,1,1,()=>{b=null}),C()),o[14]&&o[16]?f?(f.p(o,d),d[0]&81920&&g(f,1)):(f=je(o),f.c(),g(f,1),f.m(e.parentNode,e)):f&&(M(),k(f,1,1,()=>{f=null}),C()),o[16]?_&&(M(),k(_,1,1,()=>{_=null}),C()):_?(_.p(o,d),d[0]&65536&&g(_,1)):(_=Be(o),_.c(),g(_,1),_.m(i.parentNode,i))},i(o){r||(g(a),g(b),g(f),g(_),r=!0)},o(o){k(a),k(b),k(f),k(_),r=!1},d(o){o&&(I(l),I(t),I(e),I(i)),a&&a.d(o),b&&b.d(o),f&&f.d(o),_&&_.d(o)}}}function zl(n){let l,t;return l=new me({props:{src:n[21].video.url,"data-testid":"detailed-video",alt:n[21].caption||"",loading:"lazy",loop:!1,is_stream:!1,muted:!1,controls:!0}}),{c(){j(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&2097152&&(r.src=e[21].video.url),i[0]&2097152&&(r.alt=e[21].caption||""),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){V(l,e)}}}function jl(n){let l,t;return l=new ce({props:{"data-testid":"detailed-image",src:n[21].image.url,alt:n[21].caption||"",title:n[21].caption||null,class:n[21].caption&&"with-caption",loading:"lazy"}}),{c(){j(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&2097152&&(r.src=e[21].image.url),i[0]&2097152&&(r.alt=e[21].caption||""),i[0]&2097152&&(r.title=e[21].caption||null),i[0]&2097152&&(r.class=e[21].caption&&"with-caption"),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){V(l,e)}}}function De(n){let l,t=n[21].caption+"",e;return{c(){l=S("caption"),e=Re(t),this.h()},l(i){l=P(i,"CAPTION",{class:!0});var r=q(l);e=Ae(r,t),r.forEach(I),this.h()},h(){$(l,"class","caption svelte-btxdw")},m(i,r){L(i,l,r),N(l,e)},p(i,r){r[0]&2097152&&t!==(t=i[21].caption+"")&&Me(e,t)},d(i){i&&I(l)}}}function Bl(n){let l,t,e,i;return l=new Pe({}),e=new me({props:{src:n[50].video.url,title:n[50].caption||null,is_stream:!1,"data-testid":"thumbnail "+(n[49]+1),alt:"",loading:"lazy",loop:!1}}),{c(){j(l.$$.fragment),t=U(),j(e.$$.fragment)},l(r){B(l.$$.fragment,r),t=O(r),B(e.$$.fragment,r)},m(r,a){D(l,r,a),L(r,t,a),D(e,r,a),i=!0},p(r,a){const b={};a[0]&32768&&(b.src=r[50].video.url),a[0]&32768&&(b.title=r[50].caption||null),e.$set(b)},i(r){i||(g(l.$$.fragment,r),g(e.$$.fragment,r),i=!0)},o(r){k(l.$$.fragment,r),k(e.$$.fragment,r),i=!1},d(r){r&&I(t),V(l,r),V(e,r)}}}function Dl(n){let l,t;return l=new ce({props:{src:n[50].image.url,title:n[50].caption||null,"data-testid":"thumbnail "+(n[49]+1),alt:"",loading:"lazy"}}),{c(){j(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&32768&&(r.src=e[50].image.url),i[0]&32768&&(r.title=e[50].caption||null),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){V(l,e)}}}function Ve(n){let l,t,e,i,r,a=n[49],b,f,_;const o=[Dl,Bl],d=[];function u(h,w){return"image"in h[50]?0:1}t=u(n),e=d[t]=o[t](n);const v=()=>n[35](l,a),c=()=>n[35](null,a);function p(){return n[36](n[49])}return{c(){l=S("button"),e.c(),i=U(),this.h()},l(h){l=P(h,"BUTTON",{class:!0,"aria-label":!0});var w=q(l);e.l(w),i=O(w),w.forEach(I),this.h()},h(){$(l,"class","thumbnail-item thumbnail-small svelte-btxdw"),$(l,"aria-label",r="Thumbnail "+(n[49]+1)+" of "+n[15].length),A(l,"selected",n[1]===n[49]&&n[13]!=="minimal")},m(h,w){L(h,l,w),d[t].m(l,null),N(l,i),v(),b=!0,f||(_=le(l,"click",p),f=!0)},p(h,w){n=h;let m=t;t=u(n),t===m?d[t].p(n,w):(M(),k(d[m],1,1,()=>{d[m]=null}),C(),e=d[t],e?e.p(n,w):(e=d[t]=o[t](n),e.c()),g(e,1),e.m(l,i)),(!b||w[0]&32768&&r!==(r="Thumbnail "+(n[49]+1)+" of "+n[15].length))&&$(l,"aria-label",r),a!==n[49]&&(c(),a=n[49],v()),(!b||w[0]&8194)&&A(l,"selected",n[1]===n[49]&&n[13]!=="minimal")},i(h){b||(g(e),b=!0)},o(h){k(e),b=!1},d(h){h&&I(l),d[t].d(),c(),f=!1,_()}}}function $e(n){let l,t,e;return t=new vl({props:{i18n:n[11]}}),t.$on("clear",n[38]),{c(){l=S("div"),j(t.$$.fragment),this.h()},l(i){l=P(i,"DIV",{class:!0});var r=q(l);B(t.$$.fragment,r),r.forEach(I),this.h()},h(){$(l,"class","icon-button svelte-btxdw")},m(i,r){L(i,l,r),D(t,l,null),e=!0},p(i,r){const a={};r[0]&2048&&(a.i18n=i[11]),t.$set(a)},i(i){e||(g(t.$$.fragment,i),e=!0)},o(i){k(t.$$.fragment,i),e=!1},d(i){i&&I(l),V(t)}}}function Le(n){let l,t,e;return t=new wl({props:{i18n:n[11],value:n[15],formatter:yl}}),t.$on("share",n[39]),t.$on("error",n[40]),{c(){l=S("div"),j(t.$$.fragment),this.h()},l(i){l=P(i,"DIV",{class:!0});var r=q(l);B(t.$$.fragment,r),r.forEach(I),this.h()},h(){$(l,"class","icon-button svelte-btxdw")},m(i,r){L(i,l,r),D(t,l,null),e=!0},p(i,r){const a={};r[0]&2048&&(a.i18n=i[11]),r[0]&32768&&(a.value=i[15]),t.$set(a)},i(i){e||(g(t.$$.fragment,i),e=!0)},o(i){k(t.$$.fragment,i),e=!1},d(i){i&&I(l),V(t)}}}function Vl(n){let l,t,e=n[9]&&Le(n);return{c(){e&&e.c(),l=Z()},l(i){e&&e.l(i),l=Z()},m(i,r){e&&e.m(i,r),L(i,l,r),t=!0},p(i,r){i[9]?e?(e.p(i,r),r[0]&512&&g(e,1)):(e=Le(i),e.c(),g(e,1),e.m(l.parentNode,l)):e&&(M(),k(e,1,1,()=>{e=null}),C())},i(i){t||(g(e),t=!0)},o(i){k(e),t=!1},d(i){i&&I(l),e&&e.d(i)}}}function $l(n){let l,t,e,i;return l=new Pe({}),e=new me({props:{src:n[47].video.url,title:n[47].caption||null,is_stream:!1,"data-testid":"thumbnail "+(n[49]+1),alt:"",loading:"lazy",loop:!1}}),{c(){j(l.$$.fragment),t=U(),j(e.$$.fragment)},l(r){B(l.$$.fragment,r),t=O(r),B(e.$$.fragment,r)},m(r,a){D(l,r,a),L(r,t,a),D(e,r,a),i=!0},p(r,a){const b={};a[0]&32768&&(b.src=r[47].video.url),a[0]&32768&&(b.title=r[47].caption||null),e.$set(b)},i(r){i||(g(l.$$.fragment,r),g(e.$$.fragment,r),i=!0)},o(r){k(l.$$.fragment,r),k(e.$$.fragment,r),i=!1},d(r){r&&I(t),V(l,r),V(e,r)}}}function Ll(n){let l,t;return l=new ce({props:{alt:n[47].caption||"",src:typeof n[47].image=="string"?n[47].image:n[47].image.url,loading:"lazy"}}),{c(){j(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},p(e,i){const r={};i[0]&32768&&(r.alt=e[47].caption||""),i[0]&32768&&(r.src=typeof e[47].image=="string"?e[47].image:e[47].image.url),l.$set(r)},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){V(l,e)}}}function Ne(n){let l,t=n[47].caption+"",e;return{c(){l=S("div"),e=Re(t),this.h()},l(i){l=P(i,"DIV",{class:!0});var r=q(l);e=Ae(r,t),r.forEach(I),this.h()},h(){$(l,"class","caption-label svelte-btxdw")},m(i,r){L(i,l,r),N(l,e)},p(i,r){r[0]&32768&&t!==(t=i[47].caption+"")&&Me(e,t)},d(i){i&&I(l)}}}function Ue(n){let l,t,e,i,r,a,b,f,_;const o=[Ll,$l],d=[];function u(p,h){return"image"in p[47]?0:1}t=u(n),e=d[t]=o[t](n);let v=n[47].caption&&Ne(n);function c(){return n[41](n[49])}return{c(){l=S("button"),e.c(),i=U(),v&&v.c(),r=U(),this.h()},l(p){l=P(p,"BUTTON",{class:!0,"aria-label":!0});var h=q(l);e.l(h),i=O(h),v&&v.l(h),r=O(h),h.forEach(I),this.h()},h(){$(l,"class","thumbnail-item thumbnail-lg svelte-btxdw"),$(l,"aria-label",a="Thumbnail "+(n[49]+1)+" of "+n[15].length),A(l,"selected",n[1]===n[49])},m(p,h){L(p,l,h),d[t].m(l,null),N(l,i),v&&v.m(l,null),N(l,r),b=!0,f||(_=le(l,"click",c),f=!0)},p(p,h){n=p;let w=t;t=u(n),t===w?d[t].p(n,h):(M(),k(d[w],1,1,()=>{d[w]=null}),C(),e=d[t],e?e.p(n,h):(e=d[t]=o[t](n),e.c()),g(e,1),e.m(l,i)),n[47].caption?v?v.p(n,h):(v=Ne(n),v.c(),v.m(l,r)):v&&(v.d(1),v=null),(!b||h[0]&32768&&a!==(a="Thumbnail "+(n[49]+1)+" of "+n[15].length))&&$(l,"aria-label",a),(!b||h[0]&2)&&A(l,"selected",n[1]===n[49])},i(p){b||(g(e),b=!0)},o(p){k(e),b=!1},d(p){p&&I(l),d[t].d(),v&&v.d(),f=!1,_()}}}function Nl(n){let l,t;return l=new Se({}),{c(){j(l.$$.fragment)},l(e){B(l.$$.fragment,e)},m(e,i){D(l,e,i),t=!0},i(e){t||(g(l.$$.fragment,e),t=!0)},o(e){k(l.$$.fragment,e),t=!1},d(e){V(l,e)}}}function Ul(n){let l,t,e,i,r,a,b;fl(n[31]);let f=n[2]&&Ee(n);const _=[Il,El],o=[];function d(u,v){return u[0]==null||u[15]==null||u[15].length===0?0:1}return t=d(n),e=o[t]=_[t](n),{c(){f&&f.c(),l=U(),e.c(),i=Z()},l(u){f&&f.l(u),l=O(u),e.l(u),i=Z()},m(u,v){f&&f.m(u,v),L(u,l,v),o[t].m(u,v),L(u,i,v),r=!0,a||(b=le(Fe,"resize",n[31]),a=!0)},p(u,v){u[2]?f?(f.p(u,v),v[0]&4&&g(f,1)):(f=Ee(u),f.c(),g(f,1),f.m(l.parentNode,l)):f&&(M(),k(f,1,1,()=>{f=null}),C());let c=t;t=d(u),t===c?o[t].p(u,v):(M(),k(o[c],1,1,()=>{o[c]=null}),C(),e=o[t],e?e.p(u,v):(e=o[t]=_[t](u),e.c()),g(e,1),e.m(i.parentNode,i))},i(u){r||(g(f),g(e),r=!0)},o(u){k(f),k(e),r=!1},d(u){u&&(I(l),I(i)),f&&f.d(u),o[t].d(u),a=!1,b()}}}function Ol(n,l,t){let e,i,r,{show_label:a=!0}=l,{label:b}=l,{value:f=null}=l,{columns:_=[2]}=l,{rows:o=void 0}=l,{height:d="auto"}=l,{preview:u}=l,{allow_preview:v=!0}=l,{object_fit:c="cover"}=l,{show_share_button:p=!1}=l,{show_download_button:h=!1}=l,{i18n:w}=l,{selected_index:m=null}=l,{interactive:te}=l,{_fetch:Q}=l,{mode:E="normal"}=l,{show_fullscreen_button:y=!0}=l,R=!1,F;const W=ol();let T=!0,z=null,oe=f;m==null&&u&&(f!=null&&f.length)&&(m=0);let ae=m;function _e(s){const G=s.target,J=s.offsetX,Y=G.offsetWidth/2;J<Y?t(1,m=e):t(1,m=i)}function Ge(s){switch(s.code){case"Escape":s.preventDefault(),t(1,m=null);break;case"ArrowLeft":s.preventDefault(),t(1,m=e);break;case"ArrowRight":s.preventDefault(),t(1,m=i);break}}let K=[],X;async function He(s){var be;if(typeof s!="number"||(await ul(),K[s]===void 0))return;(be=K[s])==null||be.focus();const{left:G,width:J}=X.getBoundingClientRect(),{left:ne,width:Y}=K[s].getBoundingClientRect(),x=ne-G+Y/2-J/2+X.scrollLeft;X&&typeof X.scrollTo=="function"&&X.scrollTo({left:x<0?0:x,behavior:"smooth"})}let he=0;async function ge(s,G){let J;try{J=await Q(s)}catch(x){if(x instanceof TypeError){window.open(s,"_blank","noreferrer");return}throw x}const ne=await J.blob(),Y=URL.createObjectURL(ne),ie=document.createElement("a");ie.href=Y,ie.download=G,ie.click(),URL.revokeObjectURL(Y)}al(()=>{document.addEventListener("fullscreenchange",()=>{t(16,R=!!document.fullscreenElement)})});const We=async()=>{R?await document.exitFullscreen():await F.requestFullscreen()};function Xe(){t(20,he=Fe.innerHeight)}const Je=()=>{const s="image"in r?r==null?void 0:r.image:r==null?void 0:r.video;if(s==null)return;const{url:G,orig_name:J}=s;G&&ge(G,J??"image")},Qe=()=>t(1,m=null),Ke=s=>_e(s);function Ye(s,G){se[s?"unshift":"push"](()=>{K[G]=s,t(18,K)})}const Ze=s=>t(1,m=s);function xe(s){se[s?"unshift":"push"](()=>{X=s,t(19,X)})}const el=()=>t(0,f=[]);function ll(s){de.call(this,n,s)}function tl(s){de.call(this,n,s)}const nl=s=>t(1,m=s);function il(s){se[s?"unshift":"push"](()=>{F=s,t(17,F)})}return n.$$set=s=>{"show_label"in s&&t(2,a=s.show_label),"label"in s&&t(3,b=s.label),"value"in s&&t(0,f=s.value),"columns"in s&&t(4,_=s.columns),"rows"in s&&t(5,o=s.rows),"height"in s&&t(6,d=s.height),"preview"in s&&t(26,u=s.preview),"allow_preview"in s&&t(7,v=s.allow_preview),"object_fit"in s&&t(8,c=s.object_fit),"show_share_button"in s&&t(9,p=s.show_share_button),"show_download_button"in s&&t(10,h=s.show_download_button),"i18n"in s&&t(11,w=s.i18n),"selected_index"in s&&t(1,m=s.selected_index),"interactive"in s&&t(12,te=s.interactive),"_fetch"in s&&t(27,Q=s._fetch),"mode"in s&&t(13,E=s.mode),"show_fullscreen_button"in s&&t(14,y=s.show_fullscreen_button)},n.$$.update=()=>{n.$$.dirty[0]&268435457&&t(28,T=f==null||f.length===0?!0:T),n.$$.dirty[0]&1&&t(15,z=f==null?null:f.map(s=>"video"in s?{video:s.video,caption:s.caption}:"image"in s?{image:s.image,caption:s.caption}:{})),n.$$.dirty[0]&872415235&&(ee(oe,f)||(T?(t(1,m=u&&(f!=null&&f.length)?0:null),t(28,T=!1)):t(1,m=m!=null&&f!=null&&m<f.length?m:null),W("change"),t(29,oe=f))),n.$$.dirty[0]&32770&&(e=((m??0)+((z==null?void 0:z.length)??0)-1)%((z==null?void 0:z.length)??0)),n.$$.dirty[0]&32770&&(i=((m??0)+1)%((z==null?void 0:z.length)??0)),n.$$.dirty[0]&1073774594&&m!==ae&&(t(30,ae=m),m!==null&&W("select",{index:m,value:z==null?void 0:z[m]})),n.$$.dirty[0]&130&&v&&He(m),n.$$.dirty[0]&32770&&t(21,r=m!=null&&z!=null?z[m]:null)},[f,m,a,b,_,o,d,v,c,p,h,w,te,E,y,z,R,F,K,X,he,r,_e,Ge,ge,We,u,Q,T,oe,ae,Xe,Je,Qe,Ke,Ye,Ze,xe,el,ll,tl,nl,il]}class xl extends _l{constructor(l){super(),hl(this,l,Ol,Ul,rl,{show_label:2,label:3,value:0,columns:4,rows:5,height:6,preview:26,allow_preview:7,object_fit:8,show_share_button:9,show_download_button:10,i18n:11,selected_index:1,interactive:12,_fetch:27,mode:13,show_fullscreen_button:14},null,[-1,-1])}}export{xl as default};
