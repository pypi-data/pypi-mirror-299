Metadata-Version: 2.1
Name: smartbulk-connector
Version: 0.1.3
Summary: BioTuring Smartbulk Connector
Home-page: https://alpha.bioturing.com
Author: BioTuring
Author-email: support@bioturing.com
License: UNKNOWN
Platform: UNKNOWN
Requires-Python: >=3.8, <3.12
Description-Content-Type: text/markdown
Requires-Dist: pydantic==2.7.2
Requires-Dist: requests==2.32.3
Requires-Dist: tqdm==4.66.4
Requires-Dist: pandas==2.2.3
Requires-Dist: numpy==2.0.2

# BioTuring SmartBulk-Connector SDK

Bioturing SmartBulk-Connector SDK is a Python package that provides an interface to interact with Bioturing's services

## Installation

You can install the SmartBulk-Connector SDK package using `pip`:

```bash
pip install my_package
```

## How To Use


```python
import warnings
from smartbulk_connector import SmartbulkConnector

warnings.filterwarnings("ignore")
```

**Connect to SmartBulk private server**


```python
# authentication
DOMAIN = "https://<domain>.bioturing.com/smartbulk"
TOKEN = "<your-API-token>"
connector = SmartbulkConnector(domain=DOMAIN, token=TOKEN)

# get current version
connector.get_versions()
```

    smartbulk_connector: version 0.1.0


**Get user groups available for your token**


```python
connector.get_user_groups()
```




    [{'group_id': '<hidden-id>',
      'group_name': 'Personal workspace'},
     {'group_id': '<hidden-id>', 'group_name': 'All members'},
     {'group_id': '<hidden-id>',
      'group_name': 'Smartbulk Dev'},
     {'group_id': '<hidden-id>',
      'group_name': 'BioTuring Public Studies'}]



**Get all projects from a group**


```python
connector.get_all_projects_info_in_group(group_id='personal')
```




    [{'project_id': 'prj_5cf78cc2-3108-4ce1-a63a-fcbc869229c3',
      'project_name': 'recipes',
      'project_description': '',
      'keywords': '',
      'project_type': '',
      'species': 'human',
      'project_home': '',
      'machine_id': '',
      'status': 1,
      'owner': 'bioturing',
      'members': '',
      'groups': '<hidden-id>',
      'task_info': '{"init_status":"success"}',
      'task_status': 'success',
      'created_at': 1727787432,
      'updated_at': 1727787443},
     {'project_id': 'prj_ff9fa70a-7fe8-11ef-9068-0242ac130004',
      'project_name': 'mouse_sample',
      'project_description': '',
      'keywords': '',
      'project_type': '',
      'species': 'mouse',
      'project_home': '',
      'machine_id': '',
      'status': 1,
      'owner': 'bioturing',
      'members': '',
      'groups': '<hidden-id>',
      'task_info': '{"init_status":"success"}',
      'task_status': 'success',
      'created_at': 1727782417,
      'updated_at': 1727782425},]



**Get current working directory in workspace**


```python
connector.get_cwd()
```


    '/data/user_data/apps/smartbulk/<hidden-id>/upload'


**List files and directory in workspace**


```python
connector.listdir_workspace('./', return_path=True)
```

    /data/user_data/apps/smartbulk/<hidden-id>/upload/./



    ['example_data', 'test', 'tsv_sample']


**List files and directory in cloud_storage**


```python
connector.listdir_cloud_storage('./', return_path=True)
```

    /data/user_data/apps/smartbulk/<hidden-id>/cloud_storages/./



    ['bioturing-lens', 'bioturingdebug', 'bioturingdebug.log.txt']


**Upload a single file**


```python
connector.upload_big_file('example_data/count_mat.csv', server_folder_name='test', debug_mode=True)
```


    {'status': 0,
     'path': '/data/user_data/apps/smartbulk/<hidden-id>/upload/test/v1.count_mat.csv',
     'url_path': 'https://<domain>.bioturing.com/smartbulk/<hidden-id>/upload/test/v1.count_mat.csv'}


**Upload a folder**


```python
connector.upload_folder('tsv_sample/', debug_mode=True)
```

      0%|          | 0.00/16.1M [00:00<?, ?B/s]

    Upload tsv_sample/matrix_200.csv.gz, chunk index : 1 ...


    100%|██████████| 16.1M/16.1M [00:29<00:00, 538kB/s]



    {'folder_name': 'tsv_sample',
     'file_path': ['tsv_sample/recipes.csv',
      'tsv_sample/SRP092402.tsv',
      'tsv_sample/matrix_200.csv.gz'],
     'server_path': ['/data/user_data/apps/smartbulk/<hidden-id>/upload/tsv_sample/v1.recipes.csv',
      '/data/user_data/apps/smartbulk/<hidden-id>/upload/tsv_sample/v1.SRP092402.tsv',
      '/data/user_data/apps/smartbulk/<hidden-id>/upload/tsv_sample/v1.matrix_200.csv.gz']}


**Create new project from the uploaded folder path in the SmartBulk Server**


```python
submit_reresult = connector.create_project(
    group_id='personal',
    species='human',
    project_name='human_tsv',
    matrix_paths=['/data/user_data/apps/smartbulk/<hidden-id>/upload/tsv_sample/v1.matrix_200.csv.gz'],
    metadata_paths=['/data/user_data/apps/smartbulk/<hidden-id>/upload/tsv_sample/v1.SRP092402.tsv'],
)
```

**Real time check project creation status**


```python
connector.check_project_status(submit_reresult=submit_reresult)
```

**Create project with multiple datasets with recipes**


```python
connector.create_project_from_recipes(
    group_id='personal', 
    recipes_path='example_data/recipes.csv', 
    project_name='recipes',
    trace_log='prj_763bd6bf-fd83-4408-8610-cb923556fa60/trace_log.json'
)
```


