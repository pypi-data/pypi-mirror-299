"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[674],{46392:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(80284),a=n(50959),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},i=n(24836),s=function(e,t){return a.createElement(i.Z,(0,r.Z)({},e,{ref:t,icon:o}))};var c=a.forwardRef(s)},47176:function(e,t,n){var r=n(26068),a=n.n(r),o=n(48305),i=n.n(o),s=n(84353),c=n(6434),l=n(32382),u=n(18953),d=n(64518),f=n(66551),m=n(99013),p=n.n(m),v=n(50959),x=n(11527);t.Z=function(e){var t=e.text,n=e.disabled,r=e.type,o=void 0===r?"text":r,m=e.shape,h=void 0===m?"default":m,g=e.fontSize,y=void 0===g?"14px":g,C=e.style,b=e.size,Z=void 0===b?"middle":b,M=(0,l.useIntl)(),j=(0,v.useState)(!1),k=i()(j,2),E=k[0],w=k[1],S=(0,v.useRef)(null),A=(0,v.useRef)(null);return(0,v.useEffect)((function(){return S.current&&(A.current=new(p())(S.current),A.current.on("success",(function(){w(!0),setTimeout((function(){w(!1)}),3e3)})),A.current.on("error",(function(e){u.ZP.success(M.formatMessage({id:"common.copy.fail"})),e.clearSelection()}))),function(){var e;null===(e=A.current)||void 0===e||e.destroy()}}),[S]),(0,x.jsx)(d.Z,{title:M.formatMessage({id:"common.button.copy"}),children:(0,x.jsx)(f.ZP,{className:"copy-button",ref:S,type:o,shape:h,size:Z,disabled:!!n,"data-clipboard-text":t,icon:E?(0,x.jsx)(s.Z,{style:{color:"var(--ant-color-success)",fontSize:y}}):(0,x.jsx)(c.Z,{style:a()({fontSize:y},C)})})})}},41755:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(90228),a=n.n(r),o=n(87999),i=n.n(o),s=n(48305),c=n.n(s),l=n(76099),u=n(32382),d=n(18953),f=n(25923),m=n(81126),p=n(66551),v=n(50959),x="delete-modal-content___bdNBR",h="content___YptSA",g=n(11527),y=(0,v.forwardRef)((function(e,t){var n=(0,u.useIntl)(),r=(0,v.useState)(!1),o=c()(r,2),s=o[0],y=o[1],C=(0,v.useState)({}),b=c()(C,2),Z=b[0],M=b[1];(0,v.useImperativeHandle)(t,(function(){return{show:function(e){M(e),y(!0)},hide:function(){y(!1)}}}));var j=function(){var e;y(!1),null===(e=Z.onCancel)||void 0===e||e.call(Z)},k=function(){var e=i()(a()().mark((function e(){var t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=Z.onOk)||void 0===t?void 0:t.call(Z);case 2:d.ZP.success(n.formatMessage({id:"common.message.success"})),y(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)(f.Z,{style:{top:"20%"},open:s,onOk:k,onCancel:j,destroyOnClose:!0,closeIcon:!1,maskClosable:!1,keyboard:!1,width:460,styles:{},footer:(0,g.jsxs)(m.Z,{size:20,children:[(0,g.jsx)(p.ZP,{onClick:j,size:"middle",children:n.formatMessage({id:"common.button.cancel"})}),(0,g.jsx)(p.ZP,{type:"primary",onClick:k,size:"middle",children:n.formatMessage({id:"common.button.delete"})})]}),children:[(0,g.jsx)("div",{className:x,children:(0,g.jsxs)("span",{className:"title",children:[(0,g.jsx)(l.Z,{}),(0,g.jsx)("span",{children:n.formatMessage({id:"common.title.delete.confirm"})})]})}),(0,g.jsx)("div",{className:h,dangerouslySetInnerHTML:{__html:Z.content&&n.formatMessage({id:Z.selection?"common.delete.confirm":"common.delete.single.confirm"},{type:n.formatMessage({id:Z.content}),name:Z.name})}})]})})),C=y},45799:function(e,t,n){var r=n(26068),a=n.n(r),o=n(32382),i=n(81126),s=n(66551),c=n(11527);t.Z=function(e){var t=e.onOk,n=e.onCancel,r=e.cancelText,l=e.okText,u=e.okBtnProps,d=e.cancelBtnProps,f=e.loading,m=e.htmlType,p=void 0===m?"button":m,v=(e.align,e.style),x=(e.form,(0,o.useIntl)());return(0,c.jsxs)(i.Z,{size:20,style:a()({},v),children:[(0,c.jsx)(s.ZP,a()(a()({onClick:n,style:{width:"88px"}},d),{},{children:r||x.formatMessage({id:"common.button.cancel"})})),(0,c.jsx)(s.ZP,a()(a()({type:"primary",onClick:t,style:{width:"88px"},loading:f,htmlType:p},u),{},{children:l||x.formatMessage({id:"common.button.save"})}))]})}},38441:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(50959),a=n(11527),o=function(e){var t=e.left,n=e.right,o=e.marginBottom,i=void 0===o?0:o,s=e.marginTop,c=void 0===s?30:s,l=e.style,u=(0,r.useMemo)((function(){var e={};return e.marginBottom="".concat(i,"px"),e.marginTop="".concat(c,"px"),l&&Object.assign(e,l),e}),[i,c,l]);return(0,a.jsxs)("div",{className:"page-tools",style:u,children:[(0,a.jsx)("div",{className:"left",children:t}),(0,a.jsx)("div",{className:"right",children:n})]})}},94886:function(e,t,n){var r=n(26068),a=n.n(r),o=n(48305),i=n.n(o),s=n(67825),c=n.n(s),l=n(34088),u=n(79698),d=n(19392),f=n(50959),m=n(37975),p=n(11527),v=["label","placeholder","children","required","description","isInFormItems"];t.Z=function(e){var t=e.label,n=(e.placeholder,e.children),r=e.required,o=e.description,s=e.isInFormItems,x=void 0===s||s,h=c()(e,v),g=(0,f.useState)(!1),y=i()(g,2),C=y[0],b=y[1],Z=(0,f.useRef)(null),M="";if(x){var j,k,E=null===u.Z||void 0===u.Z||null===(j=u.Z.Item)||void 0===j||null===(k=j.useStatus)||void 0===k?void 0:k.call(j);M=(null==E?void 0:E.status)||""}(0,f.useEffect)((function(){(0,l.JL)(e.value)&&b(!0)}),[e.value]);return(0,p.jsx)(m.Z,{status:M,label:t,isFocus:C,required:r,description:o,disabled:e.disabled,onClick:function(){var t,n;e.disabled||C||(null===(t=Z.current)||void 0===t||null===(n=t.focus)||void 0===n||n.call(t),b(!0))},children:(0,p.jsx)(d.default,a()(a()({},h),{},{ref:Z,onFocus:function(t){var n;b(!0),null===(n=e.onFocus)||void 0===n||n.call(e,t)},onBlur:function(t){var n;e.value||b(!1),null===(n=e.onBlur)||void 0===n||n.call(e,t)},onChange:function(t,n){var r;(0,l.JL)(t)?b(!0):b(!1),null===(r=e.onChange)||void 0===r||r.call(e,t,n)},notFoundContent:null,children:n}))})}},43463:function(e,t,n){n.d(t,{d4:function(){return s}});var r=n(48305),a=n.n(r),o=(0,n(34088).oc)(),i={CREATE:["Alt+Ctrl+N","Alt+Meta+N"],CLEAR:["Alt+Ctrl+K","Alt+Meta+K"],RIGHT:["Ctrl+RIGHT","Meta+RIGHT"],SAVE:["Ctrl+S","Meta+S"],SUBMIT:["Ctrl+Enter","Meta+Enter"],SAVEAS:["Alt+Ctrl+S","Alt+Meta+S"],OPEN:["Alt+Ctrl+O","Alt+Meta+O"],CANCEL:["Ctrl+W","Meta+W"],DELETE:["delete"],COPY:["Ctrl+C","Meta+C"],REFRESH:["Ctrl+R","Meta+R"],EDIT:["Ctrl+E","Meta+E"],SEARCH:["Ctrl+K","Meta+K"],RESET:["Alt+Ctrl+R","Alt+Meta+R"],INPUT:["Ctrl+K","Meta+K"],NEW1:["Ctrl+1","Meta+1"],NEW2:["Ctrl+2","Meta+2"],NEW3:["Ctrl+3","Meta+3"],FOCUS:["/","/"],ADD:["Alt+Ctrl+Enter","Alt+Meta+Enter"]},s=Object.entries(i).map((function(e){var t=a()(e,2),n=t[0],r=t[1],i=o.isMac&&r[1]||r[0];return{keybinding:i,command:n,textKeybinding:o.isMac?i.replace("Meta","Cmd").replace("Alt","Option"):i.replace("Ctrl","Ctrl"),iconKeybinding:o.isMac?i.replace("Meta","⌘").replace("Alt","⌥"):i.replace("Ctrl","Ctrl")}})).reduce((function(e,t){return e[t.command]=t,e}),{});t.ZP=i},33398:function(e,t,n){n.d(t,{Kd:function(){return r},_W:function(){return i},iE:function(){return o},tb:function(){return s},zK:function(){return a}});var r={CREATE:"create",UPDATE:"update",VIEW:"view"},a={error:{text:"var(--ant-red-6)",bg:"var(--ant-red-1)"},warning:{text:"var(--ant-orange-6)",bg:"var(--ant-orange-1)"},transitioning:{text:"var(--ant-blue-6)",bg:"var(--ant-blue-1)"},success:{text:"var(--color-progress-green)",bg:"var(--ant-green-1)"},inactive:{text:"var(--ant-color-text-tertiary)",border:"rgba(200,200,200,1)",bg:"var(--ant-color-fill)"}},o={error:"error",warning:"warning",transitioning:"transitioning",success:"success",inactive:"inactive"},i={CREATE:1,UPDATE:2,DELETE:3},s=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*_+])[a-zA-Z\d!@#$%^&*_+]{6,12}$/},23543:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(48305),a=n.n(r),o=n(50959);function i(){var e=(0,o.useState)([]),t=a()(e,2),n=t[0],r=t[1],i={selectedRowKeys:n,clearSelections:function(){r([])},onChange:function(e){r(e)}};return i}},79822:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(48305),a=n.n(r),o=n(50959);function i(e){var t=e.defaultSortOrder,n=void 0===t?"descend":t,r=(0,o.useState)(n),i=a()(r,2),s=i[0],c=i[1];return{sortOrder:s,setSortOrder:function(e){e?c(e):"descend"===n?c("ascend"):"ascend"===n&&c("descend")}}}},61710:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var r=n(90228),a=n.n(r),o=n(87999),i=n.n(o),s=n(26068),c=n.n(s),l=n(48305),u=n.n(l),d=n(41755),f=n(38441),m=n(33398),p=n(43463),v=n(23543),x=n(79822),h=n(34088),g=n(46392),y=n(10822),C=n(26657),b=n(67399),Z=n(32382),M=n(78783),j=n(81126),k=n(2300),E=n(66551),w=n(64518),S=n(7672),A=n.n(S),T=n(32699),I=n.n(T),O=n(50959),R=n(94299),P="/api-keys";function z(e){return K.apply(this,arguments)}function K(){return(K=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("".concat(P),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return N.apply(this,arguments)}function N(){return(N=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("".concat(P),{method:"POST",data:t.data}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return F.apply(this,arguments)}function F(){return(F=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("".concat(P,"/").concat(t),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=n(47176),L=n(45799),q=n(99494),H=n(94886),Y=n(79698),W=n(25923),U=n(19392),G=n(89891),V=[{label:"apikeys.form.expiration.7days",type:"day",value:7},{label:"apikeys.form.expiration.1month",type:"month",value:1},{label:"apikeys.form.expiration.6months",type:"month",value:6},{label:"apikeys.form.expiration.never",type:"never",value:-1}],$=n(11527),J=function(e){var t=e.title,n=e.action,r=e.open,o=e.onOk,s=e.onCancel,l=Y.Z.useForm(),d=u()(l,1)[0],f=(0,Z.useIntl)(),p=(0,O.useState)(!1),v=u()(p,2),x=v[0],h=v[1],g=(0,O.useState)(""),y=u()(g,2),C=y[0],b=y[1],M=(0,O.useState)(!1),j=u()(M,2),k=j[0],w=j[1];(0,O.useEffect)((function(){n===m.Kd.CREATE&&r&&d.setFieldsValue({expires_in:1})}),[r]);var S=function(e){var t=e;if(-1===t)return 0;var n=V.find((function(e){return t===e.value})),r=A()().add(null==n?void 0:n.value,"".concat(null==n?void 0:n.type)),a=A()();return r.diff(a,"second")},T=function(){var e=i()(a()().mark((function e(t){var n,r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),n=c()(c()({},t),{},{expires_in:S(t.expires_in)}),e.next=5,_({data:n});case 5:r=e.sent,b(r.value),h(!0),w(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),w(!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){d.submit()};return(0,$.jsx)(W.Z,{title:x?f.formatMessage({id:"apikeys.title.save"}):t,open:r,centered:!0,onOk:I,onCancel:s,afterOpenChange:function(e){h(!1)},destroyOnClose:!0,closeIcon:!1,maskClosable:!1,keyboard:!1,width:600,styles:{},footer:x?(0,$.jsx)(E.ZP,{type:"primary",onClick:function(){o()},children:f.formatMessage({id:"common.button.done"})}):(0,$.jsx)(L.Z,{onOk:I,onCancel:s,loading:k}),children:(0,$.jsx)(Y.Z,{name:"addAPIKey",form:d,onFinish:T,preserve:!1,children:x?(0,$.jsxs)(Y.Z.Item,{children:[(0,$.jsx)("div",{children:(0,$.jsx)(G.Z,{bordered:!1,color:"error",style:{padding:"6px 8px",marginBottom:16},children:f.formatMessage({id:"apikeys.table.save.tips"})})}),(0,$.jsx)(q.Z.Input,{label:f.formatMessage({id:"apikeys.form.apikey"}),value:C,addAfter:(0,$.jsx)(B.Z,{text:C,shape:"default",size:"middle",type:"text"})})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(Y.Z.Item,{name:"name",rules:[{required:!0,message:f.formatMessage({id:"common.form.rule.input"},{name:f.formatMessage({id:"common.table.name"})})}],children:(0,$.jsx)(q.Z.Input,{label:f.formatMessage({id:"common.table.name"}),required:!0})}),(0,$.jsx)(Y.Z.Item,{name:"expires_in",rules:[{required:!0,message:f.formatMessage({id:"common.form.rule.select"},{name:f.formatMessage({id:"apikeys.form.expiretime"})})}],children:(0,$.jsx)(H.Z,{label:f.formatMessage({id:"apikeys.form.expiretime"}),required:!0,children:V.map((function(e){return(0,$.jsx)(U.default.Option,{value:e.value,children:f.formatMessage({id:e.label})},e.value)}))})}),(0,$.jsx)(Y.Z.Item,{name:"description",rules:[{required:!1}],children:(0,$.jsx)(q.Z.TextArea,{label:f.formatMessage({id:"common.table.description"})})})]})})})},Q=M.Z.Column,X=function(){var e=(0,v.Z)(),t=(0,x.Z)({defaultSortOrder:"descend"}),n=t.sortOrder,r=t.setSortOrder,o=(0,Z.useIntl)(),s=(0,O.useRef)(null),l=(0,O.useState)({dataList:[],loading:!1,total:0}),S=u()(l,2),T=S[0],P=S[1],K=(0,O.useState)(!1),_=u()(K,2),N=_[0],F=_[1],B=(0,O.useState)(m.Kd.CREATE),L=u()(B,2),q=L[0],H=L[1],Y=(0,O.useState)({page:1,perPage:10,search:""}),W=u()(Y,2),U=W[0],G=W[1],V=function(){var e=i()(a()().mark((function e(){var t,n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P((function(e){return e.loading=!0,c()({},e)})),e.prev=1,t=c()({},I().pickBy(U,(function(e){return!!e}))),e.next=5,z(t);case 5:n=e.sent,P({dataList:n.items||[],loading:!1,total:n.pagination.total}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),P({dataList:[],loading:!1,total:T.total});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),X=function(){F(!0),H(m.Kd.CREATE)},ee=function(){var e=i()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V();case 3:F(!1),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return(0,O.useEffect)((function(){V()}),[U]),(0,R.y1)(p.ZP.CREATE,(function(){X()}),{enabled:!N}),(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(b._z,{ghost:!0,header:{title:o.formatMessage({id:"apikeys.title"})},extra:[],children:[(0,$.jsx)(f.Z,{marginBottom:22,left:(0,$.jsxs)(j.Z,{children:[(0,$.jsx)(k.Z,{placeholder:o.formatMessage({id:"common.filter.name"}),style:{width:300},allowClear:!0,onChange:function(e){G(c()(c()({},U),{},{search:e.target.value}))}}),(0,$.jsx)(E.ZP,{type:"text",style:{color:"var(--ant-color-text-tertiary)"},onClick:function(e){V()},icon:(0,$.jsx)(g.Z,{})})]}),right:(0,$.jsxs)(j.Z,{size:20,children:[(0,$.jsx)(E.ZP,{icon:(0,$.jsx)(y.Z,{}),type:"primary",onClick:X,children:o.formatMessage({id:"apikeys.button.create"})}),(0,$.jsx)(E.ZP,{icon:(0,$.jsx)(C.Z,{}),danger:!0,onClick:function(){s.current.show({content:"apikeys.table.apikeys",selection:!0,onOk:function(){return i()(a()().mark((function t(){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,h.D6)(e.selectedRowKeys,D);case 2:e.clearSelections(),V();case 4:case"end":return t.stop()}}),t)})))()}})},disabled:!e.selectedRowKeys.length,children:o.formatMessage({id:"common.button.delete"})})]})}),(0,$.jsxs)(M.Z,{dataSource:T.dataList,rowSelection:e,loading:T.loading,rowKey:"id",onChange:function(e,t,n){r(n.order)},pagination:{showSizeChanger:!0,pageSize:U.perPage,current:U.page,total:T.total,hideOnSinglePage:10===U.perPage,onChange:function(e,t){G(c()(c()({},U),{},{page:e,perPage:t||10}))}},children:[(0,$.jsx)(Q,{title:o.formatMessage({id:"common.table.name"}),dataIndex:"name",width:400,ellipsis:{showTitle:!0}},"name"),(0,$.jsx)(Q,{title:o.formatMessage({id:"apikeys.form.expiretime"}),dataIndex:"expires_at",render:function(e,t){return e?A()(e).format("YYYY-MM-DD HH:mm:ss"):o.formatMessage({id:"apikeys.form.expiration.never"})}},"expiration"),(0,$.jsx)(Q,{title:o.formatMessage({id:"common.table.description"}),dataIndex:"description",ellipsis:{showTitle:!0}},"description"),(0,$.jsx)(Q,{title:o.formatMessage({id:"common.table.createTime"}),dataIndex:"created_at",defaultSortOrder:"descend",sortOrder:n,showSorterTooltip:!1,sorter:!1,render:function(e,t){return A()(e).format("YYYY-MM-DD HH:mm:ss")}},"createTime"),(0,$.jsx)(Q,{title:o.formatMessage({id:"common.table.operation"}),render:function(e,t){return(0,$.jsx)(j.Z,{size:20,children:(0,$.jsx)(w.Z,{title:o.formatMessage({id:"common.button.delete"}),children:(0,$.jsx)(E.ZP,{onClick:function(){return e=t,void s.current.show({content:"apikeys.table.apikeys",name:e.name,onOk:function(){return i()(a()().mark((function t(){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,D(e.id);case 3:V();case 4:case"end":return t.stop()}}),t)})))()}});var e},size:"small",danger:!0,icon:(0,$.jsx)(C.Z,{})})})})}},"operation")]})]}),(0,$.jsx)(J,{open:N,action:q,title:o.formatMessage({id:"apikeys.button.create"}),onCancel:function(){F(!1)},onOk:ee}),(0,$.jsx)(d.Z,{ref:s})]})}}}]);