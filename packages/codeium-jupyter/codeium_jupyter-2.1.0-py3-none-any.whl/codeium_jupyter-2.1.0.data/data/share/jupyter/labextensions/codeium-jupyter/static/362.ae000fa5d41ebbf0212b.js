"use strict";(self.webpackChunkcodeium_jupyter=self.webpackChunkcodeium_jupyter||[]).push([[362],{3362:(e,t,r)=>{r.r(t),r.d(t,{createConnectTransport:()=>w,createGrpcWebTransport:()=>q});var n=r(1021),s=r(8388),a=r(6761),o=r(3153),i=r(2795),c=r(29),u=r(5793),d=r(7478),l=r(1192),f=r(1807),h=r(7746),m=r(576);function v(){try{new Headers}catch(e){throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}var y=function(e){return this instanceof y?(this.v=e,this):new y(e)},g=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),a=[];return n={},o("next"),o("throw"),o("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),n[Symbol.asyncIterator]=function(){return this},n;function o(e,t){s[e]&&(n[e]=function(t){return new Promise((function(r,n){a.push([e,t,r,n])>1||i(e,t)}))},t&&(n[e]=t(n[e])))}function i(e,t){try{(r=s[e](t)).value instanceof y?Promise.resolve(r.value.v).then(c,u):d(a[0][2],r)}catch(e){d(a[0][3],e)}var r}function c(e){i("next",e)}function u(e){i("throw",e)}function d(e,t){e(t),a.shift(),a.length&&i(a[0][0],a[0][1])}};function w(e){var t;v();const r=null!==(t=e.useBinaryFormat)&&void 0!==t&&t;return{async unary(t,c,m,v,y,g,w){var p;const{serialize:b,parse:j}=(0,a.Ef)(c,r,e.jsonOptions,e.binaryOptions);return v=void 0===v?e.defaultTimeoutMs:v<=0?void 0:v,await(0,o.L)({interceptors:e.interceptors,signal:m,timeoutMs:v,req:{stream:!1,service:t,method:c,url:(0,i.j)(e.baseUrl,t,c),init:{method:"POST",credentials:null!==(p=e.credentials)&&void 0!==p?p:"same-origin",redirect:"error",mode:"cors"},header:(0,u.L)(c.kind,r,v,y,!1),contextValues:null!=w?w:(0,s.createContextValues)(),message:g},next:async o=>{var i;let u=null;!0===e.useHttpGet&&c.idempotency===n.p.NoSideEffects?o=(0,d.l)(o,b(o.message),r):u=b(o.message);const m=null!==(i=e.fetch)&&void 0!==i?i:globalThis.fetch,v=await m(o.url,Object.assign(Object.assign({},o.init),{headers:o.header,signal:o.signal,body:u})),{isUnaryError:y,unaryError:g}=(0,l.k)(c.kind,v.status,v.headers);if(y)throw(0,f.Nn)(await v.json(),(0,s.appendHeaders)(...(0,h.z)(v.headers)),g);const[w,p]=(0,h.z)(v.headers);return{stream:!1,service:t,method:c,header:w,message:r?j(new Uint8Array(await v.arrayBuffer())):c.O.fromJson(await v.json(),(0,a.B_)(e.jsonOptions)),trailer:p}}})},async stream(t,d,f,h,v,w,p){var b;const{serialize:j,parse:O}=(0,a.Ef)(d,r,e.jsonOptions,e.binaryOptions);function x(e,t,r){return g(this,arguments,(function*(){const n=(0,c.V0)(e).getReader();let s=!1;for(;;){const e=yield y(n.read());if(e.done)break;const{flags:a,data:o}=e.value;if((a&m.Cu)!==m.Cu)yield yield y(O(o));else{s=!0;const e=(0,m.mo)(o);if(e.error){const t=e.error;throw r.forEach(((e,r)=>{t.metadata.append(r,e)})),t}e.metadata.forEach(((e,r)=>t.set(r,e)))}}if(!s)throw"missing EndStreamResponse"}))}async function S(e){if(d.kind!=n.I.ServerStreaming)throw"The fetch API does not support streaming request bodies";const t=await e[Symbol.asyncIterator]().next();if(1==t.done)throw"missing request message";return(0,c.zK)(0,j(t.value))}return h=void 0===h?e.defaultTimeoutMs:h<=0?void 0:h,await(0,o.u)({interceptors:e.interceptors,timeoutMs:h,signal:f,req:{stream:!0,service:t,method:d,url:(0,i.j)(e.baseUrl,t,d),init:{method:"POST",credentials:null!==(b=e.credentials)&&void 0!==b?b:"same-origin",redirect:"error",mode:"cors"},header:(0,u.L)(d.kind,r,h,v,!1),contextValues:null!=p?p:(0,s.createContextValues)(),message:w},next:async t=>{var r;const n=null!==(r=e.fetch)&&void 0!==r?r:globalThis.fetch,s=await n(t.url,Object.assign(Object.assign({},t.init),{headers:t.header,signal:t.signal,body:await S(t.message)}));if((0,l.k)(d.kind,s.status,s.headers),null===s.body)throw"missing response body";const a=new Headers;return Object.assign(Object.assign({},t),{header:s.headers,trailer:a,message:x(s.body,a,s.headers)})}})}}}var p=r(5930),b=r(1589),j=r(7047);function O(e,t,r,n){const s=new Headers(null!=r?r:{});return s.set(p.Z_,e?j.y:j.q2),s.set(b.E,"1"),s.set(b.SY,"connect-es/1.4.0"),n&&s.set(p.qy,"connect-es/1.4.0"),void 0!==t&&s.set(p.hR,`${t}m`),s}var x=r(5833),S=r(1863),T=r(1380);function C(e,t){var r;if(e>=200&&e<300){const e=(0,T.N)(t);if(e)throw e;return{foundStatus:t.has(p.OJ)}}throw new x.T(decodeURIComponent(null!==(r=t.get(p.vw))&&void 0!==r?r:`HTTP ${e}`),function(e){switch(e){case 400:return S.C.Internal;case 401:return S.C.Unauthenticated;case 403:return S.C.PermissionDenied;case 404:return S.C.Unimplemented;case 429:case 502:case 503:case 504:return S.C.Unavailable;default:return S.C.Unknown}}(e),t)}var k=r(8240);function E(e,t){const r=(0,T.N)(e);if(r)throw t.forEach(((e,t)=>{r.metadata.append(t,e)})),r}var I=function(e){return this instanceof I?(this.v=e,this):new I(e)},P=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),a=[];return n={},o("next"),o("throw"),o("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),n[Symbol.asyncIterator]=function(){return this},n;function o(e,t){s[e]&&(n[e]=function(t){return new Promise((function(r,n){a.push([e,t,r,n])>1||i(e,t)}))},t&&(n[e]=t(n[e])))}function i(e,t){try{(r=s[e](t)).value instanceof I?Promise.resolve(r.value.v).then(c,u):d(a[0][2],r)}catch(e){d(a[0][3],e)}var r}function c(e){i("next",e)}function u(e){i("throw",e)}function d(e,t){e(t),a.shift(),a.length&&i(a[0][0],a[0][1])}};function q(e){var t;v();const r=null===(t=e.useBinaryFormat)||void 0===t||t;return{async unary(t,n,u,d,l,f,h){var m;const{serialize:v,parse:y}=(0,a.Ef)(n,r,e.jsonOptions,e.binaryOptions);return d=void 0===d?e.defaultTimeoutMs:d<=0?void 0:d,await(0,o.L)({interceptors:e.interceptors,signal:u,timeoutMs:d,req:{stream:!1,service:t,method:n,url:(0,i.j)(e.baseUrl,t,n),init:{method:"POST",credentials:null!==(m=e.credentials)&&void 0!==m?m:"same-origin",redirect:"error",mode:"cors"},header:O(r,d,l,!1),contextValues:null!=h?h:(0,s.createContextValues)(),message:f},next:async r=>{var s;const a=null!==(s=e.fetch)&&void 0!==s?s:globalThis.fetch,o=await a(r.url,Object.assign(Object.assign({},r.init),{headers:r.header,signal:r.signal,body:(0,c.zK)(0,v(r.message))}));if(C(o.status,o.headers),!o.body)throw"missing response body";const i=(0,c.V0)(o.body).getReader();let u,d;for(;;){const e=await i.read();if(e.done)break;const{flags:t,data:r}=e.value;if(t!==k.oK){if(void 0!==d)throw"extra message";d=y(r)}else{if(void 0!==u)throw"extra trailer";u=(0,k.xb)(r)}}if(void 0===u)throw"missing trailer";if(E(u,o.headers),void 0===d)throw"missing message";return{stream:!1,service:t,method:n,header:o.headers,message:d,trailer:u}}})},async stream(t,u,d,l,f,h,m){var v;const{serialize:y,parse:g}=(0,a.Ef)(u,r,e.jsonOptions,e.binaryOptions);function w(e,t,r,n){return P(this,arguments,(function*(){const s=(0,c.V0)(e).getReader();if(t){if(!(yield I(s.read())).done)throw"extra data for trailers-only";return yield I(void 0)}let a=!1;for(;;){const e=yield I(s.read());if(e.done)break;const{flags:t,data:o}=e.value;if((t&k.oK)!==k.oK){if(a)throw"extra message";yield yield I(g(o))}else{if(a)throw"extra trailer";a=!0;const e=(0,k.xb)(o);E(e,n),e.forEach(((e,t)=>r.set(t,e)))}}if(!a)throw"missing trailer"}))}async function p(e){if(u.kind!=n.I.ServerStreaming)throw"The fetch API does not support streaming request bodies";const t=await e[Symbol.asyncIterator]().next();if(1==t.done)throw"missing request message";return(0,c.zK)(0,y(t.value))}return l=void 0===l?e.defaultTimeoutMs:l<=0?void 0:l,(0,o.u)({interceptors:e.interceptors,signal:d,timeoutMs:l,req:{stream:!0,service:t,method:u,url:(0,i.j)(e.baseUrl,t,u),init:{method:"POST",credentials:null!==(v=e.credentials)&&void 0!==v?v:"same-origin",redirect:"error",mode:"cors"},header:O(r,l,f,!1),contextValues:null!=m?m:(0,s.createContextValues)(),message:h},next:async t=>{var r;const n=null!==(r=e.fetch)&&void 0!==r?r:globalThis.fetch,s=await n(t.url,Object.assign(Object.assign({},t.init),{headers:t.header,signal:t.signal,body:await p(t.message)})),{foundStatus:a}=C(s.status,s.headers);if(!s.body)throw"missing response body";const o=new Headers;return Object.assign(Object.assign({},t),{header:s.headers,trailer:o,message:w(s.body,a,o,s.headers)})}})}}}}}]);