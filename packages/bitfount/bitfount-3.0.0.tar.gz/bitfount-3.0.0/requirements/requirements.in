# This file contains the master copy of requirements, most of them with
# unpinned versions, but having the minimum version provided.
#
# When updating this, ensure that a minimum version is given.
#
# It can be used to regenerate/update the actually used
# requirements*.txt files.
#
# This can be done by calling:
#   `requirements/gen-requirements.sh`

# Constraints
-c constraints-compatibility.txt
-c constraints-direct.txt
-c constraints-security.txt

aiohttp>=3.10.2  # used for temporary HTTP listeners; OIDC handling # https://github.com/advisories/GHSA-7gpw-8wmc-pm8g
albumentations>=1.0.0  # used for image transformations
apispec>=6.6.1  # used for generating apispec of task/pod configs
async-timeout~=4.0  # used for async generator timeouts
attrs>=19.3.0  # used for more advanced dataclasses
cryptography>=43.0.1  # used for encryption keys; stubs included from this version # https://github.com/advisories/GHSA-h4gh-qq45-vh27
decorator>=5.0.0  # Used to log raised exceptions instead of crashing
desert>=2022.9.22  # used for Marshmallow schema generation from dataclasses
docstring_parser>=0.14.1  # Used for extracting the docstring from parent classes
environs>=9.0  # used for environment variable parsing
envyaml>=1.10.211231  # used for populating yaml with environment variables
filetype>=1.2.0  # used for handling files with no extension
fire>=0.1.0  # used for CLI generation
GPUtil>=1.4.0  # used for GPU detection
grpcio>=1.54.3  # used for message service communication
httpx>=0.23.0  # used for Asynchronous S3 HTTP requests; # https://github.com/advisories/GHSA-h8pj-cxx2-jfg2
isort>=5.0.1  # used for sorting imports for custom models as well as for the source code of the repo
marshmallow-enum>=1.5.1  # used for schema generation
marshmallow-polyfield>=5.10  # used for schema generation
marshmallow-union>=0.1.15  # used for schema generation
marshmallow>=3.13.0  # used for schema generation
methodtools>=0.4.5  # used for method caching
msgpack>=1.0.0  # used for serialization
natsort>=8.4.0 # used for sorting strings with numbers
numpy>=1.22,<2  # used for data processing
packaging>=22.0  # used for version comparisons; >22.0 supports 3.11+
pandas>=1.3.0,<2  # used for dataframes; `convert_dtypes` bug (https://github.com/pandas-dev/pandas/issues/40393) fixed from this version
pandasql>=0.7.3  # user for supporting SQL query algorithm
Pillow>=10.3.0  # used for image processing; # https://github.com/advisories/GHSA-98vv-pw6r-q6q4
psutil>=5.0.0  # used for detecting platform information (CPU, memory, etc)
pyarrow~=14.0.1  # used for msgpacking of numpy arrays and pandas dataframes
pydantic>=1.10.13  # used for URL typehinting; # https://github.com/advisories/GHSA-mr82-8j83-vxmv
pyjwt>=2.4.0  # used for session token decoding; # https://github.com/advisories/GHSA-ffqj-6fqr-9h24
PyYAML>=5.4  # used for YAML file parsing; # https://github.com/advisories/GHSA-8q59-q68h-6hv4
requests>=2.32.0  # used for web requests; # https://github.com/advisories/GHSA-9wx4-h78v-vm56
scikit-image>=0.21.0  # backend (core); used for image processing
scikit-learn>=1.5.0  # backend (core); # https://github.com/advisories/GHSA-jw8x-6495-233v
sqlalchemy>=1.4.0  # used for database connections
sqlvalidator>=0.0.18  # used for sql string validation
sqlparse>=0.5.0  # used to parse SQL queries; # https://github.com/advisories/ghsa-2m57-hf25-phgg
statsmodels>=0.11.0  # models
torchio>=0.18.91 # used for transformations
types-decorator>=5.1.4  # decorator
typing_extensions>=4.0.0  # not needed for runtime but imports used (i.e. TypeAlias, NotRequired, ParamSpec)

## PyTorch
pytorch-lightning>=1.6.0,<2  # lowest version compatible with torch 1.8.*
pytorch-tabnet>=3.0.0  # TabNet model reproduced in pytorch
tensorboard>=2.2.0  # installed by default in pytorch-lightning 1.6.0 but not in later versions
torch>=1.8.1,<2  # supported range
torch-optimizer>=0.1.0  # Popular optimizers for PyTorch
torchmetrics>=0.6.0  # Pytorch lightning metrics spun out to its own library
torchvision>=0.9.1,<0.15  # used for image processing; range matches supported range for torch

## HuggingFace
transformers>=4.38.0 # used for Natural Language Understanding (NLU) and Natural Language Generation (NLG) # https://github.com/advisories/GHSA-37q5-v5qm-c9v8
opencv-python-headless>=4.8.1.78 # used for image processing for segmentation; # https://github.com/advisories/GHSA-jh2j-j4j9-crg3
timm==0.9.7 # used for DetrConvEncoder in image segmentation

## Open Telemetry
opentelemetry-exporter-otlp-proto-grpc>=1.22.0

## Ophthalmology-related requirements
fpdf2~=2.7.5  # this constraint should also be mirrored in the app build-time-requirements.txt
matplotlib~=3.8.2 #  this constraint should also be mirrored in the app build-time-requirements.txt
pydicom~=2.3.1
python-gdcm~=3.0.22
scipy>=1.9.1
text-unidecode~=1.3  # provides a "map to rough ASCII equivalent" capability

# Private Eye requirements
pillow>10.2.0
pydicom>=2.1
attrs>=21.4.0
h5py>=3.3
jdcal>=1.4
numpy~=1.23
more-itertools>=7.1.0
tabulate>=0.8.6
tifffile>=2019.7.26
imagecodecs-lite>=2019.12.3
scikit-image>=0.18
construct>=2.10.56
click>=8.1.3
protobuf~=4.0
imagesize>=1.2.0
scipy>=1.6
