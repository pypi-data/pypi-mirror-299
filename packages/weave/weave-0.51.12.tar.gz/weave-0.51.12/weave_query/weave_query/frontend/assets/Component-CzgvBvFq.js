import{n as Ne,t as Re,a as Ie,q as z,v as G,x as ae,y as te,z as ne,A as le,D as E,E as D,F,G as ee,H as ie,M as xe,r as re,I as U,J as Ce,K as Ae,N as x,R as s,O as ke,Q as y,T as Te,b as k,U as O,V as o,X as Z,Y as q,Z as se,$ as V,a0 as ce,a1 as Se,a2 as M,a3 as De,a4 as Fe,u as ze,P as Oe,a5 as Ke,l as je,h as $,a6 as oe,p as Le,a7 as Me,a8 as _e,a9 as Ge}from"./index-B3IlW4fU.js";var de=function(a){return{active:!1,type:"ellipsisItem",value:a}},Be=function(){return{active:!1,type:"firstItem",value:1}},Ve=function(a){return{active:!1,type:"prevItem",value:Math.max(1,a-1)}},We=function(a){return function(n){return{active:a===n,type:"pageItem",value:n}}},He=function(a,n){return{active:!1,type:"nextItem",value:Math.min(a+1,n)}},$e=function(a){return{active:!1,type:"lastItem",value:a}},Ue=Math.ceil,Ze=Math.max;function qe(e,a,n,t){for(var l=-1,i=Ze(Ue((a-e)/(n||1)),0),r=Array(i);i--;)r[t?i:++l]=e,e+=n;return r}var Je=qe,Qe=Je,Xe=Ne,H=Re;function Ye(e){return function(a,n,t){return t&&typeof t!="number"&&Xe(a,n,t)&&(n=t=void 0),a=H(a),n===void 0?(n=a,a=0):n=H(n),t=t===void 0?a<n?1:-1:H(t),Qe(a,n,t,e)}}var ea=Ye,aa=ea,ta=aa(),na=ta;const la=Ie(na);var ia=function(a,n,t){var l=n-1,i=l!==a+1,r=i?de:t;return r(l)},ra=function(a,n,t){var l=a+1,i=l!==n-1,r=i?de:t;return r(l)},B=function(a,n,t){return z(la(a,n+1),t)},sa=function(a,n){var t=a.activePage,l=a.boundaryRange,i=a.hideEllipsis,r=a.siblingRange,c=a.totalPages,m=i?0:1,d=l,v=B(1,d,n),f=c+1-l,b=B(f,c,n),g=Math.min(Math.max(t-r,d+m+1),f-m-2*r-1),h=g+2*r,p=B(g,h,n);return[].concat(G(v),[!i&&ia(d,g,n)],G(p),[!i&&ra(h,f,n)],G(b)).filter(Boolean)},ca=function(a){var n=a.boundaryRange,t=a.hideEllipsis,l=a.siblingRange,i=a.totalPages,r=2*n,c=t?0:2,m=2*l;return 1+c+m+r>=i},oa=function(a){var n=a.activePage,t=a.boundaryRange,l=a.hideEllipsis,i=a.siblingRange,r=a.totalPages;return{activePage:+n,boundaryRange:+t,hideEllipsis:!!l,siblingRange:+i,totalPages:+r}},da=function(a){var n=oa(a),t=n.activePage,l=n.totalPages,i=We(t),r=ca(n)?B(1,l,i):sa(n,i);return[Be(),Ve(t)].concat(G(r),[He(t,l),$e(l)])};const ua=da;var A=function(e){ae(a,e);function a(){var n,t;te(this,a);for(var l=arguments.length,i=new Array(l),r=0;r<l;r++)i[r]=arguments[r];return t=ne(this,(n=le(a)).call.apply(n,[this].concat(i))),E(F(t),"handleClick",function(c){D(t.props,"onClick",c,t.props)}),E(F(t),"handleKeyDown",function(c){D(t.props,"onKeyDown",c,t.props),ee.getCode(c)===ee.Enter&&D(t.props,"onClick",c,t.props)}),E(F(t),"handleOverrides",function(){return{onClick:t.handleClick,onKeyDown:t.handleKeyDown}}),t}return ie(a,[{key:"render",value:function(){var t=this.props,l=t.active,i=t.type,r=this.props.disabled||i==="ellipsisItem";return xe.create(this.props,{defaultProps:{active:l,"aria-current":l,"aria-disabled":r,disabled:r,onClick:this.handleClick,onKeyDown:this.handleKeyDown,tabIndex:r?-1:0},overrideProps:this.handleOverrides})}}]),a}(re.Component);E(A,"handledProps",["active","disabled","onClick","onKeyDown","type"]);A.propTypes={};A.create=U(A,function(e){return{content:e}});var T=function(e){ae(a,e);function a(){var n,t;te(this,a);for(var l=arguments.length,i=new Array(l),r=0;r<l;r++)i[r]=arguments[r];return t=ne(this,(n=le(a)).call.apply(n,[this].concat(i))),E(F(t),"handleItemClick",function(c,m){var d=m.value,v=t.state.activePage;+v!=+d&&(t.trySetState({activePage:d}),D(t.props,"onPageChange",c,Ce({},t.props,{activePage:d})))}),E(F(t),"handleItemOverrides",function(c,m,d){return function(v){return{active:c,type:m,key:"".concat(m,"-").concat(d),onClick:function(b,g){D(v,"onClick",b,g),g.type!=="ellipsisItem"&&t.handleItemClick(b,g)}}}}),t}return ie(a,[{key:"render",value:function(){var t=this,l=this.props,i=l["aria-label"],r=l.boundaryRange,c=l.disabled,m=l.ellipsisItem,d=l.siblingRange,v=l.totalPages,f=this.state.activePage,b=ua({activePage:f,boundaryRange:r,hideEllipsis:Ae(m),siblingRange:d,totalPages:v}),g=x(a,this.props);return s.createElement(ke,y({},g,{"aria-label":i,pagination:!0,role:"navigation"}),z(b,function(h){var p=h.active,R=h.type,N=h.value;return A.create(t.props[R],{defaultProps:{content:N,disabled:c,value:N},overrideProps:t.handleItemOverrides(p,R,N)})}))}}]),a}(Te);E(T,"autoControlledProps",["activePage"]);E(T,"defaultProps",{"aria-label":"Pagination Navigation",boundaryRange:1,ellipsisItem:"...",firstItem:{"aria-label":"First item",content:"«"},lastItem:{"aria-label":"Last item",content:"»"},nextItem:{"aria-label":"Next item",content:"⟩"},pageItem:{},prevItem:{"aria-label":"Previous item",content:"⟨"},siblingRange:1});E(T,"Item",A);E(T,"handledProps",["activePage","aria-label","boundaryRange","defaultActivePage","disabled","ellipsisItem","firstItem","lastItem","nextItem","onPageChange","pageItem","prevItem","siblingRange","totalPages"]);T.propTypes={};function C(e){var a=e.children,n=e.className,t=k(n),l=x(C,e),i=O(C,e);return s.createElement(i,y({},l,{className:t}),a)}C.handledProps=["as","children","className"];C.defaultProps={as:"tbody"};C.propTypes={};function w(e){var a=e.active,n=e.children,t=e.className,l=e.collapsing,i=e.content,r=e.disabled,c=e.error,m=e.icon,d=e.negative,v=e.positive,f=e.selectable,b=e.singleLine,g=e.textAlign,h=e.verticalAlign,p=e.warning,R=e.width,N=k(o(a,"active"),o(l,"collapsing"),o(r,"disabled"),o(c,"error"),o(d,"negative"),o(v,"positive"),o(f,"selectable"),o(b,"single line"),o(p,"warning"),Z(g),q(h),se(R,"wide"),t),j=x(w,e),L=O(w,e);return V(n)?s.createElement(L,y({},j,{className:N}),ce.create(m),i):s.createElement(L,y({},j,{className:N}),n)}w.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"];w.defaultProps={as:"td"};w.propTypes={};w.create=U(w,function(e){return{content:e}});function I(e){var a=e.children,n=e.className,t=e.content,l=e.fullWidth,i=k(o(l,"full-width"),n),r=x(I,e),c=O(I,e);return s.createElement(c,y({},r,{className:i}),V(a)?t:a)}I.handledProps=["as","children","className","content","fullWidth"];I.defaultProps={as:"thead"};I.propTypes={};function S(e){var a=e.as,n=x(S,e);return s.createElement(I,y({},n,{as:a}))}S.handledProps=["as"];S.propTypes={};S.defaultProps={as:"tfoot"};function K(e){var a=e.as,n=e.className,t=e.sorted,l=k(Se(t,"sorted"),n),i=x(K,e);return s.createElement(w,y({},i,{as:a,className:l}))}K.handledProps=["as","className","sorted"];K.propTypes={};K.defaultProps={as:"th"};function P(e){var a=e.active,n=e.cellAs,t=e.cells,l=e.children,i=e.className,r=e.disabled,c=e.error,m=e.negative,d=e.positive,v=e.textAlign,f=e.verticalAlign,b=e.warning,g=k(o(a,"active"),o(r,"disabled"),o(c,"error"),o(m,"negative"),o(d,"positive"),o(b,"warning"),Z(v),q(f),i),h=x(P,e),p=O(P,e);return V(l)?s.createElement(p,y({},h,{className:g}),z(t,function(R){return w.create(R,{defaultProps:{as:n}})})):s.createElement(p,y({},h,{className:g}),l)}P.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"];P.defaultProps={as:"tr",cellAs:"td"};P.propTypes={};P.create=U(P,function(e){return{cells:e}});function u(e){var a=e.attached,n=e.basic,t=e.celled,l=e.children,i=e.className,r=e.collapsing,c=e.color,m=e.columns,d=e.compact,v=e.definition,f=e.fixed,b=e.footerRow,g=e.headerRow,h=e.headerRows,p=e.inverted,R=e.padded,N=e.renderBodyRow,j=e.selectable,L=e.singleLine,ue=e.size,me=e.sortable,ve=e.stackable,ge=e.striped,fe=e.structured,he=e.tableData,be=e.textAlign,Pe=e.unstackable,ye=e.verticalAlign,J=k("ui",c,ue,o(t,"celled"),o(r,"collapsing"),o(v,"definition"),o(f,"fixed"),o(p,"inverted"),o(j,"selectable"),o(L,"single line"),o(me,"sortable"),o(ve,"stackable"),o(ge,"striped"),o(fe,"structured"),o(Pe,"unstackable"),M(a,"attached"),M(n,"basic"),M(d,"compact"),M(R,"padded"),Z(be),q(ye),se(m,"column"),"table",i),Q=x(u,e),X=O(u,e);if(!V(l))return s.createElement(X,y({},Q,{className:J}),l);var pe=g||h,Y={defaultProps:{cellAs:"th"}},Ee=pe&&s.createElement(I,null,P.create(g,Y),z(h,function(W){return P.create(W,Y)}));return s.createElement(X,y({},Q,{className:J}),Ee,s.createElement(C,null,N&&z(he,function(W,we){return P.create(N(W,we))})),b&&s.createElement(S,null,P.create(b)))}u.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"];u.defaultProps={as:"table"};u.propTypes={};u.Body=C;u.Cell=w;u.Footer=S;u.Header=I;u.HeaderCell=K;u.Row=P;const _=25,ma=e=>{const{dir:a,path:n,setFilePath:t}=e,[l,i]=re.useState(0),r=Object.keys(a.dirs).sort(),c=Object.keys(a.files).sort(),m=[...r,...c];return s.createElement("div",{"data-test-weave-id":"dir",style:{height:"100%",width:"100%",overflow:"auto"}},s.createElement(u,{unstackable:!0,selectable:!0,className:"file-browser-table"},s.createElement(u.Body,null,m.slice(l,l+_).map(d=>{if(a.dirs[d]!=null)return s.createElement(va,{key:"folder-"+d,dir:a.dirs[d],dirName:d,path:n,setFilePath:t});{const v=a.files[d];return s.createElement(ga,{key:"file-"+d,fileName:d,file:v,path:n,setFilePath:t})}}))),m.length>_&&s.createElement("div",{style:{display:"flex",justifyContent:"center"}},s.createElement(T,{defaultActivePage:1,totalPages:Math.ceil(m.length/_),onPageChange:(d,v)=>{const f=v.activePage;f!=null&&je.isNumber(f)&&i((f-1)*_)},size:"small"})))},va=e=>{const{dir:a,dirName:n,path:t,setFilePath:l}=e,i=Object.keys(a.dirs).length,r=Object.keys(a.files).length,c=t?.concat([n])??[n];return s.createElement(u.Row,{className:"file-browser-folder",onClick:()=>l(c)},s.createElement(u.Cell,{className:"folder-name-cell"},s.createElement("div",{className:"file-browser-name-cell-wrapper"},s.createElement($,{className:"file-browser-icon",name:"folder"}),s.createElement("span",{className:"file-browser-folder-name"},n)," /")),s.createElement(u.Cell,{className:"file-link-cell"}),s.createElement(u.Cell,{className:"file-size-cell"},oe(a.size).format("0.0b")),s.createElement(u.Cell,{className:"contents-cell"},i!==0&&i+(i===1?" subfolder, ":" subfolders, "),r+(r===1?" file":" files")))},ga=e=>{const{file:a,fileName:n,path:t,setFilePath:l}=e,i=t?.concat([n])??[n],r=fa(n);return s.createElement(u.Row,{onClick:()=>{a.ref?a.ref.startsWith("http://")&&window.open(a.ref):l(i)}},s.createElement(u.Cell,{className:"file-name-cell"},s.createElement("div",{className:"file-browser-name-cell-wrapper"},a.ref!=null?s.createElement(ce,{style:{color:Le,width:28},name:"arrow alternate circle right outline"}):s.createElement($,{className:"file-browser-icon",name:r}),s.createElement("span",{className:"file-browser-file-name"},n.split("/").pop()))),s.createElement(u.Cell,{className:"file-link-cell"},a.ref??""),s.createElement(u.Cell,{className:"file-size-cell"},oe(a.size).format("0.0b")),s.createElement(u.Cell,{className:"file-download-cell"},s.createElement("a",{href:a.url,download:n,onClick:c=>c.stopPropagation()},s.createElement($,{name:"download"}))))};function fa(e){switch(Me(e)){case"md":return"file-markdown";case"log":case"text":case"txt":return"file";case"js":case"css":case"patch":case"json":case"sh":return"file-code";case"ipynb":case"py":return"file-python";case"yml":case"yaml":case"xml":case"html":case"htm":return"file-yaml";case"jpg":case"jpeg":case"png":case".tiff":case".tif":case".gif":return"file-image"}return"file"}const ba=e=>{const a=e.input,n=De({dir:Fe({file:a})}),t=ze(n);if(t.loading)return s.createElement(Oe,null);if(t.result==null)return s.createElement("div",null);const l=t.result;return s.createElement(ma,{dir:l,path:e.context?.path,setFilePath:i=>{e.updateInput!=null?e.updateInput(Ke({input:{type:"dir"}},({input:r})=>_e({dir:r,path:Ge(i.join("/"))})).val):e.updateContext({path:i})}})};export{ba as default};
//# sourceMappingURL=Component-CzgvBvFq.js.map
