[features]
python = [ "dep:pyo3", "dep:pyo3-log", "daft-core/python", "daft-csv/python", "daft-dsl/python", "daft-local-execution/python", "daft-io/python", "daft-image/python", "daft-json/python", "daft-micropartition/python", "daft-parquet/python", "daft-plan/python", "daft-scan/python", "daft-scheduler/python", "daft-stats/python", "daft-sql/python", "daft-table/python", "daft-functions/python", "daft-functions-json/python", "common-daft-config/python", "common-system-info/python", "common-display/python", "common-resource-request/python",]

[lib]
crate-type = [ "cdylib",]
name = "daft"

[package]
edition = "2021"
name = "daft"
publish = false
version = "0.3.5"

[workspace]

[dependencies.common-daft-config]
path = "src/common/daft-config"
default-features = false

[dependencies.common-display]
path = "src/common/display"
default-features = false

[dependencies.common-file-formats]
path = "src/common/file-formats"
default-features = false

[dependencies.common-hashable-float-wrapper]
path = "src/common/hashable-float-wrapper"
default-features = false

[dependencies.common-resource-request]
path = "src/common/resource-request"
default-features = false

[dependencies.common-system-info]
path = "src/common/system-info"
default-features = false

[dependencies.common-tracing]
path = "src/common/tracing"
default-features = false

[dependencies.common-version]
path = "src/common/version"
default-features = false

[dependencies.daft-compression]
path = "src/daft-compression"
default-features = false

[dependencies.daft-core]
path = "src/daft-core"
default-features = false

[dependencies.daft-csv]
path = "src/daft-csv"
default-features = false

[dependencies.daft-dsl]
path = "src/daft-dsl"
default-features = false

[dependencies.daft-functions]
path = "src/daft-functions"
default-features = false

[dependencies.daft-functions-json]
path = "src/daft-functions-json"
default-features = false

[dependencies.daft-image]
path = "src/daft-image"
default-features = false

[dependencies.daft-io]
path = "src/daft-io"
default-features = false

[dependencies.daft-json]
path = "src/daft-json"
default-features = false

[dependencies.daft-local-execution]
path = "src/daft-local-execution"
default-features = false

[dependencies.daft-micropartition]
path = "src/daft-micropartition"
default-features = false

[dependencies.daft-minhash]
path = "src/daft-minhash"
default-features = false

[dependencies.daft-parquet]
path = "src/daft-parquet"
default-features = false

[dependencies.daft-plan]
path = "src/daft-plan"
default-features = false

[dependencies.daft-scan]
path = "src/daft-scan"
default-features = false

[dependencies.daft-scheduler]
path = "src/daft-scheduler"
default-features = false

[dependencies.daft-sql]
path = "src/daft-sql"
default-features = false

[dependencies.daft-stats]
path = "src/daft-stats"
default-features = false

[dependencies.daft-table]
path = "src/daft-table"
default-features = false

[dependencies.lazy_static]
workspace = true

[dependencies.log]
workspace = true

[dependencies.lzma-sys]
version = "*"
features = [ "static",]

[dependencies.pyo3]
workspace = true
optional = true

[dependencies.pyo3-log]
workspace = true
optional = true

[dependencies.sysinfo]
workspace = true

[profile.bench]
debug = true

[profile.dev]
debug = "line-tables-only"
overflow-checks = false

[profile.dev-bench]
codegen-units = 16
debug = 1
inherits = "release"
lto = "thin"
strip = "none"

[profile.release-lto]
codegen-units = 1
inherits = "release"
lto = "fat"

[profile.rust-analyzer]
inherits = "dev"

[workspace.dependencies]
async-compat = "0.2.3"
async-stream = "0.3.5"
async-trait = "0.1.79"
base64 = "0.22.1"
bytes = "1.6.0"
chrono = "0.4.38"
chrono-tz = "0.8.4"
comfy-table = "7.1.1"
derivative = "2.2.0"
dyn-clone = "1"
futures = "0.3.30"
html-escape = "0.2.13"
indexmap = "2.1.0"
itertools = "0.11"
jaq-core = "1.2.0"
jaq-interpret = "1.2.0"
jaq-parse = "1.0.0"
jaq-std = "1.2.0"
num-derive = "0.3.3"
num-traits = "0.2"
once_cell = "1.19.0"
path_macro = "1.0.0"
pretty_assertions = "1.4.0"
rand = "^0.8"
rayon = "1.10.0"
regex = "1.10.4"
rstest = "0.18.2"
serde_json = "1.0.116"
sqlparser = "0.51.0"
sysinfo = "0.30.12"
test-log = "0.2.16"
thiserror = "1.0.63"
tiktoken-rs = "0.5.9"
tokio-util = "0.7.11"
tracing = "0.1"
url = "2.4.0"

[workspace.package]
edition = "2021"
version = "0.3.5"

[package.metadata.cargo-machete]
ignored = [ "lzma-sys",]

[patch.crates-io.arrow2]
path = "src/arrow2"

[patch.crates-io.parquet2]
path = "src/parquet2"

[profile.dev.build-override]
opt-level = 3

[workspace.dependencies.async-compression]
version = "0.4.12"
features = [ "tokio", "all-algorithms",]

[workspace.dependencies.sketches-ddsketch]
version = "0.2.2"
features = [ "use_serde",]

[workspace.dependencies.snafu]
version = "0.7.4"
features = [ "futures",]

[workspace.dependencies.tokio]
version = "1.37.0"
features = [ "net", "time", "bytes", "process", "signal", "macros", "rt", "rt-multi-thread",]

[workspace.dependencies.tokio-stream]
version = "0.1.14"
features = [ "fs", "io-util", "time",]

[workspace.dependencies.arrow2]
path = "src/arrow2"

[workspace.dependencies.bincode]
version = "1.3.3"

[workspace.dependencies.derive_more]
features = [ "display",]
version = "1.0.0"

[workspace.dependencies.lazy_static]
version = "1.4.0"

[workspace.dependencies.log]
features = [ "std",]
version = "0.4.19"

[workspace.dependencies.parquet2]
features = [ "async",]
path = "src/parquet2"

[workspace.dependencies.pyo3]
features = [ "extension-module", "multiple-pymethods", "abi3-py38", "indexmap",]
version = "0.21.0"

[workspace.dependencies.pyo3-log]
version = "0.11.0"

[workspace.dependencies.serde]
features = [ "derive", "rc",]
version = "1.0.200"

[workspace.lints.clippy]
use-self = "deny"

[target."cfg(not(target_env = \"msvc\"))".dependencies.libc]
version = "^0.2.150"
default-features = false

[target."cfg(not(target_env = \"msvc\"))".dependencies.tikv-jemallocator]
version = "0.5.4"
features = [ "disable_initial_exec_tls",]
