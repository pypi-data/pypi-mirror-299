/*! For license information please see 48569.WfXSHUBLxsM.js.LICENSE.txt */
"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[48569],{74455:function(t,e,n){var i=n(35806),a=n(71008),o=n(62193),r=n(2816),c=n(27927),s=(n(81027),n(14565)),u=n(29818);(0,c.A)([(0,u.EM)("ha-chip-set")],(function(t,e){var n=function(e){function n(){var e;(0,a.A)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return e=(0,o.A)(this,n,[].concat(r)),t(e),e}return(0,r.A)(n,e),(0,i.A)(n)}(e);return{F:n,d:[]}}),s.Y)},31338:function(t,e,n){n.d(e,{I$:function(){return l},I3:function(){return g},PV:function(){return m},Po:function(){return v},RK:function(){return b},TB:function(){return h},TH:function(){return A},T_:function(){return k},am:function(){return c},jR:function(){return d},ng:function(){return s},nx:function(){return _},o9:function(){return u}});var i=n(91001),a=(n(81027),n(82386),n(50693),n(21631),n(36604),n(19244)),o=n(81771),r=n(94929),c=function(t,e){return t.callWS({type:"device_automation/action/list",device_id:e})},s=function(t,e){return t.callWS({type:"device_automation/condition/list",device_id:e})},u=function(t,e){return t.callWS({type:"device_automation/trigger/list",device_id:e}).then((function(t){return(0,o.vO)(t)}))},d=function(t,e){return t.callWS({type:"device_automation/action/capabilities",action:e})},l=function(t,e){return t.callWS({type:"device_automation/condition/capabilities",condition:e})},h=function(t,e){return t.callWS({type:"device_automation/trigger/capabilities",trigger:e})},f=["device_id","domain","entity_id","type","subtype","event","condition","trigger"],v=function(t,e,n){if((0,i.A)(e)!==(0,i.A)(n))return!1;for(var a in e){var o,r;if(f.includes(a))if("entity_id"!==a||(null===(o=e[a])||void 0===o?void 0:o.includes("."))===(null===(r=n[a])||void 0===r?void 0:r.includes("."))){if(!Object.is(e[a],n[a]))return!1}else if(!y(t,e[a],n[a]))return!1}for(var c in n){var s,u;if(f.includes(c))if("entity_id"!==c||(null===(s=e[c])||void 0===s?void 0:s.includes("."))===(null===(u=n[c])||void 0===u?void 0:u.includes("."))){if(!Object.is(e[c],n[c]))return!1}else if(!y(t,e[c],n[c]))return!1}return!0},y=function(t,e,n){return!(!e||!n)&&(e.includes(".")&&(e=(0,r.Ox)(t)[e].id),n.includes(".")&&(n=(0,r.Ox)(t)[n].id),e===n)},p=function(t,e,n){if(!n)return"<"+t.localize("ui.panel.config.automation.editor.unknown_entity")+">";if(n.includes(".")){var i=t.states[n];return i?(0,a.u)(i):n}var o=(0,r.P9)(e)[n];return o?(0,r.jh)(t,o)||n:"<"+t.localize("ui.panel.config.automation.editor.unknown_entity")+">"},m=function(t,e,n){return t.localize("component.".concat(n.domain,".device_automation.action_type.").concat(n.type),{entity_name:p(t,e,n.entity_id),subtype:n.subtype?t.localize("component.".concat(n.domain,".device_automation.action_subtype.").concat(n.subtype))||n.subtype:""})||(n.subtype?'"'.concat(n.subtype,'" ').concat(n.type):n.type)},g=function(t,e,n){return t.localize("component.".concat(n.domain,".device_automation.condition_type.").concat(n.type),{entity_name:p(t,e,n.entity_id),subtype:n.subtype?t.localize("component.".concat(n.domain,".device_automation.condition_subtype.").concat(n.subtype))||n.subtype:""})||(n.subtype?'"'.concat(n.subtype,'" ').concat(n.type):n.type)},_=function(t,e,n){return t.localize("component.".concat(n.domain,".device_automation.trigger_type.").concat(n.type),{entity_name:p(t,e,n.entity_id),subtype:n.subtype?t.localize("component.".concat(n.domain,".device_automation.trigger_subtype.").concat(n.subtype))||n.subtype:""})||(n.subtype?'"'.concat(n.subtype,'" ').concat(n.type):n.type)},k=function(t,e){return function(n){return t.localize("component.".concat(e.domain,".device_automation.extra_fields.").concat(n.name))||n.name}},A=function(t,e){return function(n){return t.localize("component.".concat(e.domain,".device_automation.extra_fields_descriptions.").concat(n.name))}},b=function(t,e){var n,i,a,o;return null===(n=t.metadata)||void 0===n||!n.secondary||null!==(i=e.metadata)&&void 0!==i&&i.secondary?null!==(a=t.metadata)&&void 0!==a&&a.secondary||null===(o=e.metadata)||void 0===o||!o.secondary?0:-1:1}},48569:function(t,e,n){n.r(e),n.d(e,{DialogDeviceAutomation:function(){return D}});var i,a,o,r,c,s,u,d,l,h=n(64599),f=n(33994),v=n(22858),y=n(35806),p=n(71008),m=n(62193),g=n(2816),_=n(27927),k=n(35890),A=(n(81027),n(33231),n(54838),n(15112)),b=n(29818),w=n(34897),x=(n(3276),n(31338)),z=n(55321),S=(n(13025),n(97741),n(26098),n(39790),n(253),n(2075),n(16891),n(83546),n(74455),n(81771)),I=n(55979),R=(0,_.A)(null,(function(t,e){return{F:function(e){function n(e){var i;return(0,p.A)(this,n),(i=(0,m.A)(this,n)).headerKey=void 0,i.type=void 0,t(i),i._localizeDeviceAutomation=e,i}return(0,g.A)(n,e),(0,y.A)(n)}(e),d:[{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.MZ)()],key:"deviceId",value:void 0},{kind:"field",decorators:[(0,b.MZ)({type:Boolean})],key:"script",value:function(){return!1}},{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"automations",value:function(){return[]}},{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"entityReg",value:void 0},{kind:"field",decorators:[(0,b.wk)()],key:"_showSecondary",value:function(){return!1}},{kind:"field",key:"_localizeDeviceAutomation",value:void 0},{kind:"method",key:"shouldUpdate",value:function(t){if(t.has("deviceId")||t.has("automations"))return!0;var e=t.get("hass");return!e||e.language!==this.hass.language}},{kind:"method",key:"render",value:function(){var t=this;if(0===this.automations.length||!this.entityReg)return A.s6;var e=this._showSecondary?this.automations:this.automations.filter((function(t){var e;return!1===(null===(e=t.metadata)||void 0===e?void 0:e.secondary)}));return(0,A.qy)(i||(i=(0,h.A)([" <h3>",'</h3> <div class="content"> <ha-chip-set> '," </ha-chip-set> "," </div> "])),this.hass.localize(this.headerKey),e.map((function(e,n){var i;return(0,A.qy)(a||(a=(0,h.A)([' <ha-assist-chip filled .index="','" @click="','" class="','" .label="','"> </ha-assist-chip> '])),n,t._handleAutomationClicked,null!==(i=e.metadata)&&void 0!==i&&i.secondary?"secondary":"",t._localizeDeviceAutomation(t.hass,t.entityReg,e))})),!this._showSecondary&&e.length<this.automations.length?(0,A.qy)(o||(o=(0,h.A)(['<button class="link" @click="','"> Show '," more... </button>"])),this._toggleSecondary,this.automations.length-e.length):"")}},{kind:"method",key:"_toggleSecondary",value:function(){this._showSecondary=!this._showSecondary}},{kind:"method",key:"_handleAutomationClicked",value:function(t){var e=Object.assign({},this.automations[t.currentTarget.index]);if(e){if(delete e.metadata,this.script)return(0,I.AM)({sequence:[e]}),void(0,w.r)(this,"entry-selected");var n={};n[this.type]=[e],(0,S.mX)(n),(0,w.r)(this,"entry-selected")}}},{kind:"field",static:!0,key:"styles",value:function(){return[z.og,(0,A.AH)(r||(r=(0,h.A)(["h3{color:var(--primary-text-color)}.secondary{--ha-assist-chip-filled-container-color:rgba(\n          var(--rgb-primary-text-color),\n          0.07\n        )}button.link{color:var(--primary-color)}"])))]}}]}}),A.WF),D=((0,_.A)([(0,b.EM)("ha-device-actions-card")],(function(t,e){return{F:function(e){function n(){var e;return(0,p.A)(this,n),e=(0,m.A)(this,n,[x.PV]),t(e),e}return(0,g.A)(n,e),(0,y.A)(n)}(e),d:[{kind:"field",key:"type",value:function(){return"action"}},{kind:"field",key:"headerKey",value:function(){return"ui.panel.config.devices.automation.actions.caption"}}]}}),R),(0,_.A)([(0,b.EM)("ha-device-conditions-card")],(function(t,e){return{F:function(e){function n(){var e;return(0,p.A)(this,n),e=(0,m.A)(this,n,[x.I3]),t(e),e}return(0,g.A)(n,e),(0,y.A)(n)}(e),d:[{kind:"field",key:"type",value:function(){return"condition"}},{kind:"field",key:"headerKey",value:function(){return"ui.panel.config.devices.automation.conditions.caption"}}]}}),R),(0,_.A)([(0,b.EM)("ha-device-triggers-card")],(function(t,e){return{F:function(e){function n(){var e;return(0,p.A)(this,n),e=(0,m.A)(this,n,[x.nx]),t(e),e}return(0,g.A)(n,e),(0,y.A)(n)}(e),d:[{kind:"field",key:"type",value:function(){return"trigger"}},{kind:"field",key:"headerKey",value:function(){return"ui.panel.config.devices.automation.triggers.caption"}}]}}),R),(0,_.A)([(0,b.EM)("dialog-device-automation")],(function(t,e){var n,i=function(e){function n(){var e;(0,p.A)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=(0,m.A)(this,n,[].concat(a)),t(e),e}return(0,g.A)(n,e),(0,y.A)(n)}(e);return{F:i,d:[{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.wk)()],key:"_triggers",value:function(){return[]}},{kind:"field",decorators:[(0,b.wk)()],key:"_conditions",value:function(){return[]}},{kind:"field",decorators:[(0,b.wk)()],key:"_actions",value:function(){return[]}},{kind:"field",decorators:[(0,b.wk)()],key:"_params",value:void 0},{kind:"method",key:"showDialog",value:(n=(0,v.A)((0,f.A)().mark((function t(e){return(0,f.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._params=e,t.next=3,this.updateComplete;case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,(0,w.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"firstUpdated",value:function(t){(0,k.A)(i,"firstUpdated",this,3)([t]),this.hass.loadBackendTranslation("device_automation")}},{kind:"method",key:"updated",value:function(t){var e=this;if((0,k.A)(i,"updated",this,3)([t]),t.has("_params")&&(this._triggers=[],this._conditions=[],this._actions=[],this._params)){var n=this._params,a=n.device,o=n.script;(0,x.am)(this.hass,a.id).then((function(t){e._actions=t.sort(x.RK)})),o||((0,x.o9)(this.hass,a.id).then((function(t){e._triggers=t.sort(x.RK)})),(0,x.ng)(this.hass,a.id).then((function(t){e._conditions=t.sort(x.RK)})))}}},{kind:"method",key:"render",value:function(){return this._params?(0,A.qy)(c||(c=(0,h.A)([' <ha-dialog open @closed="','" .heading="','"> <div @entry-selected="','"> ',' </div> <mwc-button slot="primaryAction" @click="','"> '," </mwc-button> </ha-dialog> "])),this.closeDialog,this.hass.localize("ui.panel.config.devices.".concat(this._params.script?"script":"automation",".create"),{type:this.hass.localize("ui.panel.config.devices.type.".concat(this._params.device.entry_type||"device"))}),this.closeDialog,this._triggers.length||this._conditions.length||this._actions.length?(0,A.qy)(s||(s=(0,h.A)([" "," "," "," "])),this._triggers.length?(0,A.qy)(u||(u=(0,h.A)([' <ha-device-triggers-card .hass="','" .automations="','" .entityReg="','"></ha-device-triggers-card> '])),this.hass,this._triggers,this._params.entityReg):"",this._conditions.length?(0,A.qy)(d||(d=(0,h.A)([' <ha-device-conditions-card .hass="','" .automations="','" .entityReg="','"></ha-device-conditions-card> '])),this.hass,this._conditions,this._params.entityReg):"",this._actions.length?(0,A.qy)(l||(l=(0,h.A)([' <ha-device-actions-card .hass="','" .automations="','" .script="','" .entityReg="','"></ha-device-actions-card> '])),this.hass,this._actions,this._params.script,this._params.entityReg):""):this.hass.localize("ui.panel.config.devices.automation.no_device_automations"),this.closeDialog,this.hass.localize("ui.common.close")):A.s6}},{kind:"get",static:!0,key:"styles",value:function(){return z.nA}}]}}),A.WF))},14565:function(t,e,n){n.d(e,{Y:function(){return m}});var i,a,o=n(35806),r=n(71008),c=n(62193),s=n(2816),u=n(79192),d=n(29818),l=n(64782),h=n(64599),f=(n(13025),n(44124),n(39805),n(39790),n(253),n(2075),n(94438),n(55815),n(15112)),v=n(40141),y=function(t){function e(){var t;return(0,r.A)(this,e),(t=(0,c.A)(this,e)).internals=t.attachInternals(),f.S$||(t.addEventListener("focusin",t.updateTabIndices.bind(t)),t.addEventListener("update-focus",t.updateTabIndices.bind(t)),t.addEventListener("keydown",t.handleKeyDown.bind(t)),t.internals.role="toolbar"),t}return(0,s.A)(e,t),(0,o.A)(e,[{key:"chips",get:function(){return this.childElements.filter((function(t){return t instanceof v.v}))}},{key:"render",value:function(){return(0,f.qy)(i||(i=(0,h.A)(['<slot @slotchange="','"></slot>'])),this.updateTabIndices)}},{key:"handleKeyDown",value:function(t){var e="ArrowLeft"===t.key,n="ArrowRight"===t.key,i="Home"===t.key,a="End"===t.key;if(e||n||i||a){var o=this.chips;if(!(o.length<2)){if(t.preventDefault(),i||a)return o[i?0:o.length-1].focus({trailing:a}),void this.updateTabIndices();var r="rtl"===getComputedStyle(this).direction?e:n,c=o.find((function(t){return t.matches(":focus-within")}));if(!c)return(r?o[0]:o[o.length-1]).focus({trailing:!r}),void this.updateTabIndices();for(var s=o.indexOf(c),u=r?s+1:s-1;u!==s;){u>=o.length?u=0:u<0&&(u=o.length-1);var d=o[u];if(!d.disabled||d.alwaysFocusable){d.focus({trailing:!r}),this.updateTabIndices();break}r?u++:u--}}}}},{key:"updateTabIndices",value:function(){var t,e,n=this.chips,i=(0,l.A)(n);try{for(i.s();!(e=i.n()).done;){var a=e.value,o=a.alwaysFocusable||!a.disabled;a.matches(":focus-within")&&o?t=a:(o&&!t&&(t=a),a.tabIndex=-1)}}catch(r){i.e(r)}finally{i.f()}t&&(t.tabIndex=0)}}])}(f.WF);(0,u.__decorate)([(0,d.KN)()],y.prototype,"childElements",void 0);var p=(0,f.AH)(a||(a=(0,h.A)([":host{display:flex;flex-wrap:wrap;gap:8px}"]))),m=function(t){function e(){return(0,r.A)(this,e),(0,c.A)(this,e,arguments)}return(0,s.A)(e,t),(0,o.A)(e)}(y);m.styles=[p],m=(0,u.__decorate)([(0,d.EM)("md-chip-set")],m)}}]);
//# sourceMappingURL=48569.WfXSHUBLxsM.js.map