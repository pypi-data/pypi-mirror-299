/*! For license information please see 48569.rU9FvBINAIU.js.LICENSE.txt */
export const id=48569;export const ids=[48569];export const modules={74455:(t,e,i)=>{var a=i(36312),n=i(14565),s=i(77706);(0,a.A)([(0,s.EM)("ha-chip-set")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[]}}),n.Y)},31338:(t,e,i)=>{i.d(e,{I$:()=>l,I3:()=>g,PV:()=>v,Po:()=>y,RK:()=>b,TB:()=>u,TH:()=>k,T_:()=>_,am:()=>o,jR:()=>r,ng:()=>d,nx:()=>f,o9:()=>c});var a=i(19244),n=i(81771),s=i(94929);const o=(t,e)=>t.callWS({type:"device_automation/action/list",device_id:e}),d=(t,e)=>t.callWS({type:"device_automation/condition/list",device_id:e}),c=(t,e)=>t.callWS({type:"device_automation/trigger/list",device_id:e}).then((t=>(0,n.vO)(t))),r=(t,e)=>t.callWS({type:"device_automation/action/capabilities",action:e}),l=(t,e)=>t.callWS({type:"device_automation/condition/capabilities",condition:e}),u=(t,e)=>t.callWS({type:"device_automation/trigger/capabilities",trigger:e}),h=["device_id","domain","entity_id","type","subtype","event","condition","trigger"],y=(t,e,i)=>{if(typeof e!=typeof i)return!1;for(const a in e)if(h.includes(a))if("entity_id"!==a||e[a]?.includes(".")===i[a]?.includes(".")){if(!Object.is(e[a],i[a]))return!1}else if(!p(t,e[a],i[a]))return!1;for(const a in i)if(h.includes(a))if("entity_id"!==a||e[a]?.includes(".")===i[a]?.includes(".")){if(!Object.is(e[a],i[a]))return!1}else if(!p(t,e[a],i[a]))return!1;return!0},p=(t,e,i)=>!(!e||!i)&&(e.includes(".")&&(e=(0,s.Ox)(t)[e].id),i.includes(".")&&(i=(0,s.Ox)(t)[i].id),e===i),m=(t,e,i)=>{if(!i)return"<"+t.localize("ui.panel.config.automation.editor.unknown_entity")+">";if(i.includes(".")){const e=t.states[i];return e?(0,a.u)(e):i}const n=(0,s.P9)(e)[i];return n?(0,s.jh)(t,n)||i:"<"+t.localize("ui.panel.config.automation.editor.unknown_entity")+">"},v=(t,e,i)=>t.localize(`component.${i.domain}.device_automation.action_type.${i.type}`,{entity_name:m(t,e,i.entity_id),subtype:i.subtype?t.localize(`component.${i.domain}.device_automation.action_subtype.${i.subtype}`)||i.subtype:""})||(i.subtype?`"${i.subtype}" ${i.type}`:i.type),g=(t,e,i)=>t.localize(`component.${i.domain}.device_automation.condition_type.${i.type}`,{entity_name:m(t,e,i.entity_id),subtype:i.subtype?t.localize(`component.${i.domain}.device_automation.condition_subtype.${i.subtype}`)||i.subtype:""})||(i.subtype?`"${i.subtype}" ${i.type}`:i.type),f=(t,e,i)=>t.localize(`component.${i.domain}.device_automation.trigger_type.${i.type}`,{entity_name:m(t,e,i.entity_id),subtype:i.subtype?t.localize(`component.${i.domain}.device_automation.trigger_subtype.${i.subtype}`)||i.subtype:""})||(i.subtype?`"${i.subtype}" ${i.type}`:i.type),_=(t,e)=>i=>t.localize(`component.${e.domain}.device_automation.extra_fields.${i.name}`)||i.name,k=(t,e)=>i=>t.localize(`component.${e.domain}.device_automation.extra_fields_descriptions.${i.name}`),b=(t,e)=>t.metadata?.secondary&&!e.metadata?.secondary?1:!t.metadata?.secondary&&e.metadata?.secondary?-1:0},48569:(t,e,i)=>{i.r(e),i.d(e,{DialogDeviceAutomation:()=>y});var a=i(36312),n=i(68689),s=(i(72606),i(15112)),o=i(77706),d=i(34897),c=(i(3276),i(31338)),r=i(55321),l=(i(253),i(2075),i(16891),i(83546),i(74455),i(81771)),u=i(55979);let h=(0,a.A)(null,(function(t,e){return{F:class extends e{constructor(e){super(),this.headerKey=void 0,this.type=void 0,t(this),this._localizeDeviceAutomation=e}},d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"deviceId",value:void 0},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"script",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"automations",value:()=>[]},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"entityReg",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_showSecondary",value:()=>!1},{kind:"field",key:"_localizeDeviceAutomation",value:void 0},{kind:"method",key:"shouldUpdate",value:function(t){if(t.has("deviceId")||t.has("automations"))return!0;const e=t.get("hass");return!e||e.language!==this.hass.language}},{kind:"method",key:"render",value:function(){if(0===this.automations.length||!this.entityReg)return s.s6;const t=this._showSecondary?this.automations:this.automations.filter((t=>!1===t.metadata?.secondary));return s.qy` <h3>${this.hass.localize(this.headerKey)}</h3> <div class="content"> <ha-chip-set> ${t.map(((t,e)=>s.qy` <ha-assist-chip filled .index="${e}" @click="${this._handleAutomationClicked}" class="${t.metadata?.secondary?"secondary":""}" .label="${this._localizeDeviceAutomation(this.hass,this.entityReg,t)}"> </ha-assist-chip> `))} </ha-chip-set> ${!this._showSecondary&&t.length<this.automations.length?s.qy`<button class="link" @click="${this._toggleSecondary}"> Show ${this.automations.length-t.length} more... </button>`:""} </div> `}},{kind:"method",key:"_toggleSecondary",value:function(){this._showSecondary=!this._showSecondary}},{kind:"method",key:"_handleAutomationClicked",value:function(t){const e={...this.automations[t.currentTarget.index]};if(!e)return;if(delete e.metadata,this.script)return(0,u.AM)({sequence:[e]}),void(0,d.r)(this,"entry-selected");const i={};i[this.type]=[e],(0,l.mX)(i),(0,d.r)(this,"entry-selected")}},{kind:"field",static:!0,key:"styles",value:()=>[r.og,s.AH`h3{color:var(--primary-text-color)}.secondary{--ha-assist-chip-filled-container-color:rgba(
          var(--rgb-primary-text-color),
          0.07
        )}button.link{color:var(--primary-color)}`]}]}}),s.WF),y=((0,a.A)([(0,o.EM)("ha-device-actions-card")],(function(t,e){return{F:class extends e{constructor(){super(c.PV),t(this)}},d:[{kind:"field",key:"type",value:()=>"action"},{kind:"field",key:"headerKey",value:()=>"ui.panel.config.devices.automation.actions.caption"}]}}),h),(0,a.A)([(0,o.EM)("ha-device-conditions-card")],(function(t,e){return{F:class extends e{constructor(){super(c.I3),t(this)}},d:[{kind:"field",key:"type",value:()=>"condition"},{kind:"field",key:"headerKey",value:()=>"ui.panel.config.devices.automation.conditions.caption"}]}}),h),(0,a.A)([(0,o.EM)("ha-device-triggers-card")],(function(t,e){return{F:class extends e{constructor(){super(c.nx),t(this)}},d:[{kind:"field",key:"type",value:()=>"trigger"},{kind:"field",key:"headerKey",value:()=>"ui.panel.config.devices.automation.triggers.caption"}]}}),h),(0,a.A)([(0,o.EM)("dialog-device-automation")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_triggers",value:()=>[]},{kind:"field",decorators:[(0,o.wk)()],key:"_conditions",value:()=>[]},{kind:"field",decorators:[(0,o.wk)()],key:"_actions",value:()=>[]},{kind:"field",decorators:[(0,o.wk)()],key:"_params",value:void 0},{kind:"method",key:"showDialog",value:async function(t){this._params=t,await this.updateComplete}},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,(0,d.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"firstUpdated",value:function(t){(0,n.A)(i,"firstUpdated",this,3)([t]),this.hass.loadBackendTranslation("device_automation")}},{kind:"method",key:"updated",value:function(t){if((0,n.A)(i,"updated",this,3)([t]),!t.has("_params"))return;if(this._triggers=[],this._conditions=[],this._actions=[],!this._params)return;const{device:e,script:a}=this._params;(0,c.am)(this.hass,e.id).then((t=>{this._actions=t.sort(c.RK)})),a||((0,c.o9)(this.hass,e.id).then((t=>{this._triggers=t.sort(c.RK)})),(0,c.ng)(this.hass,e.id).then((t=>{this._conditions=t.sort(c.RK)})))}},{kind:"method",key:"render",value:function(){return this._params?s.qy` <ha-dialog open @closed="${this.closeDialog}" .heading="${this.hass.localize(`ui.panel.config.devices.${this._params.script?"script":"automation"}.create`,{type:this.hass.localize(`ui.panel.config.devices.type.${this._params.device.entry_type||"device"}`)})}"> <div @entry-selected="${this.closeDialog}"> ${this._triggers.length||this._conditions.length||this._actions.length?s.qy` ${this._triggers.length?s.qy` <ha-device-triggers-card .hass="${this.hass}" .automations="${this._triggers}" .entityReg="${this._params.entityReg}"></ha-device-triggers-card> `:""} ${this._conditions.length?s.qy` <ha-device-conditions-card .hass="${this.hass}" .automations="${this._conditions}" .entityReg="${this._params.entityReg}"></ha-device-conditions-card> `:""} ${this._actions.length?s.qy` <ha-device-actions-card .hass="${this.hass}" .automations="${this._actions}" .script="${this._params.script}" .entityReg="${this._params.entityReg}"></ha-device-actions-card> `:""} `:this.hass.localize("ui.panel.config.devices.automation.no_device_automations")} </div> <mwc-button slot="primaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.common.close")} </mwc-button> </ha-dialog> `:s.s6}},{kind:"get",static:!0,key:"styles",value:function(){return r.nA}}]}}),s.WF))},14565:(t,e,i)=>{i.d(e,{Y:()=>r});var a=i(79192),n=i(77706),s=(i(55815),i(253),i(2075),i(94438),i(15112)),o=i(40141);class d extends s.WF{get chips(){return this.childElements.filter((t=>t instanceof o.v))}constructor(){super(),this.internals=this.attachInternals(),s.S$||(this.addEventListener("focusin",this.updateTabIndices.bind(this)),this.addEventListener("update-focus",this.updateTabIndices.bind(this)),this.addEventListener("keydown",this.handleKeyDown.bind(this)),this.internals.role="toolbar")}render(){return s.qy`<slot @slotchange="${this.updateTabIndices}"></slot>`}handleKeyDown(t){const e="ArrowLeft"===t.key,i="ArrowRight"===t.key,a="Home"===t.key,n="End"===t.key;if(!(e||i||a||n))return;const{chips:s}=this;if(s.length<2)return;if(t.preventDefault(),a||n){return s[a?0:s.length-1].focus({trailing:n}),void this.updateTabIndices()}const o="rtl"===getComputedStyle(this).direction?e:i,d=s.find((t=>t.matches(":focus-within")));if(!d){return(o?s[0]:s[s.length-1]).focus({trailing:!o}),void this.updateTabIndices()}const c=s.indexOf(d);let r=o?c+1:c-1;for(;r!==c;){r>=s.length?r=0:r<0&&(r=s.length-1);const t=s[r];if(!t.disabled||t.alwaysFocusable){t.focus({trailing:!o}),this.updateTabIndices();break}o?r++:r--}}updateTabIndices(){const{chips:t}=this;let e;for(const i of t){const t=i.alwaysFocusable||!i.disabled;i.matches(":focus-within")&&t?e=i:(t&&!e&&(e=i),i.tabIndex=-1)}e&&(e.tabIndex=0)}}(0,a.__decorate)([(0,n.KN)()],d.prototype,"childElements",void 0);const c=s.AH`:host{display:flex;flex-wrap:wrap;gap:8px}`;let r=class extends d{};r.styles=[c],r=(0,a.__decorate)([(0,n.EM)("md-chip-set")],r)}};
//# sourceMappingURL=48569.rU9FvBINAIU.js.map