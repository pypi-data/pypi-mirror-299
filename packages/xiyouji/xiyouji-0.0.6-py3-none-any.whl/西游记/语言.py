from rply import 分词器母机, 语法分析器母机

分词母机 = 分词器母机()
分词母机.添了('几个', '\s*中有几个字母')
分词母机.添了('前引号', '“')
分词母机.添了('后引号', '”')
分词母机.添了('字符串', r'[a-z]+')

分析器母机 = 语法分析器母机(['几个', '前引号', '后引号', '字符串'])

@分析器母机.语法规则("输入 : 引用 几个 引用")
def 输入(片段):
    return 片段[0].count(片段[2])

@分析器母机.语法规则("引用 : 前引号 字符串 后引号")
def 字描述(片段):
    return 片段[1].getstr()

分词器 = 分词母机.产出()
分析器 = 分析器母机.产出()

# print(分析器.按语法分词(分词器.分词('“strawberry”中有几个字母“r”')))