include:
  - component: git.ligo.org/computing/gitlab/components/python/sdist@~latest
  - component: git.ligo.org/computing/gitlab/components/python/wheel@~latest
  - component: git.ligo.org/computing/gitlab/components/python/code-quality@~latest
  - component: git.ligo.org/computing/gitlab/components/python/test@~latest
    inputs:
      install_extra: test
      python_versions:
        - "3.9"
        - "3.10"
        - "3.11"
        - "3.12"
  - component: git.ligo.org/computing/gitlab/components/sphinx/apidoc@~latest
    inputs:
      module_dir: "src/sgn"
      sphinx_sourcedir: "docs"
      requirements: "-r docs/requirements.txt"
  - component: git.ligo.org/computing/gitlab/components/sphinx/build@~latest
    inputs:
      sphinx_sourcedir: "docs"
      requirements: "-r docs/requirements.txt"
  - component: git.ligo.org/computing/gitlab/components/sphinx/pages@~latest
    inputs:
      pages_when: "default"

python_test:
  before_script:
    - apt-get update
    - apt-get install -yqq graphviz
