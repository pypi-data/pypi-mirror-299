/*! For license information please see 73824.FwajlnsUttE.js.LICENSE.txt */
export const id=73824;export const ids=[73824,45346];export const modules={11514:(e,t,i)=>{i.d(t,{$:()=>f});var a=i(79192),r=i(69142),o=i(77706),s=i(19637),n=i(15208),c=i(97164),l=i(15112),d=i(85323);const u=n.QQ?{passive:!0}:void 0;class h extends s.O{constructor(){super(...arguments),this.centerTitle=!1,this.handleTargetScroll=()=>{this.mdcFoundation.handleTargetScroll()},this.handleNavigationClick=()=>{this.mdcFoundation.handleNavigationClick()}}get scrollTarget(){return this._scrollTarget||window}set scrollTarget(e){this.unregisterScrollListener();const t=this.scrollTarget;this._scrollTarget=e,this.updateRootPosition(),this.requestUpdate("scrollTarget",t),this.registerScrollListener()}updateRootPosition(){if(this.mdcRoot){const e=this.scrollTarget===window;this.mdcRoot.style.position=e?"":"absolute"}}render(){let e=l.qy`<span class="mdc-top-app-bar__title"><slot name="title"></slot></span>`;return this.centerTitle&&(e=l.qy`<section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-center">${e}</section>`),l.qy` <header class="mdc-top-app-bar ${(0,d.H)(this.barClasses())}"> <div class="mdc-top-app-bar__row"> <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start" id="navigation"> <slot name="navigationIcon" @click="${this.handleNavigationClick}"></slot> ${this.centerTitle?null:e} </section> ${this.centerTitle?e:null} <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" id="actions" role="toolbar"> <slot name="actionItems"></slot> </section> </div> </header> <div class="${(0,d.H)(this.contentClasses())}"> <slot></slot> </div> `}createAdapter(){return Object.assign(Object.assign({},(0,s.i)(this.mdcRoot)),{setStyle:(e,t)=>this.mdcRoot.style.setProperty(e,t),getTopAppBarHeight:()=>this.mdcRoot.clientHeight,notifyNavigationIconClicked:()=>{this.dispatchEvent(new Event(c.P$.NAVIGATION_EVENT,{bubbles:!0,cancelable:!0}))},getViewportScrollY:()=>this.scrollTarget instanceof Window?this.scrollTarget.pageYOffset:this.scrollTarget.scrollTop,getTotalActionItems:()=>this._actionItemsSlot.assignedNodes({flatten:!0}).length})}registerListeners(){this.registerScrollListener()}unregisterListeners(){this.unregisterScrollListener()}registerScrollListener(){this.scrollTarget.addEventListener("scroll",this.handleTargetScroll,u)}unregisterScrollListener(){this.scrollTarget.removeEventListener("scroll",this.handleTargetScroll)}firstUpdated(){super.firstUpdated(),this.updateRootPosition(),this.registerListeners()}disconnectedCallback(){super.disconnectedCallback(),this.unregisterListeners()}}(0,a.__decorate)([(0,o.P)(".mdc-top-app-bar")],h.prototype,"mdcRoot",void 0),(0,a.__decorate)([(0,o.P)('slot[name="actionItems"]')],h.prototype,"_actionItemsSlot",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean})],h.prototype,"centerTitle",void 0),(0,a.__decorate)([(0,o.MZ)({type:Object})],h.prototype,"scrollTarget",null);class m extends h{constructor(){super(...arguments),this.mdcFoundationClass=r.A,this.prominent=!1,this.dense=!1,this.handleResize=()=>{this.mdcFoundation.handleWindowResize()}}barClasses(){return{"mdc-top-app-bar--dense":this.dense,"mdc-top-app-bar--prominent":this.prominent,"center-title":this.centerTitle}}contentClasses(){return{"mdc-top-app-bar--fixed-adjust":!this.dense&&!this.prominent,"mdc-top-app-bar--dense-fixed-adjust":this.dense&&!this.prominent,"mdc-top-app-bar--prominent-fixed-adjust":!this.dense&&this.prominent,"mdc-top-app-bar--dense-prominent-fixed-adjust":this.dense&&this.prominent}}registerListeners(){super.registerListeners(),window.addEventListener("resize",this.handleResize,u)}unregisterListeners(){super.unregisterListeners(),window.removeEventListener("resize",this.handleResize)}}(0,a.__decorate)([(0,o.MZ)({type:Boolean,reflect:!0})],m.prototype,"prominent",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean,reflect:!0})],m.prototype,"dense",void 0);var g=i(14315);class f extends m{constructor(){super(...arguments),this.mdcFoundationClass=g.A}barClasses(){return Object.assign(Object.assign({},super.barClasses()),{"mdc-top-app-bar--fixed":!0})}registerListeners(){this.scrollTarget.addEventListener("scroll",this.handleTargetScroll,u)}unregisterListeners(){this.scrollTarget.removeEventListener("scroll",this.handleTargetScroll)}}},21863:(e,t,i)=>{function a(e){return void 0===e||Array.isArray(e)?e:[e]}i.d(t,{e:()=>a})},99890:(e,t,i)=>{i.d(t,{g:()=>a});const a=e=>(t,i)=>e.includes(t,i)},46999:(e,t,i)=>{i.d(t,{Vy:()=>o,fI:()=>s});var a=i(3254);const r=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function o(e){return r[e%r.length]}function s(e,t){const i=t.getPropertyValue(`--graph-color-${e+1}`)||o(e);return(0,a.RQ)(i)}},78691:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{EO:()=>d,ol:()=>c,xo:()=>l});var r=i(35193),o=i(45269),s=e([r]);r=(s.then?(await s)():s)[0];const n=(e,t,i,a)=>{const o=i((0,r.L_)(e,t),a);return o instanceof Date?(0,r.uk)(o,t):o},c=(e,t,i,a,r)=>i.time_zone===o.Wj.server?n(e,a.time_zone,t,r):t(e,r),l=(e,t,i,a,r)=>i.time_zone===o.Wj.server?n(e,a.time_zone,t,r):t(e,r),d=(e,t,i,a,s)=>l(e,i,a,s,a.time_zone===o.Wj.server?(0,r.L_)(t,s.time_zone):t);a()}catch(e){a(e)}}))},9449:(e,t,i)=>{i.d(t,{Z:()=>r,a:()=>o});var a=i(37582);const r={ms:1,s:1e3,min:6e4,h:36e5,d:864e5},o=(e,t)=>(0,a.A)(parseFloat(e)*r[t])||"0"},57289:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{CA:()=>D,Pm:()=>x,Wq:()=>k,Yq:()=>u,fr:()=>y,gu:()=>C,kz:()=>m,sl:()=>p,sw:()=>l,zB:()=>f});i(253),i(94438);var r=i(13265),o=i(94100),s=i(45269),n=i(35638),c=e([r,n]);[r,n]=c.then?(await c)():c;const l=(e,t,i)=>d(t,i.time_zone).format(e),d=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"long",month:"long",day:"numeric",timeZone:(0,n.w)(e.time_zone,t)}))),u=(e,t,i)=>h(t,i.time_zone).format(e),h=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",timeZone:(0,n.w)(e.time_zone,t)}))),m=(e,t,i)=>g(t,i.time_zone).format(e),g=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"short",day:"numeric",timeZone:(0,n.w)(e.time_zone,t)}))),f=(e,t,i)=>{const a=_(t,i.time_zone);if(t.date_format===s.ow.language||t.date_format===s.ow.system)return a.format(e);const r=a.formatToParts(e),o=r.find((e=>"literal"===e.type))?.value,n=r.find((e=>"day"===e.type))?.value,c=r.find((e=>"month"===e.type))?.value,l=r.find((e=>"year"===e.type))?.value,d=r.at(r.length-1);let u="literal"===d?.type?d?.value:"";"bg"===t.language&&t.date_format===s.ow.YMD&&(u="");return{[s.ow.DMY]:`${n}${o}${c}${o}${l}${u}`,[s.ow.MDY]:`${c}${o}${n}${o}${l}${u}`,[s.ow.YMD]:`${l}${o}${c}${o}${n}${u}`}[t.date_format]},_=(0,o.A)(((e,t)=>{const i=e.date_format===s.ow.system?void 0:e.language;return e.date_format===s.ow.language||(e.date_format,s.ow.system),new Intl.DateTimeFormat(i,{year:"numeric",month:"numeric",day:"numeric",timeZone:(0,n.w)(e.time_zone,t)})})),p=(e,t,i)=>v(t,i.time_zone).format(e),v=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{day:"numeric",month:"short",timeZone:(0,n.w)(e.time_zone,t)}))),y=(e,t,i)=>b(t,i.time_zone).format(e),b=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{month:"long",year:"numeric",timeZone:(0,n.w)(e.time_zone,t)}))),k=(e,t,i)=>w(t,i.time_zone).format(e),w=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{month:"long",timeZone:(0,n.w)(e.time_zone,t)}))),x=(e,t,i)=>$(t,i.time_zone).format(e),$=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",timeZone:(0,n.w)(e.time_zone,t)}))),D=(e,t,i)=>z(t,i.time_zone).format(e),z=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"long",timeZone:(0,n.w)(e.time_zone,t)}))),C=(e,t,i)=>L(t,i.time_zone).format(e),L=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"short",timeZone:(0,n.w)(e.time_zone,t)})));a()}catch(e){a(e)}}))},8581:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{GH:()=>y,ZS:()=>f,aQ:()=>m,r6:()=>u,yg:()=>p});var r=i(13265),o=i(94100),s=i(57289),n=i(41924),c=i(35638),l=i(3453),d=e([r,s,n,c]);[r,s,n,c]=d.then?(await d)():d;const u=(e,t,i)=>h(t,i.time_zone).format(e),h=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:(0,l.J)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,l.J)(e)?"h12":"h23",timeZone:(0,c.w)(e.time_zone,t)}))),m=(e,t,i)=>g(t,i.time_zone).format(e),g=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"short",day:"numeric",hour:(0,l.J)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,l.J)(e)?"h12":"h23",timeZone:(0,c.w)(e.time_zone,t)}))),f=(e,t,i)=>_(t,i.time_zone).format(e),_=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{month:"short",day:"numeric",hour:(0,l.J)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,l.J)(e)?"h12":"h23",timeZone:(0,c.w)(e.time_zone,t)}))),p=(e,t,i)=>v(t,i.time_zone).format(e),v=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:(0,l.J)(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,l.J)(e)?"h12":"h23",timeZone:(0,c.w)(e.time_zone,t)}))),y=(e,t,i)=>`${(0,s.zB)(e,t,i)}, ${(0,n.fU)(e,t,i)}`;a()}catch(e){a(e)}}))},41924:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{LW:()=>f,Xs:()=>m,fU:()=>l,ie:()=>u});var r=i(13265),o=i(94100),s=i(35638),n=i(3453),c=e([r,s]);[r,s]=c.then?(await c)():c;const l=(e,t,i)=>d(t,i.time_zone).format(e),d=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{hour:"numeric",minute:"2-digit",hourCycle:(0,n.J)(e)?"h12":"h23",timeZone:(0,s.w)(e.time_zone,t)}))),u=(e,t,i)=>h(t,i.time_zone).format(e),h=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{hour:(0,n.J)(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,n.J)(e)?"h12":"h23",timeZone:(0,s.w)(e.time_zone,t)}))),m=(e,t,i)=>g(t,i.time_zone).format(e),g=(0,o.A)(((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"long",hour:(0,n.J)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,n.J)(e)?"h12":"h23",timeZone:(0,s.w)(e.time_zone,t)}))),f=(e,t,i)=>_(t,i.time_zone).format(e),_=(0,o.A)(((e,t)=>new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"2-digit",hour12:!1,timeZone:(0,s.w)(e.time_zone,t)})));a()}catch(e){a(e)}}))},37582:(e,t,i)=>{i.d(t,{A:()=>r});const a=(e,t=2)=>{let i=""+e;for(let e=1;e<t;e++)i=parseInt(i)<10**e?`0${i}`:i;return i};function r(e){const t=Math.floor(e/1e3/3600),i=Math.floor(e/1e3%3600/60),r=Math.floor(e/1e3%3600%60),o=Math.floor(e%1e3);return t>0?`${t}:${a(i)}:${a(r)}`:i>0?`${i}:${a(r)}`:r>0||o>0?`${r}${o>0?`.${a(o,3)}`:""}`:null}},35638:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{w:()=>c});var r=i(13265),o=i(45269),s=e([r]);r=(s.then?(await s)():s)[0];const n=Intl.DateTimeFormat?.().resolvedOptions?.().timeZone??"UTC",c=(e,t)=>e===o.Wj.local&&"UTC"!==n?n:t;a()}catch(e){a(e)}}))},3453:(e,t,i)=>{i.d(t,{J:()=>o});var a=i(94100),r=i(45269);const o=(0,a.A)((e=>{if(e.time_format===r.Hg.language||e.time_format===r.Hg.system){const t=e.time_format===r.Hg.language?e.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(t).includes("10")}return e.time_format===r.Hg.am_pm}))},96979:(e,t,i)=>{i.d(t,{I:()=>o});i(89655),i(253),i(54846),i(78266);class a{constructor(e=window.localStorage){this.storage=void 0,this._storage={},this._listeners={},this.storage=e,e===window.localStorage&&window.addEventListener("storage",(e=>{e.key&&this.hasKey(e.key)&&(this._storage[e.key]=e.newValue?JSON.parse(e.newValue):e.newValue,this._listeners[e.key]&&this._listeners[e.key].forEach((t=>t(e.oldValue?JSON.parse(e.oldValue):e.oldValue,this._storage[e.key]))))}))}addFromStorage(e){if(!this._storage[e]){const t=this.storage.getItem(e);t&&(this._storage[e]=JSON.parse(t))}}subscribeChanges(e,t){return this._listeners[e]?this._listeners[e].push(t):this._listeners[e]=[t],()=>{this.unsubscribeChanges(e,t)}}unsubscribeChanges(e,t){if(!(e in this._listeners))return;const i=this._listeners[e].indexOf(t);-1!==i&&this._listeners[e].splice(i,1)}hasKey(e){return e in this._storage}getValue(e){return this._storage[e]}setValue(e,t){const i=this._storage[e];this._storage[e]=t;try{void 0===t?this.storage.removeItem(e):this.storage.setItem(e,JSON.stringify(t))}catch(e){}finally{this._listeners[e]&&this._listeners[e].forEach((e=>e(i,t)))}}}const r={},o=e=>t=>{const i=e.storage||"localStorage";let o;i&&i in r?o=r[i]:(o=new a(window[i]),r[i]=o);const s=String(t.key),n=e.key||String(t.key),c=t.initializer?t.initializer():void 0;o.addFromStorage(n);const l=!1!==e.subscribe?e=>o.subscribeChanges(n,((i,a)=>{e.requestUpdate(t.key,i)})):void 0,d=()=>o.hasKey(n)?e.deserializer?e.deserializer(o.getValue(n)):o.getValue(n):c;return{kind:"method",placement:"prototype",key:t.key,descriptor:{set(i){((i,a)=>{let r;e.state&&(r=d()),o.setValue(n,e.serializer?e.serializer(a):a),e.state&&i.requestUpdate(t.key,r)})(this,i)},get:()=>d(),enumerable:!0,configurable:!0},finisher(i){if(e.state&&e.subscribe){const e=i.prototype.connectedCallback,t=i.prototype.disconnectedCallback;i.prototype.connectedCallback=function(){e.call(this),this[`__unbsubLocalStorage${s}`]=l?.(this)},i.prototype.disconnectedCallback=function(){t.call(this),this[`__unbsubLocalStorage${s}`]?.(),this[`__unbsubLocalStorage${s}`]=void 0}}e.state&&i.createProperty(t.key,{noAccessor:!0,...e.stateOptions})}}}},65459:(e,t,i)=>{i.d(t,{t:()=>r});var a=i(213);const r=e=>(0,a.m)(e.entity_id)},42496:(e,t,i)=>{i.d(t,{$:()=>a});const a=(e,t)=>r(e.attributes,t),r=(e,t)=>!!(e.supported_features&t)},69678:(e,t,i)=>{i.d(t,{O:()=>r,q:()=>a});const a=(e,t,i)=>Math.min(Math.max(e,t),i),r=(e,t,i)=>{let a;return a=null!=t?Math.max(e,t):e,a=null!=i?Math.min(a,i):a,a}},57636:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{Yf:()=>d,ZQ:()=>h,ZV:()=>u,ty:()=>l,x:()=>c});var r=i(13265),o=i(45269),s=i(53249),n=e([r]);r=(n.then?(await n)():n)[0];const c=e=>l(e.attributes),l=(e,t)=>!!e.unit_of_measurement||!!e.state_class||(t||[]).includes(e.device_class||""),d=e=>{switch(e.number_format){case o.jG.comma_decimal:return["en-US","en"];case o.jG.decimal_comma:return["de","es","it"];case o.jG.space_comma:return["fr","sv","cs"];case o.jG.system:return;default:return e.language}},u=(e,t,i)=>{const a=t?d(t):void 0;return Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},t?.number_format===o.jG.none||Number.isNaN(Number(e))?Number.isNaN(Number(e))||""===e||t?.number_format!==o.jG.none?"string"==typeof e?e:`${(0,s.L)(e,i?.maximumFractionDigits).toString()}${"currency"===i?.style?` ${i.currency}`:""}`:new Intl.NumberFormat("en-US",m(e,{...i,useGrouping:!1})).format(Number(e)):new Intl.NumberFormat(a,m(e,i)).format(Number(e))},h=(e,t)=>{const i=t?.display_precision;return null!=i?{maximumFractionDigits:i,minimumFractionDigits:i}:Number.isInteger(Number(e?.attributes?.step))&&Number.isInteger(Number(e?.state))?{maximumFractionDigits:0}:void 0},m=(e,t)=>{const i={maximumFractionDigits:2,...t};if("string"!=typeof e)return i;if(!t||void 0===t.minimumFractionDigits&&void 0===t.maximumFractionDigits){const t=e.indexOf(".")>-1?e.split(".")[1].length:0;i.minimumFractionDigits=t,i.maximumFractionDigits=t}return i};a()}catch(e){a(e)}}))},53249:(e,t,i)=>{i.d(t,{L:()=>a});const a=(e,t=2)=>Math.round(e*10**t)/10**t},33984:(e,t,i)=>{i.d(t,{d:()=>a});const a=e=>{switch(e.language){case"cz":case"de":case"fi":case"fr":case"sk":case"sv":return" ";default:return""}}},40863:(e,t,i)=>{i.d(t,{A:()=>r});var a=i(33984);const r=(e,t)=>"°"===e?"":t&&"%"===e?(0,a.d)(t):" "},58034:(e,t,i)=>{i.d(t,{n:()=>a});const a=(e,t,i=!0,a=!0)=>{let r,o=0;const s=(...s)=>{const n=()=>{o=!1===i?0:Date.now(),r=void 0,e(...s)},c=Date.now();o||!1!==i||(o=c);const l=t-(c-o);l<=0||l>t?(r&&(clearTimeout(r),r=void 0),o=c,e(...s)):r||!1===a||(r=window.setTimeout(n,l))};return s.cancel=()=>{clearTimeout(r),r=void 0,o=0},s}},73207:(e,t,i)=>{i.d(t,{c:()=>m});var a=i(46999),r=i(3254),o=i(92164),s=i(213),n=i(95239),c=i(9883),l=i(61352);const d={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};let u=0;const h=new Map;function m(e,t,i){return function(e,t,i){if(!i||e===c.Hh)return(0,l.a)("--history-unavailable-color",t);if(e===c.HV)return(0,l.a)("--history-unknown-color",t);const a=(0,n.mg)(i,e);if(!a)return;const u=(0,l.a)(a,t);if(!u)return;const h=(0,s.m)(i.entity_id),m=d[h]?.[e];return m?(0,r.zm)((0,o.T)((0,r.Nc)((0,r.xp)(u)),m)):u}(e,t,i)||function(e,t){if(h.has(e))return h.get(e);const i=(0,a.fI)(u,t);return u++,h.set(e,i),i}(e,t)}},26790:(e,t,i)=>{var a=i(36312),r=i(68689),o=(i(253),i(54846),i(29654),i(15112)),s=i(77706),n=i(74005),c=i(90952);(0,a.A)([(0,s.EM)("ha-button-menu")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",key:c.Xr,value:void 0},{kind:"field",decorators:[(0,s.MZ)()],key:"corner",value:()=>"BOTTOM_START"},{kind:"field",decorators:[(0,s.MZ)()],key:"menuCorner",value:()=>"START"},{kind:"field",decorators:[(0,s.MZ)({type:Number})],key:"x",value:()=>null},{kind:"field",decorators:[(0,s.MZ)({type:Number})],key:"y",value:()=>null},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"multi",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"activatable",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"fixed",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean,attribute:"no-anchor"})],key:"noAnchor",value:()=>!1},{kind:"field",decorators:[(0,s.P)("mwc-menu",!0)],key:"_menu",value:void 0},{kind:"get",key:"items",value:function(){return this._menu?.items}},{kind:"get",key:"selected",value:function(){return this._menu?.selected}},{kind:"method",key:"focus",value:function(){this._menu?.open?this._menu.focusItemAtIndex(0):this._triggerButton?.focus()}},{kind:"method",key:"render",value:function(){return o.qy` <div @click="${this._handleClick}"> <slot name="trigger" @slotchange="${this._setTriggerAria}"></slot> </div> <mwc-menu .corner="${this.corner}" .menuCorner="${this.menuCorner}" .fixed="${this.fixed}" .multi="${this.multi}" .activatable="${this.activatable}" .y="${this.y}" .x="${this.x}"> <slot></slot> </mwc-menu> `}},{kind:"method",key:"firstUpdated",value:function(e){(0,r.A)(i,"firstUpdated",this,3)([e]),"rtl"===n.G.document.dir&&this.updateComplete.then((()=>{this.querySelectorAll("mwc-list-item").forEach((e=>{const t=document.createElement("style");t.innerHTML="span.material-icons:first-of-type { margin-left: var(--mdc-list-item-graphic-margin, 32px) !important; margin-right: 0px !important;}",e.shadowRoot.appendChild(t)}))}))}},{kind:"method",key:"_handleClick",value:function(){this.disabled||(this._menu.anchor=this.noAnchor?null:this,this._menu.show())}},{kind:"get",key:"_triggerButton",value:function(){return this.querySelector('ha-icon-button[slot="trigger"], mwc-button[slot="trigger"]')}},{kind:"method",key:"_setTriggerAria",value:function(){this._triggerButton&&(this._triggerButton.ariaHasPopup="menu")}},{kind:"get",static:!0,key:"styles",value:function(){return o.AH`:host{display:inline-block;position:relative}::slotted([disabled]){color:var(--disabled-text-color)}`}}]}}),o.WF)},37629:(e,t,i)=>{i.r(t),i.d(t,{HaCircularProgress:()=>c});var a=i(36312),r=i(68689),o=i(99322),s=i(15112),n=i(77706);let c=(0,a.A)([(0,n.EM)("ha-circular-progress")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,n.MZ)({attribute:"aria-label",type:String})],key:"ariaLabel",value:()=>"Loading"},{kind:"field",decorators:[(0,n.MZ)()],key:"size",value:()=>"medium"},{kind:"method",key:"updated",value:function(e){if((0,r.A)(i,"updated",this,3)([e]),e.has("size"))switch(this.size){case"tiny":this.style.setProperty("--md-circular-progress-size","16px");break;case"small":this.style.setProperty("--md-circular-progress-size","28px");break;case"medium":this.style.setProperty("--md-circular-progress-size","48px");break;case"large":this.style.setProperty("--md-circular-progress-size","68px")}}},{kind:"field",static:!0,key:"styles",value(){return[...(0,r.A)(i,"styles",this),s.AH`:host{--md-sys-color-primary:var(--primary-color);--md-circular-progress-size:48px}`]}}]}}),o.U)},45346:(e,t,i)=>{i.r(t),i.d(t,{HaIconButtonArrowPrev:()=>n});var a=i(36312),r=i(15112),o=i(77706),s=i(74005);i(28066);let n=(0,a.A)([(0,o.EM)("ha-icon-button-arrow-prev")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_icon",value:()=>"rtl"===s.G.document.dir?"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z":"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"},{kind:"method",key:"render",value:function(){return r.qy` <ha-icon-button .disabled="${this.disabled}" .label="${this.label||this.hass?.localize("ui.common.back")||"Back"}" .path="${this._icon}"></ha-icon-button> `}}]}}),r.WF)},50808:(e,t,i)=>{var a=i(36312),r=i(11514),o=i(21025),s=i(15112),n=i(77706);(0,a.A)([(0,n.EM)("ha-top-app-bar-fixed")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",static:!0,key:"styles",value:()=>[o.R,s.AH`.mdc-top-app-bar__row{height:var(--header-height);border-bottom:var(--app-header-border-bottom)}.mdc-top-app-bar--fixed-adjust{padding-top:var(--header-height)}.mdc-top-app-bar{--mdc-typography-headline6-font-weight:400;color:var(--app-header-text-color,var(--mdc-theme-on-primary,#fff));background-color:var(--app-header-background-color,var(--mdc-theme-primary))}.mdc-top-app-bar__title{padding-inline-start:20px;padding-inline-end:initial}`]}]}}),r.$)},94526:(e,t,i)=>{i.d(t,{Fy:()=>o,Gk:()=>c,Hg:()=>a,Y_:()=>l,ds:()=>n,e0:()=>r,ec:()=>s});i(16891);const a=e=>e.map((e=>{if("string"!==e.type)return e;switch(e.name){case"username":return{...e,autocomplete:"username"};case"password":return{...e,autocomplete:"current-password"};case"code":return{...e,autocomplete:"one-time-code"};default:return e}})),r=(e,t)=>e.callWS({type:"auth/sign_path",path:t}),o=async(e,t,i,a)=>e.callWS({type:"config/auth_provider/homeassistant/create",user_id:t,username:i,password:a}),s=(e,t,i)=>e.callWS({type:"config/auth_provider/homeassistant/change_password",current_password:t,new_password:i}),n=(e,t,i)=>e.callWS({type:"config/auth_provider/homeassistant/admin_change_password",user_id:t,password:i}),c=(e,t,i)=>e.callWS({type:"config/auth_provider/homeassistant/admin_change_username",user_id:t,username:i}),l=(e,t,i)=>e.callWS({type:"auth/delete_all_refresh_tokens",token_type:t,delete_current_token:i})},50118:(e,t,i)=>{function a(e){return"strategy"in e}i.d(t,{Dz:()=>r,Wu:()=>a,io:()=>s,ql:()=>o});const r=(e,t,i)=>e.sendMessagePromise({type:"lovelace/config",url_path:t,force:i}),o=(e,t,i)=>e.callWS({type:"lovelace/config/save",url_path:t,config:i}),s=(e,t)=>e.callWS({type:"lovelace/config/delete",url_path:t})},57216:(e,t,i)=>{i.d(t,{A_:()=>s,SJ:()=>a,mQ:()=>o,n6:()=>r});const a=e=>e.callWS({type:"lovelace/dashboards/list"}),r=(e,t)=>e.callWS({type:"lovelace/dashboards/create",...t}),o=(e,t,i)=>e.callWS({type:"lovelace/dashboards/update",dashboard_id:t,...i}),s=(e,t)=>e.callWS({type:"lovelace/dashboards/delete",dashboard_id:t})},29829:(e,t,i)=>{i.d(t,{DF:()=>m,Lo:()=>y,MH:()=>l,MM:()=>g,Qz:()=>h,Ru:()=>_,UU:()=>p,_7:()=>u,bZ:()=>d,m0:()=>c,tD:()=>v,vX:()=>f});i(89655),i(24545),i(51855),i(82130),i(31743),i(22328),i(4959),i(62435),i(253),i(2075),i(32137),i(54846),i(4525);var a=i(21863),r=i(65459),o=i(42496),s=i(57273),n=i(10725);const c=(e,t,i,a,r,o,s)=>{const n=[],c=[],l=[];return Object.values(i).forEach((i=>{i.labels.includes(t)&&h(e,r,a,i.area_id,o,s)&&l.push(i.area_id)})),Object.values(a).forEach((i=>{i.labels.includes(t)&&m(e,Object.values(r),i,o,s)&&c.push(i.id)})),Object.values(r).forEach((i=>{i.labels.includes(t)&&g(e.states[i.entity_id],o,s)&&n.push(i.entity_id)})),{areas:l,devices:c,entities:n}},l=(e,t,i,a,r)=>{const o=[];return Object.values(i).forEach((i=>{i.floor_id===t&&h(e,e.entities,e.devices,i.area_id,a,r)&&o.push(i.area_id)})),{areas:o}},d=(e,t,i,a,r,o)=>{const s=[],n=[];return Object.values(i).forEach((i=>{i.area_id===t&&m(e,Object.values(a),i,r,o)&&n.push(i.id)})),Object.values(a).forEach((i=>{i.area_id===t&&g(e.states[i.entity_id],r,o)&&s.push(i.entity_id)})),{devices:n,entities:s}},u=(e,t,i,a,r)=>{const o=[];return Object.values(i).forEach((i=>{i.device_id===t&&g(e.states[i.entity_id],a,r)&&o.push(i.entity_id)})),{entities:o}},h=(e,t,i,a,r,o)=>!!Object.values(i).some((i=>!(i.area_id!==a||!m(e,Object.values(t),i,r,o))))||Object.values(t).some((t=>!(t.area_id!==a||!g(e.states[t.entity_id],r,o)))),m=(e,t,i,r,o)=>{const s=o?(0,n.fk)(o,t):void 0;if(r.target?.device&&!(0,a.e)(r.target.device).some((e=>f(e,i,s))))return!1;if(r.target?.entity){return t.filter((e=>e.device_id===i.id)).some((t=>{const i=e.states[t.entity_id];return g(i,r,o)}))}return!0},g=(e,t,i)=>!t.target?.entity||(0,a.e)(t.target.entity).some((t=>_(t,e,i))),f=(e,t,i)=>{const{manufacturer:a,model:r,integration:o}=e;return(!a||t.manufacturer===a)&&((!r||t.model===r)&&!(o&&i&&!i?.[t.id]?.has(o)))},_=(e,t,i)=>{const{domain:s,device_class:n,supported_features:c,integration:l}=e;if(s){const e=(0,r.t)(t);if(Array.isArray(s)?!s.includes(e):e!==s)return!1}if(n){const e=t.attributes.device_class;if(e&&Array.isArray(n)?!n.includes(e):e!==n)return!1}return!(c&&!(0,a.e)(c).some((e=>(0,o.$)(t,e))))&&(!l||i?.[t.entity_id]?.domain===l)},p=e=>{if(!e.entity)return{entity:null};if("filter"in e.entity)return e;const{domain:t,integration:i,device_class:a,...r}=e.entity;return t||i||a?{entity:{...r,filter:{domain:t,integration:i,device_class:a}}}:{entity:r}},v=e=>{if(!e.device)return{device:null};if("filter"in e.device)return e;const{integration:t,manufacturer:i,model:a,...r}=e.device;return t||i||a?{device:{...r,filter:{integration:t,manufacturer:i,model:a}}}:{device:r}},y=e=>{let t;if("target"in e)t=(0,a.e)(e.target?.entity);else if("entity"in e){if(e.entity?.include_entities)return;t=(0,a.e)(e.entity?.filter)}if(!t)return;const i=t.flatMap((e=>e.integration||e.device_class||e.supported_features||!e.domain?[]:(0,a.e)(e.domain).filter((e=>(0,s.z)(e)))));return[...new Set(i)]}},57273:(e,t,i)=>{i.d(t,{L:()=>r,z:()=>o});var a=i(99890);const r=["input_boolean","input_button","input_text","input_number","input_datetime","input_select","counter","timer","schedule"],o=(0,a.g)(r)},11577:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.r(t);var r=i(36312),o=i(68689),s=(i(89655),i(24545),i(51855),i(82130),i(31743),i(22328),i(4959),i(62435),i(253),i(94438),i(54846),i(16891),i(74860),i(71011),i(71174),i(56180)),n=i(15112),c=i(77706),l=i(94100),d=i(21863),u=i(96979),h=i(213),m=i(16312),g=i(20732),f=i(56932),_=i(90701),p=i(4159),v=(i(37629),i(9043)),y=(i(28066),i(26790),i(13830),i(45346),i(11804),i(79998),i(50808),i(11630)),b=i(4826),k=i(29829),w=i(96778),x=i(6121),$=i(55321),D=i(30489),z=i(7950),C=e([p,v,y]);[p,v,y]=C.then?(await C)():C;const L="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",A="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",H="M14.76,20.83L17.6,18L14.76,15.17L16.17,13.76L19,16.57L21.83,13.76L23.24,15.17L20.43,18L23.24,20.83L21.83,22.24L19,19.4L16.17,22.24L14.76,20.83M12,12V19.88C12.04,20.18 11.94,20.5 11.71,20.71C11.32,21.1 10.69,21.1 10.3,20.71L8.29,18.7C8.06,18.47 7.96,18.16 8,17.87V12H7.97L2.21,4.62C1.87,4.19 1.95,3.56 2.38,3.22C2.57,3.08 2.78,3 3,3V3H17V3C17.22,3 17.43,3.08 17.62,3.22C18.05,3.56 18.13,4.19 17.79,4.62L12.03,12H12Z",S="M18 15V18H15V20H18V23H20V20H23V18H20V15H18M13.3 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V13.3C20.4 13.1 19.7 13 19 13C17.9 13 16.8 13.3 15.9 13.9L14.5 12L11 16.5L8.5 13.5L5 18H13.1C13 18.3 13 18.7 13 19C13 19.7 13.1 20.4 13.3 21Z";let T=(0,r.A)(null,(function(e,t){class i extends t{constructor(){super(),e(this);const t=new Date;t.setHours(t.getHours()-1,0,0,0),this._startDate=t;const i=new Date;i.setHours(i.getHours()+2,0,0,0),this._endDate=i}}return{F:i,d:[{kind:"field",decorators:[(0,c.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,c.MZ)({reflect:!0,type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,c.MZ)({reflect:!0,type:Boolean})],key:"rtl",value:()=>!1},{kind:"field",decorators:[(0,c.wk)()],key:"_startDate",value:void 0},{kind:"field",decorators:[(0,c.wk)()],key:"_endDate",value:void 0},{kind:"field",decorators:[(0,u.I)({key:"historyPickedValue",state:!0,subscribe:!1})],key:"_targetPickerValue",value:()=>({})},{kind:"field",decorators:[(0,c.wk)()],key:"_isLoading",value:()=>!1},{kind:"field",decorators:[(0,c.wk)()],key:"_stateHistory",value:void 0},{kind:"field",key:"_mungedStateHistory",value:void 0},{kind:"field",decorators:[(0,c.wk)()],key:"_statisticsHistory",value:void 0},{kind:"field",decorators:[(0,c.wk)()],key:"_showBack",value:void 0},{kind:"field",decorators:[(0,c.P)("state-history-charts")],key:"_stateHistoryCharts",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,o.A)(i,"connectedCallback",this,3)([]),this.hasUpdated&&this._getHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.A)(i,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{kind:"method",key:"_goBack",value:function(){history.back()}},{kind:"method",key:"render",value:function(){const e=this._getEntityIds().length>0;return n.qy` <ha-top-app-bar-fixed> ${this._showBack?n.qy` <ha-icon-button-arrow-prev slot="navigationIcon" @click="${this._goBack}"></ha-icon-button-arrow-prev> `:n.qy` <ha-menu-button slot="navigationIcon" .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `} <div slot="title">${this.hass.localize("panel.history")}</div> ${e?n.qy` <ha-icon-button slot="actionItems" @click="${this._removeAll}" .disabled="${this._isLoading}" .path="${H}" .label="${this.hass.localize("ui.panel.history.remove_all")}"></ha-icon-button> `:""} <ha-button-menu slot="actionItems" @action="${this._handleMenuAction}"> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${L}"></ha-icon-button> <ha-list-item graphic="icon" .disabled="${this._isLoading}"> ${this.hass.localize("ui.panel.history.download_data")} <ha-svg-icon slot="graphic" .path="${A}"></ha-svg-icon> </ha-list-item> <ha-list-item graphic="icon" .disabled="${this._isLoading}"> ${this.hass.localize("ui.panel.history.add_card")} <ha-svg-icon slot="graphic" .path="${S}"></ha-svg-icon> </ha-list-item> </ha-button-menu> <div class="flex content"> <div class="filters"> <ha-date-range-picker .hass="${this.hass}" ?disabled="${this._isLoading}" .startDate="${this._startDate}" .endDate="${this._endDate}" extendedPresets @change="${this._dateRangeChanged}"></ha-date-range-picker> <ha-target-picker .hass="${this.hass}" .value="${this._targetPickerValue}" .disabled="${this._isLoading}" addOnTop @value-changed="${this._targetsChanged}"></ha-target-picker> </div> ${this._isLoading?n.qy`<div class="progress-wrapper"> <ha-circular-progress indeterminate></ha-circular-progress> </div>`:e?n.qy` <state-history-charts .hass="${this.hass}" .historyData="${this._mungedStateHistory}" .startTime="${this._startDate}" .endTime="${this._endDate}"> </state-history-charts> `:n.qy`<div class="start-search"> ${this.hass.localize("ui.panel.history.start_search")} </div>`} </div> </ha-top-app-bar-fixed> `}},{kind:"method",key:"mergeHistoryResults",value:function(e,t){const i={...t,line:[]},a={};for(const e of t.line){const t=(0,y.qc)(e.unit,e.device_class,!0);t&&(a[t]={historyItem:e})}for(const t of e.line){const e=(0,y.qc)(t.unit,t.device_class,!0);e&&(e in a?a[e].ltsItem=t:a[e]={ltsItem:t})}for(const{historyItem:e,ltsItem:t}of Object.values(a)){if(!e||!t){i.line.push(e||t);continue}const a={...e,data:[]},r=new Set([...e.data.map((e=>e.entity_id)),...t.data.map((e=>e.entity_id))]);for(const i of r){const r=e.data.find((e=>e.entity_id===i)),o=t.data.find((e=>e.entity_id===i));if(!r||!o){a.data.push(r||o);continue}const s=r.states[0]?.last_changed||o.statistics[o.statistics.length-1].last_changed+1,n=[];for(const e of o.statistics){if(e.last_changed>=s)break;n.push(e)}a.data.push(0===n.length?r:{...r,statistics:n})}i.line.push(a)}return i}},{kind:"method",key:"willUpdate",value:function(e){if((0,o.A)(i,"willUpdate",this,3)([e]),(e.has("_stateHistory")||e.has("_statisticsHistory")||e.has("_startDate")||e.has("_endDate")||e.has("_targetPickerValue"))&&(this._statisticsHistory&&this._stateHistory?this._mungedStateHistory=this.mergeHistoryResults(this._statisticsHistory,this._stateHistory):this._mungedStateHistory=this._stateHistory||this._statisticsHistory),this.hasUpdated)return;const t=(0,f.px)(),a=t.entity_id,r=t.device_id,s=t.area_id,n=t.floor_id,c=t.label_id;if((a||r||s||n||c)&&(this._targetPickerValue={}),a){const e=a.split(",");this._targetPickerValue.entity_id=e}if(r){const e=r.split(",");this._targetPickerValue.device_id=e}if(s){const e=s.split(",");this._targetPickerValue.area_id=e}if(n){const e=n.split(",");this._targetPickerValue.floor_id=e}if(c){const e=c.split(",");this._targetPickerValue.label_id=e}const l=t.start_date;l&&(this._startDate=new Date(l));const d=t.end_date;d&&(this._endDate=new Date(d))}},{kind:"method",key:"firstUpdated",value:function(e){(0,o.A)(i,"firstUpdated",this,3)([e]);"1"===(0,f.px)().back&&history.length>1&&(this._showBack=!0,(0,m.o)((0,g.Z)((0,f.s8)("back")),{replace:!0}))}},{kind:"method",key:"updated",value:function(e){(e.has("_startDate")||e.has("_endDate")||e.has("_targetPickerValue")||!this._stateHistory&&(e.has("_deviceEntityLookup")||e.has("_areaEntityLookup")||e.has("_areaDeviceLookup")))&&(this._getHistory(),this._getStats())}},{kind:"method",key:"_removeAll",value:function(){this._targetPickerValue={},this._updatePath()}},{kind:"method",key:"_getStats",value:async function(){const e=this._getEntityIds();if(0===e.length)return void(this._statisticsHistory=void 0);const t=await(0,b.sz)(this.hass,this._startDate,this._endDate,e,"hour",void 0,["mean","state"]),i={};e.forEach((e=>{e in t&&(i[e]=t[e])}));const a={};Object.entries(i).forEach((([e,t])=>{const i=t.map((e=>({s:null!=e.mean?e.mean.toString():e.state.toString(),lc:e.start/1e3,a:{},lu:e.start/1e3})));a[e]=i}));const{numeric_device_classes:r}=await(0,w.KL)(this.hass);this._statisticsHistory=(0,y.Mm)(this.hass,a,[],this.hass.localize,r,!0,!0),(this._statisticsHistory?.line||[]).forEach((e=>{e.data.forEach((e=>{e.statistics=e.states,e.states=[]}))}))}},{kind:"method",key:"_getHistory",value:async function(){const e=this._getEntityIds();if(0===e.length)return void(this._stateHistory=void 0);this._isLoading=!0,this._subscribed&&this._unsubscribeHistory();const t=new Date,{numeric_device_classes:i}=await(0,w.KL)(this.hass);this._subscribed=(0,y.Jo)(this.hass,(t=>{this._isLoading=!1,this._stateHistory=(0,y.Mm)(this.hass,t,e,this.hass.localize,i,!0)}),this._startDate,this._endDate,e),this._subscribed.catch((()=>{this._isLoading=!1,this._unsubscribeHistory()})),this._endDate>t&&this._setRedrawTimer()}},{kind:"method",key:"_setRedrawTimer",value:function(){clearInterval(this._interval);const e=new Date,t=this._endDate>e?e:this._endDate,i=(0,s.M)(t,this._startDate);this._interval=window.setInterval((()=>this._stateHistoryCharts?.requestUpdate()),i<2?1e4:i<10?6e4:_.p)}},{kind:"method",key:"_unsubscribeHistory",value:function(){this._interval&&(clearInterval(this._interval),this._interval=void 0),this._subscribed&&(this._subscribed.then((e=>e?.())),this._subscribed=void 0)}},{kind:"method",key:"_getEntityIds",value:function(){return this.__getEntityIds(this._targetPickerValue,this.hass.entities,this.hass.devices,this.hass.areas)}},{kind:"field",key:"__getEntityIds",value(){return(0,l.A)(((e,t,i,a)=>{if(!e)return[];const r={target:{}},o=new Set((0,d.e)(e.entity_id)),s=new Set((0,d.e)(e.device_id)),n=new Set((0,d.e)(e.area_id)),c=new Set((0,d.e)(e.floor_id));return new Set((0,d.e)(e.label_id)).forEach((e=>{const c=(0,k.m0)(this.hass,e,a,i,t,r);c.devices.forEach((e=>s.add(e))),c.entities.forEach((e=>o.add(e))),c.areas.forEach((e=>n.add(e)))})),c.forEach((e=>{(0,k.MH)(this.hass,e,a,r).areas.forEach((e=>n.add(e)))})),n.forEach((e=>{const a=(0,k.bZ)(this.hass,e,i,t,r);a.devices.forEach((e=>s.add(e))),a.entities.forEach((e=>o.add(e)))})),s.forEach((e=>{(0,k._7)(this.hass,e,t,r).entities.forEach((e=>o.add(e)))})),Array.from(o)}))}},{kind:"method",key:"_dateRangeChanged",value:function(e){this._startDate=e.detail.startDate;const t=e.detail.endDate;0===t.getHours()&&0===t.getMinutes()&&(t.setDate(t.getDate()+1),t.setMilliseconds(t.getMilliseconds()-1)),this._endDate=t,this._updatePath()}},{kind:"method",key:"_targetsChanged",value:function(e){this._targetPickerValue=e.detail.value||{},this._updatePath()}},{kind:"method",key:"_updatePath",value:function(){const e={};this._targetPickerValue.entity_id&&(e.entity_id=(0,d.e)(this._targetPickerValue.entity_id).join(",")),this._targetPickerValue.label_id&&(e.label_id=(0,d.e)(this._targetPickerValue.label_id).join(",")),this._targetPickerValue.floor_id&&(e.floor_id=(0,d.e)(this._targetPickerValue.floor_id).join(",")),this._targetPickerValue.area_id&&(e.area_id=(0,d.e)(this._targetPickerValue.area_id).join(",")),this._targetPickerValue.device_id&&(e.device_id=(0,d.e)(this._targetPickerValue.device_id).join(",")),this._startDate&&(e.start_date=this._startDate.toISOString()),this._endDate&&(e.end_date=this._endDate.toISOString()),(0,m.o)(`/history?${(0,f.KH)(e)}`,{replace:!0})}},{kind:"method",key:"_handleMenuAction",value:async function(e){switch(e.detail.index){case 0:this._downloadHistory();break;case 1:this._suggestCard()}}},{kind:"method",key:"_downloadHistory",value:function(){if(0===[...this._getEntityIds()].sort().length||!this._mungedStateHistory)return void(0,x.showAlertDialog)(this,{title:this.hass.localize("ui.panel.history.download_data_error"),text:this.hass.localize("ui.panel.history.error_no_data"),warning:!0});const e=[""],t=["entity_id","state","last_changed"],i=new Set,a={climate:{current_temperature:0,hvac_action:0,target_temp_high:0,target_temp_low:0,temperature:0},humidifier:{action:0,current_humidity:0,humidity:0},water_heater:{current_temperature:0,operation_mode:0,temperature:0}},r=e=>new Date(e).toISOString();for(const o of this._mungedStateHistory.line)for(const s of o.data){const o=s.entity_id,n=(0,h.m)(o),c=a[n];if(c&&!i.has(n)){i.add(n);let e=t.length;for(const i of Object.keys(c))t.push(i),c[i]=e,e+=1}if(s.statistics)for(const t of s.statistics)e.push(`${o},${t.state},${r(t.last_changed)}\n`);for(const t of s.states){const i=r(t.last_changed),a=[o,t.state,i];if(t.attributes&&c){const e=t.attributes;for(const[t,i]of Object.entries(c))t in e&&(a[i]=e[t])}e.push(a.join(",")+"\n")}}for(const t of this._mungedStateHistory.timeline){const i=t.entity_id;for(const a of t.data){const t=/,|"/.test(a.state)?`"${a.state.replaceAll('"','""')}"`:a.state;e.push(`${i},${t},${r(a.last_changed)}\n`)}}e[0]=t.join(",")+"\n";const o=new Blob(e,{type:"text/csv"}),s=window.URL.createObjectURL(o);(0,D.R)(s,"history.csv")}},{kind:"method",key:"_suggestCard",value:function(){const e=this._getEntityIds();if(0===e.length||!this._mungedStateHistory)return void(0,x.showAlertDialog)(this,{title:this.hass.localize("ui.panel.history.add_card_error"),text:this.hass.localize("ui.panel.history.error_no_data"),warning:!0});const t=Math.min(this._endDate.getTime(),Date.now()),i=[{title:this.hass.localize("panel.history"),type:"history-graph",hours_to_show:Math.round((t-this._startDate.getTime())/1e3/60/60),entities:e}];(0,z.Q)(this,this.hass,i,{title:this.hass.localize("panel.history"),cards:i},e)}},{kind:"get",static:!0,key:"styles",value:function(){return[$.RF,n.AH`.content{padding:0 16px 16px;padding-bottom:max(env(safe-area-inset-bottom),16px)}:host([virtualize]){height:100%}.progress-wrapper{position:relative;display:flex;align-items:center;flex-direction:column;padding:16px}.filters{display:flex;align-items:flex-start;margin-top:16px}ha-date-range-picker{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;max-width:100%;direction:var(--direction)}@media all and (max-width:1025px){.filters{flex-direction:column}ha-date-range-picker{margin-right:0;margin-inline-end:0;margin-inline-start:initial;width:100%}}.start-search{padding-top:16px;text-align:center;color:var(--secondary-text-color)}`]}}]}}),n.WF);customElements.define("ha-panel-history",T),a()}catch(e){a(e)}}))},7950:(e,t,i)=>{i.d(t,{Q:()=>c});i(253),i(2075);var a=i(50118),r=i(57216),o=i(6121),s=i(84048),n=i(45111);const c=async(e,t,i,c,l)=>{t.loadFragmentTranslation("lovelace");const d=await(0,r.SJ)(t),u=d.filter((e=>"storage"===e.mode)),h=t.panels.lovelace?.config?.mode;if("storage"!==h&&!u.length)return void(0,s.Q)(e,{cardConfig:i,entities:l,yaml:!0});let m,g=null;if("storage"===h)try{m=await(0,a.Dz)(t.connection,null,!1)}catch(e){}if(!m&&u.length)for(const e of u)try{m=await(0,a.Dz)(t.connection,e.url_path,!1),g=e.url_path;break}catch(e){}m?u.length||m.views?.length?u.length||1!==m.views.length?(0,n.X)(e,{lovelaceConfig:m,urlPath:g,allowDashboardChange:!0,actionLabel:t.localize("ui.common.next"),dashboards:d,viewSelectedCallback:(r,o,n)=>{(0,s.Q)(e,{cardConfig:i,sectionConfig:c,lovelaceConfig:o,saveConfig:async e=>{try{await(0,a.ql)(t,r,e)}catch{alert(t.localize("ui.panel.lovelace.add_entities.saving_failed"))}},path:[n],entities:l})}}):(0,s.Q)(e,{cardConfig:i,sectionConfig:c,lovelaceConfig:m,saveConfig:async e=>{try{await(0,a.ql)(t,null,e)}catch(e){alert(t.localize("ui.panel.lovelace.add_entities.saving_failed"))}},path:[0],entities:l}):(0,o.showAlertDialog)(e,{text:"You don't have any Lovelace views, first create a view in Lovelace."}):d.length>u.length?(0,s.Q)(e,{cardConfig:i,sectionConfig:c,entities:l,yaml:!0}):(0,o.showAlertDialog)(e,{text:"You don't seem to be in control of any dashboard, please take control first."})}},84048:(e,t,i)=>{i.d(t,{Q:()=>o});var a=i(34897);const r=()=>Promise.all([i.e(24500),i.e(99196),i.e(61060),i.e(16882),i.e(51431),i.e(66419),i.e(81625),i.e(73767),i.e(17590),i.e(21037),i.e(30534),i.e(36185),i.e(97570),i.e(24014),i.e(84069),i.e(97243),i.e(73789),i.e(23994)]).then(i.bind(i,80675)),o=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"hui-dialog-suggest-card",dialogImport:r,dialogParams:t})}},45111:(e,t,i)=>{i.d(t,{X:()=>r});var a=i(34897);const r=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"hui-dialog-select-view",dialogImport:()=>Promise.all([i.e(10963),i.e(14691),i.e(24500),i.e(3051),i.e(53779)]).then(i.bind(i,53779)),dialogParams:t})}},30489:(e,t,i)=>{i.d(t,{R:()=>a});const a=(e,t="")=>{const i=document.createElement("a");i.target="_blank",i.href=e,i.download=t,document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click")),document.body.removeChild(i)}},90620:(e,t,i)=>{var a=i(86574);e.exports="NODE"===a},86574:(e,t,i)=>{var a=i(21621),r=i(72148),o=i(14329),s=function(e){return r.slice(0,e.length)===e};e.exports=s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":a.Bun&&"string"==typeof Bun.version?"BUN":a.Deno&&"object"==typeof Deno.version?"DENO":"process"===o(a.process)?"NODE":a.window&&a.document?"BROWSER":"REST"},25517:(e,t,i)=>{var a=i(18816),r=i(56674),o=i(1370),s=i(36810);e.exports=function(e,t){t&&"string"==typeof e||r(e);var i=s(e);return o(r(void 0!==i?a(i,e):e))}},32137:(e,t,i)=>{var a=i(41765),r=i(18816),o=i(95689),s=i(56674),n=i(1370),c=i(25517),l=i(78211),d=i(91228),u=i(53982),h=l((function(){for(var e,t,i=this.iterator,a=this.mapper;;){if(t=this.inner)try{if(!(e=s(r(t.next,t.iterator))).done)return e.value;this.inner=null}catch(e){d(i,"throw",e)}if(e=s(r(this.next,i)),this.done=!!e.done)return;try{this.inner=c(a(e.value,this.counter++),!1)}catch(e){d(i,"throw",e)}}}));a({target:"Iterator",proto:!0,real:!0,forced:u},{flatMap:function(e){return s(this),o(e),new h(n(this),{mapper:e,inner:null})}})},99322:(e,t,i)=>{i.d(t,{U:()=>u});var a=i(79192),r=i(77706),o=i(15112),s=i(85323);const n=(0,i(26604).n)(o.WF);class c extends n{constructor(){super(...arguments),this.value=0,this.max=1,this.indeterminate=!1,this.fourColor=!1}render(){const{ariaLabel:e}=this;return o.qy` <div class="progress ${(0,s.H)(this.getRenderClasses())}" role="progressbar" aria-label="${e||o.s6}" aria-valuemin="0" aria-valuemax="${this.max}" aria-valuenow="${this.indeterminate?o.s6:this.value}">${this.renderIndicator()}</div> `}getRenderClasses(){return{indeterminate:this.indeterminate,"four-color":this.fourColor}}}(0,a.__decorate)([(0,r.MZ)({type:Number})],c.prototype,"value",void 0),(0,a.__decorate)([(0,r.MZ)({type:Number})],c.prototype,"max",void 0),(0,a.__decorate)([(0,r.MZ)({type:Boolean})],c.prototype,"indeterminate",void 0),(0,a.__decorate)([(0,r.MZ)({type:Boolean,attribute:"four-color"})],c.prototype,"fourColor",void 0);class l extends c{renderIndicator(){return this.indeterminate?this.renderIndeterminateContainer():this.renderDeterminateContainer()}renderDeterminateContainer(){const e=100*(1-this.value/this.max);return o.qy` <svg viewBox="0 0 4800 4800"> <circle class="track" pathLength="100"></circle> <circle class="active-track" pathLength="100" stroke-dashoffset="${e}"></circle> </svg> `}renderIndeterminateContainer(){return o.qy` <div class="spinner"> <div class="left"> <div class="circle"></div> </div> <div class="right"> <div class="circle"></div> </div> </div>`}}const d=o.AH`:host{--_active-indicator-color:var(--md-circular-progress-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-width:var(--md-circular-progress-active-indicator-width, 10);--_four-color-active-indicator-four-color:var(--md-circular-progress-four-color-active-indicator-four-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_four-color-active-indicator-one-color:var(--md-circular-progress-four-color-active-indicator-one-color, var(--md-sys-color-primary, #6750a4));--_four-color-active-indicator-three-color:var(--md-circular-progress-four-color-active-indicator-three-color, var(--md-sys-color-tertiary, #7d5260));--_four-color-active-indicator-two-color:var(--md-circular-progress-four-color-active-indicator-two-color, var(--md-sys-color-primary-container, #eaddff));--_size:var(--md-circular-progress-size, 48px);display:inline-flex;vertical-align:middle;width:var(--_size);height:var(--_size);position:relative;align-items:center;justify-content:center;contain:strict;content-visibility:auto}.progress{flex:1;align-self:stretch;margin:4px}.active-track,.circle,.left,.progress,.right,.spinner,.track,svg{position:absolute;inset:0}svg{transform:rotate(-90deg)}circle{cx:50%;cy:50%;r:calc(50%*(1 - var(--_active-indicator-width)/ 100));stroke-width:calc(var(--_active-indicator-width)*1%);stroke-dasharray:100;fill:rgba(0,0,0,0)}.active-track{transition:stroke-dashoffset .5s cubic-bezier(0, 0, .2, 1);stroke:var(--_active-indicator-color)}.track{stroke:rgba(0,0,0,0)}.progress.indeterminate{animation:linear infinite linear-rotate;animation-duration:1.568s}.spinner{animation:infinite both rotate-arc;animation-duration:5332ms;animation-timing-function:cubic-bezier(0.4,0,0.2,1)}.left{overflow:hidden;inset:0 50% 0 0}.right{overflow:hidden;inset:0 0 0 50%}.circle{box-sizing:border-box;border-radius:50%;border:solid calc(var(--_active-indicator-width)/ 100*(var(--_size) - 8px));border-color:var(--_active-indicator-color) var(--_active-indicator-color) transparent transparent;animation:expand-arc;animation-iteration-count:infinite;animation-fill-mode:both;animation-duration:1333ms,5332ms;animation-timing-function:cubic-bezier(0.4,0,0.2,1)}.four-color .circle{animation-name:expand-arc,four-color}.left .circle{rotate:135deg;inset:0 -100% 0 0}.right .circle{rotate:100deg;inset:0 0 0 -100%;animation-delay:-.666s,0s}@media(forced-colors:active){.active-track{stroke:CanvasText}.circle{border-color:CanvasText CanvasText Canvas Canvas}}@keyframes expand-arc{0%{transform:rotate(265deg)}50%{transform:rotate(130deg)}100%{transform:rotate(265deg)}}@keyframes rotate-arc{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes linear-rotate{to{transform:rotate(360deg)}}@keyframes four-color{0%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}15%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}25%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}40%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}50%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}65%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}75%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}90%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}100%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}}`;let u=class extends l{};u.styles=[d],u=(0,a.__decorate)([(0,r.EM)("md-circular-progress")],u)},56180:(e,t,i)=>{i.d(t,{M:()=>s});var a=i(55473),r=i(52142),o=i(40086);function s(e,t,i){const[s,n]=(0,r.x)(i?.in,e,t),c=(+s-+n)/o.s0;return(0,a.u)(i?.roundingMethod)(c)}}};
//# sourceMappingURL=73824.FwajlnsUttE.js.map