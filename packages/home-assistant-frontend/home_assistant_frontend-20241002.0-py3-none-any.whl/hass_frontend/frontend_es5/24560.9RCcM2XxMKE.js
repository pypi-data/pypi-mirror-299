"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[24560],{37456:function(t,e,i){i.d(e,{a:function(){return n}});var s=(0,i(58034).n)((function(t){history.replaceState({scrollPosition:t},"")}),300),n=function(t){return function(e){return{kind:"method",placement:"prototype",key:e.key,descriptor:{set:function(t){s(t),this["__".concat(String(e.key))]=t},get:function(){var t;return this["__".concat(String(e.key))]||(null===(t=history.state)||void 0===t?void 0:t.scrollPosition)},enumerable:!0,configurable:!0},finisher:function(i){var s=i.prototype.connectedCallback;i.prototype.connectedCallback=function(){var i=this;s.call(this);var n=this[e.key];n&&this.updateComplete.then((function(){var e=i.renderRoot.querySelector(t);e&&setTimeout((function(){e.scrollTop=n}),0)}))}}}}}},58034:function(t,e,i){i.d(e,{n:function(){return s}});var s=function(t,e){var i,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=0,r=function(){for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];var c=Date.now();a||!1!==s||(a=c);var l=e-(c-a);l<=0||l>e?(i&&(clearTimeout(i),i=void 0),a=c,t.apply(void 0,o)):i||!1===n||(i=window.setTimeout((function(){a=!1===s?0:Date.now(),i=void 0,t.apply(void 0,o)}),l))};return r.cancel=function(){clearTimeout(i),i=void 0,a=0},r}},20712:function(t,e,i){i.d(e,{E:function(){return d}});var s=i(64782),n=i(35806),a=i(71008),r=i(62193),o=i(2816),u=i(27927),c=i(35890),l=(i(81027),i(82386),i(95737),i(39790),i(66457),i(36604),i(253),i(4525),i(96858),i(29818)),d=function(t){var e=(0,u.A)(null,(function(t,e){var i=function(e){function i(){var e;(0,a.A)(this,i);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return e=(0,r.A)(this,i,[].concat(n)),t(e),e}return(0,o.A)(i,e),(0,n.A)(i)}(e);return{F:i,d:[{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,c.A)(i,"connectedCallback",this,3)([]),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,c.A)(i,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){var t=this.__unsubs.pop();t instanceof Promise?t.then((function(t){return t()})):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,c.A)(i,"updated",this,3)([t]),t.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var e,n=(0,s.A)(t.keys());try{for(n.s();!(e=n.n()).done;){var a=e.value;if(this.hassSubscribeRequiredHostProps.includes(a))return void this.__checkSubscribed()}}catch(r){n.e(r)}finally{n.f()}}}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var t,e=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some((function(t){return void 0===e[t]}))||(this.__unsubs=this.hassSubscribe())}}]}}),t);return e}},18427:function(t,e,i){var s,n,a,r,o,u=i(33994),c=i(658),l=i(22858),d=i(64782),h=i(64599),f=i(35806),v=i(71008),b=i(62193),_=i(2816),p=i(27927),k=(i(81027),i(13025),i(95737),i(79243),i(97741),i(89655),i(33231),i(50693),i(26098),i(10507),i(39790),i(66457),i(74268),i(24545),i(51855),i(82130),i(31743),i(22328),i(4959),i(62435),i(99019),i(253),i(2075),i(54846),i(16891),i(66555),i(96858),i(54838),i(15112)),m=i(29818),y=i(94100),g=i(34897),w=i(19244),A=(i(28664),i(94929)),S=i(4826),x=i(20712),C=i(55321),P=i(24861),j=function(){return Promise.all([i.e(10963),i.e(14691),i.e(31572),i.e(24500),i.e(70252),i.e(65082),i.e(73767),i.e(78018),i.e(80115),i.e(9421),i.e(76994),i.e(77789),i.e(94439)]).then(i.bind(i,94564))},T={no_state:0,entity_no_longer_recorded:1,entity_not_recorded:1,state_class_removed:2,units_changed:3};(0,p.A)([(0,m.EM)("developer-tools-statistics")],(function(t,e){var i,p=function(e){function i(){var e;(0,v.A)(this,i);for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return e=(0,b.A)(this,i,[].concat(n)),t(e),e}return(0,_.A)(i,e),(0,f.A)(i)}(e);return{F:p,d:[{kind:"field",decorators:[(0,m.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,m.wk)()],key:"_data",value:function(){return[]}},{kind:"field",key:"_disabledEntities",value:function(){return new Set}},{kind:"method",key:"firstUpdated",value:function(){this._validateStatistics()}},{kind:"field",key:"_displayData",value:function(){return(0,y.A)((function(t,e){return t.map((function(t){var i;return Object.assign(Object.assign({},t),{},{displayName:t.state?(0,w.u)(t.state):t.name||t.statistic_id,issues_string:null===(i=t.issues)||void 0===i?void 0:i.map((function(t){return e("ui.panel.developer-tools.tabs.statistics.issues.".concat(t.type),t.data)||t.type})).join(" ")})}))}))}},{kind:"field",key:"_columns",value:function(){var t=this;return(0,y.A)((function(e){return{displayName:{title:e("ui.panel.developer-tools.tabs.statistics.data_table.name"),main:!0,sortable:!0,filterable:!0,flex:2},statistic_id:{title:e("ui.panel.developer-tools.tabs.statistics.data_table.statistic_id"),sortable:!0,filterable:!0,hidden:t.narrow},statistics_unit_of_measurement:{title:e("ui.panel.developer-tools.tabs.statistics.data_table.statistics_unit"),sortable:!0,filterable:!0,forceLTR:!0},source:{title:e("ui.panel.developer-tools.tabs.statistics.data_table.source"),sortable:!0,filterable:!0},issues_string:{title:e("ui.panel.developer-tools.tabs.statistics.data_table.issue"),sortable:!0,filterable:!0,direction:"asc",flex:2,template:function(t){var i;return(0,k.qy)(s||(s=(0,h.A)(["",""])),null!==(i=t.issues_string)&&void 0!==i?i:e("ui.panel.developer-tools.tabs.statistics.no_issue"))}},fix:{title:"",label:t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.fix"),template:function(i){return(0,k.qy)(n||(n=(0,h.A)(["",""])),i.issues?(0,k.qy)(a||(a=(0,h.A)(['<mwc-button @click="','" .data="','"> '," </mwc-button>"])),t._fixIssue,i.issues,e("ui.panel.developer-tools.tabs.statistics.fix_issue.fix")):"â€”")},minWidth:"113px",maxWidth:"113px",showNarrow:!0},actions:{title:"",label:e("ui.panel.developer-tools.tabs.statistics.adjust_sum"),type:"icon-button",showNarrow:!0,template:function(i){return i.has_sum?(0,k.qy)(r||(r=(0,h.A)([' <ha-icon-button .label="','" .path="','" .statistic="','" @click="','"></ha-icon-button> '])),e("ui.panel.developer-tools.tabs.statistics.adjust_sum"),"M22,13V22H2V19L22,13M21.68,7.06L16.86,4.46L17.7,7.24L7.58,10.24C6.63,8.95 4.82,8.67 3.53,9.62C2.24,10.57 1.96,12.38 2.91,13.67C3.85,14.97 5.67,15.24 6.96,14.29C7.67,13.78 8.1,12.97 8.14,12.09L18.26,9.09L19.1,11.87L21.68,7.06Z",i,t._showStatisticsAdjustSumDialog):""}}}}))}},{kind:"method",key:"render",value:function(){return(0,k.qy)(o||(o=(0,h.A)([' <ha-data-table .hass="','" .columns="','" .data="','" .noDataText="','" .narrow="','" id="statistic_id" clickable @row-click="','"></ha-data-table> '])),this.hass,this._columns(this.hass.localize),this._displayData(this._data,this.hass.localize),this.hass.localize("ui.panel.developer-tools.tabs.statistics.data_table.no_statistics"),this.narrow,this._rowClicked)}},{kind:"method",key:"_showStatisticsAdjustSumDialog",value:function(t){var e,i;t.stopPropagation(),e=this,i={statistic:t.currentTarget.statistic},(0,g.r)(e,"show-dialog",{dialogTag:"dialog-statistics-adjust-sum",dialogImport:j,dialogParams:i})}},{kind:"method",key:"_rowClicked",value:function(t){var e=t.detail.id;e in this.hass.states&&(0,g.r)(this,"hass-more-info",{entityId:e})}},{kind:"method",key:"hassSubscribe",value:function(){var t=this;return[(0,A.Bz)(this.hass.connection,(function(e){var i,s=new Set,n=(0,d.A)(e);try{for(n.s();!(i=n.n()).done;){var a=i.value;a.disabled_by&&s.add(a.entity_id)}}catch(r){n.e(r)}finally{n.f()}s!==t._disabledEntities&&(t._disabledEntities=s,t._validateStatistics())}))]}},{kind:"method",key:"_validateStatistics",value:(i=(0,l.A)((0,u.A)().mark((function t(){var e,i,s,n,a,r=this;return(0,u.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,S.p3)(this.hass),(0,S.Ph)(this.hass)]);case 2:e=t.sent,i=(0,c.A)(e,2),s=i[0],n=i[1],a=new Set,this._data=s.filter((function(t){return!r._disabledEntities.has(t.statistic_id)})).map((function(t){return a.add(t.statistic_id),Object.assign(Object.assign({},t),{},{state:r.hass.states[t.statistic_id],issues:n[t.statistic_id]})})),Object.keys(n).forEach((function(t){a.has(t)||r._disabledEntities.has(t)||r._data.push({statistic_id:t,statistics_unit_of_measurement:"",source:"",state:r.hass.states[t],issues:n[t],has_mean:!1,has_sum:!1,unit_class:null})}));case 9:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{kind:"field",key:"_fixIssue",value:function(){var t=this;return function(){var e=(0,l.A)((0,u.A)().mark((function e(i){var s,n;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=i.currentTarget.data.sort((function(t,e){var i,s;return(null!==(i=T[t.type])&&void 0!==i?i:99)-(null!==(s=T[e.type])&&void 0!==s?s:99)})),n=s[0],e.next=4,(0,P.c)(t,n);case 4:t._validateStatistics();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},{kind:"get",static:!0,key:"styles",value:function(){return C.RF}}]}}),(0,x.E)(k.WF))},24861:function(t,e,i){i.d(e,{c:function(){return l}});var s=i(33994),n=i(22858),a=(i(95737),i(26098),i(39790),i(66457),i(99019),i(96858),i(34897)),r=function(){return Promise.all([i.e(14121),i.e(63893),i.e(92106),i.e(10963),i.e(23766),i.e(29654),i.e(31572),i.e(24500),i.e(70252),i.e(99196),i.e(72915),i.e(65082),i.e(51431),i.e(49054),i.e(73767),i.e(81625),i.e(17590),i.e(89134),i.e(14962),i.e(16294),i.e(6839),i.e(20144),i.e(12675),i.e(68236),i.e(9421),i.e(57641),i.e(16204),i.e(54083),i.e(24014),i.e(82765),i.e(55405),i.e(64318),i.e(45111)]).then(i.bind(i,2182))},o=function(t,e){return new Promise((function(i){var s=e.fixedCallback;(0,a.r)(t,"show-dialog",{dialogTag:"dialog-statistics-fix",dialogImport:r,dialogParams:Object.assign(Object.assign({},e),{},{cancelCallback:function(){i(!1)},fixedCallback:function(){i(!0),null==s||s()}})})}))},u=function(){return Promise.all([i.e(92106),i.e(10963),i.e(3051),i.e(94197)]).then(i.bind(i,55705))},c=function(t,e){return new Promise((function(i){var s=e.fixedCallback;(0,a.r)(t,"show-dialog",{dialogTag:"dialog-statistics-fix-units-changed",dialogImport:u,dialogParams:Object.assign(Object.assign({},e),{},{cancelCallback:function(){i(!1)},fixedCallback:function(){i(!0),null==s||s()}})})}))},l=function(){var t=(0,n.A)((0,s.A)().mark((function t(e,i){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("units_changed"!==i.type){t.next=2;break}return t.abrupt("return",c(e,{issue:i}));case 2:return t.abrupt("return",o(e,{issue:i}));case 3:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()}}]);
//# sourceMappingURL=24560.9RCcM2XxMKE.js.map